<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Move Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Move Method</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/move-method">https://refactoringguru.cn/move-method</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>A method is used more in another class than in its own class.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Create a new method in the class that uses the method the most, then move code from the old method to there. Turn the code of the original method into a reference to the new method in the other class or else remove it entirely.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container ">
                <div class="before">
                    <div class="ba">Before</div>
                                            <div class="ba-container"><img src="../Images/ef0fdb8b01de0bf9f9ec2a2f7a327c38.png" alt="Move Method - Before" width="134" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Move Method - Before.png?id=4abd2ccfc636cdcffe30f5593868bbfa"/></div>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <div class="ba-container"><img src="../Images/e6915fa5898436114da3e325cffd62fa.png" alt="Move Method - After" width="134" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Move Method - After.png?id=df9892b4d0a367b12881e93e7d0ea0c0"/></div>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<ol>
<li>
<p>You want to move a method to a class that contains most of the data used by the method. This makes <strong>classes more internally coherent</strong>.</p>
</li>
<li>
<p>You want to move a method in order to reduce or eliminate the dependency of the class calling the method on the class in which it's located. This can be useful if the calling class is already dependent on the class to which you're planning to move the method. This  <strong>reduces dependency between classes</strong>.</p>
</li>
</ol>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Verify all features used by the old method in its class. It may be a good idea to move them as well. As a rule, if a feature is used only by the method under consideration, you should certainly move the feature to it. If the feature is used by other methods too, you should move these methods as well. Sometimes it's much easier to move a large number of methods than to set up relationships between them in different classes.</p>
<p>Make sure that the method isn't declared in superclasses and subclasses. If this is the case, you will either have to refrain from moving or else implement a kind of polymorphism in the recipient class in order to ensure varying functionality of a method split up among donor classes.</p>
</li>
<li>
<p>Declare the new method in the recipient class. You may want to give a new name for the method that's more appropriate for it in the new class.</p>
</li>
<li>
<p>Decide how you will refer to the recipient class. You may already have a field or method that returns an appropriate object, but if not, you will need to write a new method or field to store the object of the recipient class.</p>
<p>Now you have a way to refer to the recipient object and a new method in its class. With all this under your belt, you can turn the old method into a reference to the new method.</p>
</li>
<li>
<p>Take a look: can you delete the old method entirely? If so, place a reference to the new method in all places that use the old one.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>