<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Remove Assignments to Parameters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Remove Assignments to Parameters</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/remove-assignments-to-parameters">https://refactoringguru.cn/remove-assignments-to-parameters</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>Some value is assigned to a parameter inside method's body.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Use a local variable instead of a parameter.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container java" data-lang="java">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="java">int discount(int inputVal, int quantity) {
  if (quantity &gt; 50) {
    inputVal -= 2;
  }
  // ...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="java">int discount(int inputVal, int quantity) {
  int result = inputVal;
  if (quantity &gt; 50) {
    result -= 2;
  }
  // ...
}</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container csharp" data-lang="csharp">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="csharp">int Discount(int inputVal, int quantity) 
{
  if (quantity &gt; 50) 
  {
    inputVal -= 2;
  }
  // ...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="csharp">int Discount(int inputVal, int quantity) 
{
  int result = inputVal;
  
  if (quantity &gt; 50) 
  {
    result -= 2;
  }
  // ...
}</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container php" data-lang="php">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="php">function discount($inputVal, $quantity) {
  if ($quantity &gt; 50) {
    $inputVal -= 2;
  }
  ...</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="php">function discount($inputVal, $quantity) {
  $result = $inputVal;
  if ($quantity &gt; 50) {
    $result -= 2;
  }
  ...</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container python" data-lang="python">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="python">def discount(inputVal, quantity):
    if quantity &gt; 50:
        inputVal -= 2
    # ...</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="python">def discount(inputVal, quantity):
    result = inputVal
    if quantity &gt; 50:
        result -= 2
    # ...</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container typescript" data-lang="typescript">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="typescript">discount(inputVal: number, quantity: number): number {
  if (quantity &gt; 50) {
    inputVal -= 2;
  }
  // ...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="typescript">discount(inputVal: number, quantity: number): number {
  let result = inputVal;
  if (quantity &gt; 50) {
    result -= 2;
  }
  // ...
}</pre>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>The reasons for this refactoring are the same as for <a href="/split-temporary-variable">Split Temporary Variable</a>, but in this case we're dealing with a parameter, not a local variable.</p>
<p>First, if a parameter is passed via reference, then after the parameter value is changed inside the method, this value is passed to the argument that requested calling this method. Very often, this occurs accidentally and leads to unfortunate effects. Even if parameters are usually passed by value (and not by reference) in your programming language, this coding quirk may alienate those who are unaccustomed to it.</p>
<p>Second, multiple assignments of different values to a single parameter make it difficult for you to know what data should be contained in the parameter at any particular point in time. The problem worsens if your parameter and its contents are documented but the actual value is capable of differing from what's expected inside the method.</p>
<h3>Benefits</h3>
<ul>
<li>
<p>Each element of the program should be responsible for only one thing. This makes code maintenance much easier going forward, since you can safely replace code without any side effects.</p>
</li>
<li>
<p>This refactoring helps to extract <a href="/extract-method">repetitive code to separate methods</a>.</p>
</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Create a local variable and assign the initial value of your parameter.</p>
</li>
<li>
<p>In all method code that follows this line, replace the parameter with your new local variable.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>