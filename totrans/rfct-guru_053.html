<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Hide Delegate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Hide Delegate</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/hide-delegate">https://refactoringguru.cn/hide-delegate</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>The client gets object B from a field or method of object А. Then the client calls a method of object B.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Create a new method in class A that delegates the call to object B. Now the client doesn't know about, or depend on, class B.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container ">
                <div class="before">
                    <div class="ba">Before</div>
                                            <div class="ba-container"><img src="../Images/0e3d0cfd7c90197dc21759d9324a7931.png" alt="Hide Delegate - Before" width="415" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Hide Delegate - Before.png?id=f7de1016e76545f7c51af09463ce5f4c"/></div>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <div class="ba-container"><img src="../Images/604f24e39e5d58b3b5bdcff7872367ea.png" alt="Hide Delegate - After" width="153" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Hide Delegate - After.png?id=f51110f3e0d4423b3f9088e92fc3dce4"/></div>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>To start with, let's look at terminology:</p>
<ul>
<li>
<p><em>Server</em> is the object to which the client has direct access.</p>
</li>
<li>
<p><em>Delegate</em> is the end object that contains the functionality needed by the client.</p>
</li>
</ul>
<p>A call chain appears when a client requests an object from another object, then the second object requests another one, and so on. These sequences of calls involve the client in navigation along the class structure. Any changes in these interrelationships will require changes on the client side.</p>
<h3>Benefits</h3>
<ul>
<li>Hides delegation from the client. The less that the client code needs to know about the details of relationships between objects, the easier it's to make changes to your program.</li>
</ul>
<h3>Drawbacks</h3>
<ul>
<li>If you need to create an excessive number of delegating methods, <em>server-class</em> risks becoming an unneeded go-between, leading to an excess of <a href="/smells/middle-man">Middle Man</a>.</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>For each method of the <em>delegate-class</em> called by the client, create a method in the  <em>server-class</em> that delegates the call to the <em>delegate-class</em>.</p>
</li>
<li>
<p>Change the client code so that it calls the methods of the <em>server-class</em>.</p>
</li>
<li>
<p>If your changes free the client from needing the <em>delegate-class</em>, you can remove the access method to the <em>delegate-class</em> from the <em>server-class</em> (the method that was originally used to get the <em>delegate-class</em>).</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>