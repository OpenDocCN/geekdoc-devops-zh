<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Change Bidirectional Association to Unidirectional</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Change Bidirectional Association to Unidirectional</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/change-bidirectional-association-to-unidirectional">https://refactoringguru.cn/change-bidirectional-association-to-unidirectional</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>You have a bidirectional association between classes, but one of the classes doesn't use the other's features.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Remove the unused association.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container ">
                <div class="before">
                    <div class="ba">Before</div>
                                            <div class="ba-container"><img src="../Images/798cc372424c2131fa86cfbcb618d86c.png" alt="Change Bidirectional Association to Unidirectional - Before" width="396" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Change Bidirectional Association to Unidirectional - Before.png?id=9fc2b8d6c54255295d2ef62d9e015c0a"/></div>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <div class="ba-container"><img src="../Images/0e008dd4ff7cbff40b3af99c0b584c66.png" alt="Change Bidirectional Association to Unidirectional - After" width="396" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Change Bidirectional Association to Unidirectional - After.png?id=0340aa25a071d7529343ebe3dd469ffd"/></div>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>A bidirectional association is generally harder to maintain than a unidirectional one, requiring additional code for properly creating and deleting the relevant objects. This makes the program more complicated.</p>
<p>In addition, an improperly implemented bidirectional association can cause problems for garbage collection (in turn leading to memory bloat by unused objects).</p>
<p>Example: the garbage collector removes objects from memory that are no longer referenced by other objects. Let's say that an object pair <code>User</code>-<code>Order</code> was created, used, and then abandoned. But these objects won't be cleared from memory since they still refer to each other. That said, this problem is becoming less important thanks to advances in programming languages, which now automatically identify unused object references and remove them from memory.</p>
<p>There's also the problem of interdependency between classes. In a bidirectional association, the two classes must know about each other, meaning that they can't be used separately. If many of these associations are present, different parts of the program become too dependent on each other and any changes in one component may affect the other components.</p>
<h3>Benefits</h3>
<ul>
<li>
<p>Simplifies the class that doesn't need the relationship. Less code equals less code maintenance.</p>
</li>
<li>
<p>Reduces dependency between classes. Independent classes are easier to maintain since any changes to a class affect only that class.</p>
</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Make sure that one of the following is true for your classes:</p>
<ul>
<li>
<p>No association is used.</p>
</li>
<li>
<p>There's another way to get the associated object, such through a database query.</p>
</li>
<li>
<p>The associated object can be passed as an argument to the methods that use it.</p>
</li>
</ul>
</li>
<li>
<p>Depending on your situation, use of a field that contains an association with another object should be replaced by a parameter or method call for getting the object in a different way.</p>
</li>
<li>
<p>Delete the code that assigns the associated object to the field.</p>
</li>
<li>
<p>Delete the now-unused field.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>