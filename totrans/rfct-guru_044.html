<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Split Temporary Variable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Split Temporary Variable</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/split-temporary-variable">https://refactoringguru.cn/split-temporary-variable</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>You have a local variable that's used to store various intermediate values inside a method (except for cycle variables).</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Use different variables for different values. Each variable should be responsible for only one particular thing.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container java" data-lang="java">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="java">double temp = 2 * (height + width);
System.out.println(temp);
temp = height * width;
System.out.println(temp);</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="java">final double perimeter = 2 * (height + width);
System.out.println(perimeter);
final double area = height * width;
System.out.println(area);</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container csharp" data-lang="csharp">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="csharp">double temp = 2 * (height + width);
Console.WriteLine(temp);
temp = height * width;
Console.WriteLine(temp);</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="csharp">readonly double perimeter = 2 * (height + width);
Console.WriteLine(perimeter);
readonly double area = height * width;
Console.WriteLine(area);</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container php" data-lang="php">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="php">$temp = 2 * ($this-&gt;height + $this-&gt;width);
echo $temp;
$temp = $this-&gt;height * $this-&gt;width;
echo $temp;</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="php">$perimeter = 2 * ($this-&gt;height + $this-&gt;width);
echo $perimeter;
$area = $this-&gt;height * $this-&gt;width;
echo $area;</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container python" data-lang="python">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="python">temp = 2 * (height + width)
print(temp)
temp = height * width
print(temp)</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="python">perimeter = 2 * (height + width)
print(perimeter)
area = height * width
print(area)</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container typescript" data-lang="typescript">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="typescript">let temp = 2 * (height + width);
console.log(temp);
temp = height * width;
console.log(temp);</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="typescript">const perimeter = 2 * (height + width);
console.log(perimeter);
const area = height * width;
console.log(area);</pre>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>If you're skimping on the number of variables inside a function and reusing them for various unrelated purposes, you're sure to encounter problems as soon as you need to make changes to the code containing the variables. You will have to recheck each case of variable use to make sure that the correct values are used.</p>
<h3>Benefits</h3>
<ul>
<li>
<p>Each component of the program code should be responsible for one and one thing only. This makes it much easier to maintain the code, since you can easily replace any particular thing without fear of unintended effects.</p>
</li>
<li>
<p>Code becomes more readable. If a variable was created long ago in a rush, it probably has a name that doesn't explain anything: <code>k</code>, <code>a2</code>, <code>value</code>, etc. But you can fix this situation by naming the new variables in an understandable, self-explanatory way. Such names might resemble <code>customerTaxValue</code>, <code>cityUnemploymentRate</code>, <code>clientSalutationString</code> and the like.</p>
</li>
<li>
<p>This refactoring technique is useful if you anticipate using <a href="/extract-method">Extract Method</a> later.</p>
</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Find the first place in the code where the variable is given a value. Here you should rename the variable with a name that corresponds to the value being assigned.</p>
</li>
<li>
<p>Use the new name instead of the old one in places where this value of the variable is used.</p>
</li>
<li>
<p>Repeat as needed for places where the variable is assigned a different value.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>