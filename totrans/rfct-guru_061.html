<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Change Reference to Value</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Change Reference to Value</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/change-reference-to-value">https://refactoringguru.cn/change-reference-to-value</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

    
    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>You have a reference object that's too small and infrequently changed to justify managing its life cycle.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Turn it into a value object.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container ">
                <div class="before">
                    <div class="ba">Before</div>
                                            <div class="ba-container"><img src="../Images/e7906b084feeb396f2cd25ed48d33cb9.png" alt="Change Reference to Value - Before" width="377" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Change Reference to Value - Before.png?id=584dcba345161853463376cef73ab205"/></div>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <div class="ba-container"><img src="../Images/5911d31e184e3a40c69041add44067fc.png" alt="Change Reference to Value - After" width="377" data-original-src="https://refactoringguru.cn/images/refactoring/diagrams/Change Reference to Value - After.png?id=08ac04b5ee1d4845fb6ebe409a4a6614"/></div>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>Inspiration to switch from a reference to a value may come from the inconvenience of working with the reference. References require management on your part:</p>
<ul>
<li>
<p>They always require requesting the necessary object from storage.</p>
</li>
<li>
<p>References in memory may be inconvenient to work with.</p>
</li>
<li>
<p>Working with references is particularly difficult, compared to values, on distributed and parallel systems.</p>
</li>
</ul>
<p>Values are especially useful if you would rather have unchangeable objects than objects whose state may change during their lifetime.</p>
<h3>Benefits</h3>
<ul>
<li>
<p>One important property of objects is that they should be unchangeable. The same result should be received for each query that returns an object value. If this is true, no problems arise if there are many objects representing the same thing.</p>
</li>
<li>
<p>Values are much easier to implement.</p>
</li>
</ul>
<h3>Drawbacks</h3>
<ul>
<li>If a value is changeable, make sure if any object changes that the values in all the other objects representing the same entity are updated. This is so burdensome that it's easier to create a reference for this purpose.</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Make the object unchangeable. The object shouldn't have any setters or other methods that change its state and data (<a href="/remove-setting-method">Remove Setting Method</a> may help here). The only place where data should be assigned to the fields of a value object is a constructor.</p>
</li>
<li>
<p>Create a comparison method to be able to compare two values.</p>
</li>
<li>
<p>Check whether you can delete the factory method and make the object constructor public.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>


        
</body>
</html>