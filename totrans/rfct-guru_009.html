<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Long Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Long Method</h1>
<blockquote>原文：<a href="https://refactoringguru.cn/smells/long-method">https://refactoringguru.cn/smells/long-method</a></blockquote>
    
    

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight &amp;gt; 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '&amp;lt;strong&amp;gt;$1:&amp;lt;/strong&amp;gt; $2');
        h1.innerHTML = title;
    </script>

                
    <h3>Signs and Symptoms</h3>
<p>A method contains too many lines of code. Generally, any method longer than ten lines should make you start asking questions.</p>
<figure class="image"><img width="500" height="300" src="../Images/327047b314b2a85724c738383e3d6f66.png" srcset="/images/refactoring/content/smells/long-method-01-2x.png?id=fd9479c2221526f284c9b14fb94f9169 2x" data-original-src="https://refactoringguru.cn/images/refactoring/content/smells/long-method-01.png?id=ba3b4a6d8ef25a8f676543cee5e1e019"/></figure>
<h3>Reasons for the Problem</h3>
<p>Like the Hotel California, something is always being added to a method but nothing is ever taken out. Since it's easier to write code than to read it, this "smell" remains unnoticed until the method turns into an ugly, oversized beast.</p>
<p>Mentally, it's often harder to create a new method than to add to an existing one: "But it's just two lines, there's no use in creating a whole method just for that..." Which means that another line is added and then yet another, giving birth to a tangle of spaghetti code.</p>
<h3>Treatment</h3>
<p>As a rule of thumb, if you feel the need to comment on something inside a method, you should take this code and put it in a new method. Even a single line can and should be split off into a separate method, if it requires explanations. And if the method has a descriptive name, nobody will need to look at the code to see what it does.</p>
<figure class="image"><img width="500" height="300" src="../Images/f5b674bc074542f28730233de71d5182.png" srcset="/images/refactoring/content/smells/long-method-02-2x.png?id=beba19e840bf4763e85f006ef79cc89c 2x" loading="lazy" data-original-src="https://refactoringguru.cn/images/refactoring/content/smells/long-method-02.png?id=274350a92b305ae79848ab40b3bdb0cb"/></figure>
<ul>
<li>
<p>To reduce the length of a method body, use <a href="/extract-method">Extract Method</a>.</p>
</li>
<li>
<p>If local variables and parameters interfere with extracting a method, use <a href="/replace-temp-with-query">Replace Temp with Query</a>, <a href="/introduce-parameter-object">Introduce Parameter Object</a> or <a href="/preserve-whole-object">Preserve Whole Object</a>.</p>
</li>
<li>
<p>If none of the previous recipes help, try moving the entire method to a separate object via <a href="/replace-method-with-method-object">Replace Method with Method Object</a>.</p>
</li>
<li>
<p>Conditional operators and loops are a good clue that code can be moved to a separate method. For conditionals, use <a href="/decompose-conditional">Decompose Conditional</a>. If loops are in the way, try <a href="/extract-method">Extract Method</a>.</p>
</li>
</ul>
<h3>Payoff</h3>
<ul>
<li>
<p>Among all types of object-oriented code, classes with short methods live longest. The longer a method or function is, the harder it becomes to understand and maintain it.</p>
</li>
<li>
<p>In addition, long methods offer the perfect hiding place for unwanted duplicate code.</p>
</li>
</ul>
<figure class="image"><img width="500" height="300" src="../Images/8519663b669d4ad0afd734e85b668b7e.png" srcset="/images/refactoring/content/smells/long-method-03-2x.png?id=ba563da468cf42a704ff53da2e89b6d5 2x" loading="lazy" data-original-src="https://refactoringguru.cn/images/refactoring/content/smells/long-method-03.png?id=82ce2d388aa14bdae4e8f62b875f0259"/></figure>
<h3>Performance</h3>
<p>Does an increase in the number of methods hurt performance, as many people claim? In almost all cases the impact is so negligible that it's not even worth worrying about.</p>
<p>Plus, now that you have clear and understandable code, you're more likely to find truly effective methods for restructuring code and getting real performance gains if the need ever arises.</p>

    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop="" muted="" playsinline="" width="200" height="200">
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4" type="image/png">
                    Your browser does not support HTML video.
                </source></source></video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-secondary" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"/> Let's see…</a>
        </div>
    </div>

    
</body>
</html>