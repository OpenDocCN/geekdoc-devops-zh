# 何时重构

> 原文：[`refactoringguru.cn/refactoring/when`](https://refactoringguru.cn/refactoring/when)

![](img/44623613715424b09efc9911f6177f93.png)

#### 三次原则

1.  当你第一次做某件事时，只需完成它。

1.  当你第二次做类似的事情时，虽然感到不适，但还是要照做。

1.  当你第三次做某件事时，开始重构。

![](img/f15b43cb02a12af5a641e9da44e5ca09.png)

#### 当添加新功能时

+   重构有助于你理解他人的代码。如果需要处理别人的肮脏代码，尝试先进行重构。干净的代码更容易理解。你不仅会为自己改善它，还会为之后使用它的人提升体验。

+   重构使得添加新功能变得更加容易。在干净的代码中进行更改要简单得多。

![](img/29f953a77055c2c87ef4e8423fa9ec7b.png)

#### 当修复错误时

代码中的错误就像现实生活中的错误：它们藏在代码最黑暗、最肮脏的地方。清理代码，错误几乎会自行暴露。

管理者欣赏主动重构，因为这消除了之后需要进行特殊重构任务的必要性。快乐的老板会让程序员也开心！

![](img/122e578dd491cde813f15b77fd2b4e24.png)

#### 在代码审查期间

代码审查可能是整理代码的最后机会，之后它就会公开发布。

最好与作者配对进行此类审查。这样，你可以快速修复简单问题，并评估修复更困难问题的时间。
