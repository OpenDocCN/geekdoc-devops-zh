# 组合方法

> 原文：[`refactoringguru.cn/refactoring/techniques/composing-methods`](https://refactoringguru.cn/refactoring/techniques/composing-methods)

大部分重构工作都专注于正确构建方法。在大多数情况下，过长的方法是万恶之源。这些方法内部代码的多变性掩盖了执行逻辑，使方法极难理解，甚至更难修改。

这一组重构技术简化了方法，消除了代码重复，为未来改进铺平了道路。

提取方法

**问题：** 你有一个可以归类在一起的代码片段。

**解决方案：** 将这段代码移动到一个新的单独方法（或函数）中，并用对该方法的调用替换旧代码。

内联方法

**问题：** 当方法体比方法本身更明显时，使用此技巧。

**解决方案：** 用方法的内容替换对该方法的调用，并删除该方法本身。

提取变量

**问题：** 你有一个难以理解的表达式。

**解决方案：** 将表达式的结果或其部分放在自解释的单独变量中。

内联临时变量

**问题：** 你有一个临时变量，它只被赋值为一个简单表达式的结果，没其他用途。

**解决方案：** 用表达式本身替换对变量的引用。

用查询替换临时变量

**问题：** 你将表达式的结果放在一个局部变量中，以便在代码中后续使用。

**解决方案：** 将整个表达式移动到一个单独的方法中，并从中返回结果。查询该方法而不是使用变量。如有必要，将新方法合并到其他方法中。

拆分临时变量

**问题：** 你有一个局部变量，用于存储方法内部的各种中间值（循环变量除外）。

**解决方案：** 为不同的值使用不同的变量。每个变量应该只负责一个特定的事物。

删除参数赋值

**问题：** 某个值被分配给方法体内的参数。

**解决方案：** 使用局部变量代替参数。

用方法对象替换方法

**问题：** 你有一个长方法，其中局部变量交织在一起，以至于你无法应用*提取方法*。

**解决方案：** 将方法转换为一个单独的类，使局部变量成为该类的字段。然后可以将该方法拆分为同一类中的多个方法。

替代算法

**问题：** 所以你想用一个新算法替换现有算法？

**解决方案：** 用一个新算法替换实现算法的方法体。
