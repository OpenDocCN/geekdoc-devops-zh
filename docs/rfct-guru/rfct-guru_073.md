# 简化条件表达式

> 原文：[`refactoringguru.cn/refactoring/techniques/simplifying-conditional-expressions`](https://refactoringguru.cn/refactoring/techniques/simplifying-conditional-expressions)

条件语句的逻辑往往随着时间的推移变得越来越复杂，还有更多技术可以应对这一点。

拆分条件

**问题：** 你有一个复杂的条件（`if-then`/`else` 或 `switch`）。

**解决方案：** 将条件语句中复杂的部分拆分为单独的方法：条件、`then` 和 `else`。

合并条件表达式

**问题：** 你有多个条件语句导致相同的结果或操作。

**解决方案：** 将所有这些条件合并为一个表达式。

合并重复的条件片段

**问题：** 在条件的所有分支中都可以找到相同的代码。

**解决方案：** 将代码移出条件语句。

移除控制标志

**问题：** 你有一个布尔变量，它作为多个布尔表达式的控制标志。

**解决方案：** 不要使用变量，而是使用 `break`、`continue` 和 `return`。

用守卫语句替换嵌套条件

**问题：** 你有一组嵌套的条件语句，很难确定代码执行的正常流程。

**解决方案：** 将所有特殊检查和边界情况隔离到单独的子句中，并将它们放在主要检查之前。理想情况下，你应该有一个“扁平”的条件列表，一个接一个。

用多态替换条件

**问题：** 你有一个条件语句，根据对象类型或属性执行不同的操作。

**解决方案：** 创建与条件分支相匹配的子类。在这些子类中，创建一个共享方法，并将对应条件分支的代码移动到其中。然后用相关的方法调用替换条件语句。结果是，适当的实现将通过多态性根据对象类来获得。

引入空对象

**问题：** 由于某些方法返回 `null` 而不是实际对象，你的代码中有许多对 `null` 的检查。

**解决方案：** 不要返回 `null`，而是返回一个显示默认行为的空对象。

引入断言

**问题：** 为了使一段代码正常工作，某些条件或值必须为真。

**解决方案：** 用具体的断言检查替换这些假设。
