# 数据簇

> 原文：[`refactoringguru.cn/smells/data-clumps`](https://refactoringguru.cn/smells/data-clumps)

### 征兆和症状

有时代码的不同部分包含相同的变量组（例如连接到数据库的参数）。这些簇应该转换为它们自己的类。

![](img/541b261be789a54e050745d017aca2e6.png)

### 问题原因

这些数据组通常是由于程序结构不良或“复制粘贴编程”造成的。

如果你想确认某些数据是否是数据簇，只需删除其中一个数据值，看看其他值是否仍然有意义。如果不是，这表明这组变量应该合并为一个对象。

### 处理

+   如果重复的数据构成类的字段，请使用提取类将字段移动到它们自己的类中。

+   如果相同的数据簇作为方法参数传递，请使用引入参数对象将它们设定为一个类。

+   如果一些数据被传递给其他方法，考虑将整个数据对象传递给方法，而不仅仅是单个字段。保持整个对象将对此有所帮助。

+   查看这些字段使用的代码。将这段代码移动到数据类中可能是个好主意。

![](img/1d9be22d7f5886dccf71962d24879d48.png)

### 收益

+   改善了代码的理解和组织。对特定数据的操作现在集中在一个地方，而不是在代码中随意分散。

+   减少代码大小。

![](img/b60ecfe494109565427af75ca2f31d20.png)

### 何时忽略

+   在方法的参数中传递整个对象，而不是仅传递其值（基本类型），可能会在两个类之间创建不必要的依赖关系。

</images/refactoring/banners/tired-of-reading-banner-1x.mp4?id=7fa8f9682afda143c2a491c6ab1c1e56>

</images/refactoring/banners/tired-of-reading-banner.png?id=1721d160ff9c84cbf8912f5d282e2bb4>

你的浏览器不支持 HTML 视频。

### 厌倦阅读了吗？

难怪，阅读这里所有文本需要 7 小时。

尝试我们的互动重构课程。这提供了一种不那么乏味的学习新知识的方法。

*让我们看看…*
