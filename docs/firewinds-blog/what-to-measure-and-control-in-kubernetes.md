# 在 Kubernetes 测量和控制什么

> 原文：<https://www.fairwinds.com/blog/what-to-measure-and-control-in-kubernetes>

 Kubernetes 成熟度模型 包括七个阶段，你将通过这七个阶段达到完全成熟。第六阶段，我们讨论 [测控](https://www.fairwinds.com/kubernetes-maturity-model/phase-6-measure-control) 。

刚接触 Kubernetes 的时候，你会经历一些基本的东西——准备、部署、改进。最终你会获得信心，现在会想要完善已经设置好的东西。这是走向成熟的一步，在这一步中，您确定需要围绕五个关键领域衡量什么:

1.  **安全性** -您将测量您的容器或集群中存在多少和哪些漏洞，以及您修补工作负载、集群或附加组件的频率/时间。

2.  **审计** -您将创建一个审计跟踪，以了解谁最近执行了哪些操作，以及工作负载在您的集群中执行了哪些操作。您将能够识别是否发生了未经授权的访问或操作。

3.  **漂移** -您将能够识别哪些工作负载不符合您的标准，哪些版本的依赖项/集群附加组件正在运行，以及工作负载是否与 Kubernetes 的未来版本兼容。

4.  **效率** -您将测量跟踪工作负载的典型或标准资源使用情况，以及集群中节点的典型容量/使用情况。您还将知道集群扩展的频率。

5.  **速度** -你将测量提高你的发展速度。这将包括了解部署的发货频率、有多少用户访问您的集群以及在您的集群中最常见的操作。

一旦您开始收集这些关键领域的数据，您可能会注意到一些问题。工作负载可能杂乱无章，影响其他工作负载。可能有太多来自工作负载的访问导致安全问题。可能存在可靠性或可伸缩性问题(伸缩性不够或伸缩过于频繁)。由于使用了太多的资源或者工作负载没有清理干净，成本可能会攀升得太高。

为了克服这一点，你需要把控制放在适当的位置。这里你需要回答一些基于数据的基本问题来建立一套 Kubernetes 护栏。您需要回答有关安全性、配置和工作负载的问题:

## **安全**

Kubernetes 的工作负载安全性至关重要。您将如何控制以下方面的群集权限:

*   谁有权访问集群？

*   用户可以在集群中采取什么行动？

*   工作负载可以在集群中采取哪些措施？

*   工作负载在集群中拥有什么级别的权限？

*   您的集群中工作负载之间的网络策略是什么？

## **配置**

坚固的 Kubernetes 环境将有一致性的配置标准。您应该对以下方面进行控制:

*   Kubernetes 资源的分布和定义？

*   发生了什么变化，何时发生？

*   你对资源的代码审查过程是怎样的？

*   什么类型的资源可以部署在您的集群中？

*   哪些名称空间可供哪些用户使用？

*   将工作负载部署到哪些名称空间？

*   如何设置工作负载或名称空间的可用资源量？

*   您的工作负载/部署的通用标准/默认值是什么？

## **工作流程**

同样，您将为如何部署工作负载和服务、晋升途径和职责建立工作流:

*   谁可以向您的集群部署工作负载和服务？

*   如何将工作负载和服务部署到您的集群？

*   环境之间的晋升路径是怎样的？

*   谁负责您环境的哪些方面？

一旦回答了这些问题，您将有一组策略来开始在集群中实现配置更改。这就是 Kubernetes 策略执行变得重要的地方。仅仅写下政策并期望你的团队遵循是不够的。您需要一种跨集群实施策略的方法。

有许多开源工具，如 [Polaris](/polaris) 、OPA、Goldilocks 和 Trivy，可以帮助检查 Kubernetes 最佳实践和定制策略的配置。这仍然需要您的团队在每个集群中应用每个工具。如果您要管理多个人员和集群，这会变得很麻烦。

使用像 Fairwinds Insights 这样的软件将经过审查的开源工具合并到一个单一的仪表板视图中。它使您能够测量集群配置，并根据这些数据建立和实施策略。您可以了解与安全性、可靠性和效率相关的严重或中等问题。

> 寻找一个完整的 Kubernetes 治理平台？Fairwinds Insights 是免费的。今天就开始吧。

在 Kubernetes 成熟的这个阶段，您将需要选项来为您提供度量和控制。Fairwinds Insights 是一款能够帮助您测量和实施护栏的软件。它具有跨工程团队的影响。

[![New call-to-action](img/154350e87174c62c0f2d20e8a08d9722.png)](https://cta-redirect.hubspot.com/cta/redirect/2184645/397d414a-d137-4f8e-9cfc-f6f2363bf2ad)