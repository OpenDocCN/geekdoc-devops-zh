# 不要让云拖垮你:云服务器备份的重要性

> 原文：<https://www.fairwinds.com/blog/the-importance-of-cloud-server-backups>

 我们都熟悉最常见的威胁媒介——黑客或其他不良分子获得对您的云基础架构的访问权，以利用系统漏洞。一个较少被提及的威胁媒介是有意或无意地删除内部数据。不管怎样，这种威胁迟早会成为现实。那么，当那个时刻到来时，你该如何准备呢？

为了确保高可用性和灾难恢复功能，从而提高可管理性并实现业务连续性，您首先需要确定您想要保护的内容—静态基础架构、动态基础架构、持久数据和依赖关系—然后创建涵盖关键基础架构和数据的灾难恢复计划。

## 静态基础设施

静态基础设施包括不经常改变的基础设施，包括网络基础设施、防火墙和 VPN 设备，以及平台状态文件。例如，在[Kubernetes](https://kubernetes.io/)世界中，静态基础设施可能包括集群配置和主/从用户数据。

像[terra form](https://www.terraform.io/)或[AWS cloud formation](https://aws.amazon.com/cloudformation/)这样的工具可以用于静态基础设施配置管理(CM)。确保定期进行代码审查和工程审查，并保留版本变更历史。考虑将您的静态基础架构配置应用到您的云平台上的多个区域，这将为您提供一个二级灾难恢复站点，而无需太多额外成本。

## 动态基础设施

动态基础结构包括应用程序堆栈的各个部分，这些部分可能会在应用程序的生命周期中发生变化，例如服务器配置、安全组、启动配置、自动伸缩组和负载平衡器。

Ansible 是一款常用的 DevOps 工具，用于自动化应用部署和协调基础设施变更。无论您使用什么工具，您都需要跟踪所有动态的基础结构变化。CM、版本控制和工程评审非常重要，如果应用程序堆栈遭到破坏或损害，完全重建应用程序堆栈的能力也非常重要。

假设一个坏人获得了对您的基础设施的访问权。如果您始终如一地维护和监控您的安全策略、实例配置和资源供应的单一真实来源，您的应用程序堆栈可以在不同的区域快速启动和运行。

## 不变数据

持久数据是您公司的命脉。它是存储用户信息、应用程序配置和逻辑的地方。大多数云存储资源允许您出于备份目的定期对数据进行快照。为防止丢失，请确保快照被镜像到辅助区域或帐户。一些可以考虑的工具:

*   [亚马逊关系数据库服务(RDS)](https://aws.amazon.com/rds/) 允许您的数据库的定期时间点快照。快照可用于恢复实例，并可轻松复制到其他区域和帐户。
*   [亚马逊弹性块存储(EBS)](https://aws.amazon.com/ebs/) 卷在每个可用性区域保存数据，并定期拍摄快照。可以修改快照以授予其他  [AWS](https://aws.amazon.com/) 账户访问权限，并且可以在地区和账户之间复制。
*   [elastic cache](https://aws.amazon.com/elasticache/)是一个用于缓存存储或键值存储的亚马逊 web 服务。如果您计划使用该工具维护状态，请确保设置自动快照，并像处理数据库一样传送备份。
*   [S3](https://aws.amazon.com/s3/)是亚马逊面向互联网的云存储。S3 存储桶中的所有数据都应复制到另一个帐户或地区。“一次写入，永不删除”存储桶策略和对象版本控制允许您保留多个版本，以防数据被覆盖或删除。

考虑维护一个仅用于备份的单独云帐户。例如，创建一个严格用于备份的 AWS 帐户，将其设置为“一次写入，永不删除”以维护永久的备份历史，定期同步持久数据，并限制可以访问该数据的用户数量。然后，如果你的主 AWS 账户出了什么问题，你仍然有你的备份账户。

## 属国

您的工作负载中存在应用程序和基础架构级别的依赖关系。如果这些依赖关系发生问题，您可能无法在灾难后重建基础设施。一些可以考虑的工具:

*   [亚马逊机器映像(AMIs)](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html) 是作为磁盘映像保存的已配置操作系统的快照。您的应用程序堆栈可能依赖于定制的基础映像，因此请确保备份 AMI 快照，以防您需要重建。如果主区域受损或停机时间延长，将 AMI 快照发送到辅助区域可以实现灾难恢复。
*   [Route 53](https://aws.amazon.com/route53/) 是亚马逊 DNS web 服务。早在 10 月，一次 DDoS 攻击导致一家主要的 DNS 提供商瘫痪，并导致东海岸大部分地区的互联网瘫痪。如果您使用 53 号路由进行 DNS，您需要一个备用计划。这样，如果 AWS 出现重大故障，您可以将您的区域备份带到另一个 DNS 提供商，并快速恢复在线。

## 结束语

你如何确保云不会让你失望？通过密切跟踪哪些信息发生了更改，谁在何时更改了它。

最重要的是，您了解您的基础架构备份需求，然后为您的业务制定正确的定制备份和恢复战略。