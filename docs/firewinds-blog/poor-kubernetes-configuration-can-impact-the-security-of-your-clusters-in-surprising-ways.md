# 糟糕的 Kubernetes 配置会以令人惊讶的方式影响集群的安全性

> 原文：<https://www.fairwinds.com/blog/poor-kubernetes-configuration-can-impact-the-security-of-your-clusters-in-surprising-ways>

 在 Kubernetes 的世界里，错误的配置经常发生。这是一个大问题，因为不正确的配置会影响容器安全性、效率和可靠性等重要因素。这三个高级构造与成功的 Kubernetes 部署有着千丝万缕的联系——值得注意的是，它们也是受错误配置影响的三个主要方面。当围绕安全性、效率和可靠性的问题没有有意识地用最佳实践来解决时，Kubernetes 所有权的关键要素，如成本效率、用户体验和整体性能，都会受到严重影响。

好消息是，所有这三个重要领域都可以通过关注正确的配置来不断改进和管理。这是运行快乐和安全的 Kubernetes 集群的关键。

> **阅读我们最新的白皮书:** [**好的，坏的&配置不当的**](https://www.fairwinds.com/kubernetes-good-bad-misconfigured-white-paper)
> 
> *消除 Kubernetes 的错误配置，以降低风险并提高可靠性和云效率。*

## 配置情况

事实上，大多数组织还没有想出如何维护有效的 Kubernetes 配置。我们最近的 [Kubernetes 基准测试报告](https://www.fairwinds.com/kubernetes-config-benchmark-report) 中的数字告诉我们，只有 35%的企业使用活跃度和就绪性探测等最佳实践成功配置了工作负载。这些运行状况探测器是可靠工作负载的关键需求。没有它们，Kubernetes 就无法有效地自我修复或执行零停机部署。在没有这些探测器的情况下工作会产生各种各样的可靠性问题——这都是不良配置实践的结果。

Kubernetes 的核心特性之一是能够根据需求自动增加或减少资源。然而，在没有提示一个应用程序将使用多少 CPU 和内存的情况下，Kubernetes 被迫对如何扩展应用程序做出无知的猜测。设置计算资源的请求和限制在技术上是可选的(Kubernetes 会很乐意接受没有这些设置的工作负载)，但忽视它们会导致可靠性问题或令人痛苦的超支。

此外， 如果不能快速有效地解决，即使是很小的配置错误也会造成很大的安全漏洞。例如，以超出需要的安全特权运行的容器，如根级访问，已经成为一个常见的漏洞。在某些配置下，容器可能能够访问主机节点，从而允许它们访问甚至修改集群中的其他应用程序。因为这些配置不是默认设置的，所以它们必须由安全团队作为策略来建立。

最糟糕的是，随着时间的推移，配置问题变得越来越棘手，耗费大量时间并增加安全风险。起初，看似一些小问题很快变成了 Kubernetes 的全面混乱，表现为安全漏洞、可靠性问题和资金浪费。

## 寻找解决方案

配置验证，也称为基础架构代码(IaC)扫描，可以由运行一个或两个 Kubernetes 集群的小团队通过手动代码审查来完成。但是当组织变大时，问题就出现了，大量的开发团队被部署到多个集群。平台和安全领导者以及 DevOps 团队可能会很快失去对 Kubernetes 集群中发生的事情的可见性和控制。这一现实表明，需要自动化和策略来加强一致性，并在整个企业中提供适当的防护。

如何最小化错误配置在某种程度上取决于组织的规模。大型企业可能会发现很难手动检查每个安全配置来评估风险，而较小的企业可能不会。 由于 Kubernetes 中的默认设置往往是自然开放且不安全的，因此在所有安全问题(以及它们如何影响整体风险承受能力)都很容易理解之前，避免使用这些默认设置非常重要。

在针对 Kubernetes 软件的各种客观的、共识驱动的安全指南(如 CIS 基准)中，可以找到用于强化环境的有用指导和有用框架。当这些最佳实践与集成到 CI/CD 管道中的基于风险的策略相结合时，容器安全性会大大提高。提交 或者不满足最低安全需求的构建可以被停止。

## 依靠洞察力

在运行时保护 Kubernetes 集群和工作负载，以确保安全性、效率和可靠性，需要使用深度防御的多管齐下的方法。该解决方案的一部分来自于找到一个 SaaS 治理服务所有权平台，如[fair winds Insights](https://www.fairwinds.com/insights)，能够建立有效的护栏治理，简化开发和运营，并提供更好(和更安全)的用户体验。

> 使用 Fairwinds Insights，在一个平台中免费获得 Kubernetes 安全性、成本分配和规避、合规性和护栏。

由于错误配置经常发生，只有遵循行业最佳实践，才能构建稳定、可靠和安全的集群。这种级别的治理只能通过值得信赖的合作伙伴来实现，他们精通统一团队、简化复杂性的流程，并利用 Kubernetes 的专业知识来节省时间、降低风险和自信地进行配置。

[![Use Fairwinds Insights for Free Security, Cost and Developer Enablement In One](img/7c86296320eb01b215d8e2755e9c5b9d.png)](https://cta-redirect.hubspot.com/cta/redirect/2184645/34aa4987-a1f9-438a-a145-d7d82d5c479a)