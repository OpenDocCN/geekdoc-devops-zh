# 以正确的方式扩展基础架构的重要性

> 原文：<https://www.fairwinds.com/blog/the-importance-of-scaling-infrastructure-the-right-way>

大多数企业都会随着时间的推移而发展壮大，你今天的企业不会是六个月后的企业，更不用说一年、三年或五年后的企业了。增长和业务浪潮(高潮和低潮)是以正确的方式扩展云基础架构非常重要的主要原因。目标是确保您的基础架构在任何特定时刻都能满足您的需求。借助当今的技术，这种灵活性是可以内置的。

## 缩放类型

在我们深入探讨之前，我们应该澄清一些关于可用扩展类型的事情，水平的和垂直的。  **水平扩展** 是指您将硬件实例添加到您的资源池中，以便增加您可以同时运行的应用实例的数量。  **垂直扩展** 意味着您要为自己管理的现有硬件实例增加更多的能力(CPU 和 RAM)。在第一种情况下，你有更多的实例；在第二种情况下，你有更大的实例。

许多公司在日常运营中没有区分这两者，也没有为此进行优化。

## 许多公司规模不正确，或者至少效率低下

例如，一个应用程序可能是单线程和 CPU 受限的(意味着它不能利用一个以上的 CPU 内核)，并且需要相当大的内存量。要扩展这个应用程序，您需要运行它的更多实例。您可以在每个硬件实例上运行更多的应用程序实例(垂直扩展)，也可以继续在每台机器上运行一个应用程序实例，但产生更多的硬件实例来支持它们(水平扩展)。如果您选择水平伸缩(我看到的最常见的方法)，那么您就会遇到实例大小的问题。由于云提供商提供了一套实例大小，您必须选择足够大的大小来提供您的应用程序所需的 RAM 量，这意味着您经常会有 CPU 资源处于闲置状态。结果，你最终购买了昂贵的硬件，但只使用了其中的一半(或不到一半)。这种类型的扩展也很慢，因为它需要时间来启动每个实例，这妨碍了您对流量激增的响应能力。

假设您创建了一堆实例，因为您决定运行一个超级碗广告或推广一个重要的黑色星期五活动。在那一天，您最终会花费大量资金来支持您的基础架构需求，而在其他大多数日子里，这些资源可能会闲置或利用不足。如果你在黑色星期五的基础设施和你在三月的一个普通星期二的基础设施是一样的，你会有不同的性能和浪费金钱。

## 进入集装箱化

幸运的是，还有另一种方法。容器化使您能够管理由受控数量的集群主机节点组成的更集中的基础架构，而不是拥有一个使用了一半的大型实例的基础架构。在[Kubernetes](https://kubernetes.io/)世界中，你有一个公共的节点资源池——CPU 和 RAM。因为在这种情况下，您的应用程序是容器化的，不像以前那样受制于硬件限制，所以您可以将它的多个副本放入集群。您可以在同一台机器上堆叠一堆应用程序副本，而不是为每个应用程序实例安装一台新机器。Kubernetes 甚至允许您指定非常小的 CPU 和 RAM 度量单位(例如千分之一的 CPU 或 KiB 的 RAM)，因此您可以准确地指定您的应用程序需要什么。这种资源分配的精确程度是非常强大的。

## 这对您的企业意味着什么？

随着您的业务增长，您的基础架构和应用程序也可以随之增长。随着您的成长，您可以发展容器的限制和要求，而不必重新部署您的基础设施。换句话说，随着应用程序的不断变化，您可以更加灵活地决定基础架构如何响应。你也会浪费更少的钱，因为你会充分利用你所有的资源。

想象一下，一家公司运行数百个实例来满足需求。因为他们的应用程序没有容器化，不能以集群/并行方式运行，所以他们每个月要在基础架构上花费数千美元。通过将他们的应用程序容器化，并迁移到像 Kubernetes 这样的容器平台，他们可以显著减少物理实例的数量，并完全使用资源池，从而实现巨大的节约。

## 一个集中且灵活的基础设施意味着一个更加可移植的集群

最后，一个集中、灵活的基础设施也是一个更易移植的集群。在 2017 年 2 月 28 日  [AWS 停机期间](https://aws.amazon.com/message/41926/)，整个 us-east-1 区域数据中心失去了产生新实例的能力。对于依赖水平实例扩展的公司来说，这是极其困难的。此外，同一次停电导致了几个关键  [AWS](https://aws.amazon.com/) 服务的级联故障。想象一下，如果该地区没有恢复，而上面假设的公司不得不将其基础架构转移到不同的地区或云提供商，以快速恢复在线，这将是一项艰巨的任务。适当的资源管理和扩展云基础设施将使更集中的实例集群具有更快、更简单的可移植性。

这是一个重要的话题。如果你想了解更多，这里有一个有用的演示:  [“你曾经想知道的关于资源调度的一切……差不多”](https://speakerdeck.com/thockin/everything-you-ever-wanted-to-know-about-resource-scheduling-dot-dot-dot-almost) (由蒂姆·霍金在谷歌创建)。

***下一个[第 2 部分-为什么自动化很重要，它如何节省时间！](http://blog.reactiveops.com/why-automated-infrastructure-is-key-and-how-it-saves-time)***