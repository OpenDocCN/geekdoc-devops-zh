# 使用 Ansible 在 AWS 上轻松加密根卷

> 原文：<https://www.fairwinds.com/blog/easily-encrypted-root-volumes-on-aws-with-ansible>

AWS 上的根卷是否需要加密是一个争论的话题。加密的 AMI 完全是为了保护静态数据。

## 静态加密针对三种情况提供保护:

1.  包含根卷的磁盘从 AWS 数据中心被盗
2.  亚马逊回收磁盘时没有正确销毁
3.  AWS 基础设施代码中的某种泄漏，允许另一个实体访问您的卷

这三种情况都不太可能发生，但(和生活中的大多数事情一样)没有任何保证。我们的一些客户并不保存需要加密的敏感信息。但是，其他受托管理此类数据并受法规约束的人要求加密。

一度，加密数据卷只是(很容易)可能的。许多人使用这些额外的卷来存储敏感信息，避免写入根卷。然而，在 2015 年末，AWS 宣布了加密的 EBS 引导卷——这是一个很好的功能，弥补了实例加密方面的差距。对于有法规遵从性要求的组织来说，加密 EBS 启动卷不仅仅是一项功能，而是一项必备功能。

## 创建加密的 EBS 卷简单明了:

1.  找一个你想作为基地的 AMI
2.  将 AMI 复制到您的 AWS 帐户，并选中  `Encrypted` 框
3.  使用新的加密 AMI 作为实例的引导卷

您可以从这个  [AWS 博客](https://aws.amazon.com/blogs/aws/new-encrypted-ebs-boot-volumes/)中找到如何创建加密 EBS 卷的命令行示例。

在 [Fairwinds](/) ，我们喜欢进一步自动化。由于我们使用了  [Ansible](https://www.ansible.com/) ，我们将创建加密 AMI 的角色放在一起。除了处理副本之外，这个角色还将帮助您找到一个用于加密 AMI 的基本 AMI。(你可以在我们的 Fairwinds GitHub 页面上找到这个角色。如果您正在进行根卷加密，我们希望这个角色将会证明是有用的。)

简而言之，对于那些有法规要求的人来说，加密是显而易见的。如果你能选中“所有数据都加密”框，许多问题就迎刃而解了。

对于那些持观望态度的人，我将提供这个经验法则:如果您加密您的数据卷，您也应该加密根卷。毕竟，为什么要在前门上三个插销，然后让后门开着呢？