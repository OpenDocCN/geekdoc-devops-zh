# AKS、EKS 和 GKE 的优势和劣势

> 原文：<https://www.fairwinds.com/blog/strengths-and-weaknesses-of-aks-eks-and-gke>

 在选择 AKS、EKS 或 GKE 这样的托管 Kubernetes 服务时，最好了解它们各自的优势和劣势。所有这些服务都解决了如何轻松部署 Kubernetes 的问题，但在如何正确配置集群或有效利用服务方面有所不同。通过了解这些优点和缺点，您可以为您的应用程序选择合适的服务，还可以节省学习多种服务及其具体细节的时间。

作为免责声明，如果有人问我用什么，我会反过来问你的应用程序在做什么，它依赖什么服务。Kubernetes 并不是您的应用程序唯一需要的东西，因此您需要考虑需求——例如安全性、额外的云服务和节点定制。在这篇博客中没有深入探讨，这里有一个高层次的总结。如果您确实想讨论您的具体应用，请随时[联系](https://www.fairwinds.com/contact-us)。

**TL；大卫:如果你是 Windows 或者。网店或者已经在用 Azure 如果你需要高水平的定制，EKS 是不错的选择；GKE 易于上手和使用。**

### **所有被管理的库伯内的优势**

*   选择阿克苏、EKS 或 GKE 可以让你不用担心维护 Kubernetes 州或其 API。每个托管服务从视图中抽象出控制平面。运营商只需担心选择合适的服务器类型来运行其工作负载。
*   每个托管的 Kubernetes 服务都完全支持其底层云提供商。这使得 Kubernetes 能够代表您创建云资源——比如负载平衡器或持久存储。虽然你可以从头开始运行 Kubernetes，但在 Azure/AWS/GCP 上运行同时与云服务无缝交互可能是一个挑战。
*   所有的提供者都支持私有节点和私有 API。从 Kubernetes 安全性的角度来看，这些产品非常相似。然而，有时容器工作负载需要许可才能与云提供商 API 进行交互。每个提供者都有自己的服务帐户和 IAM 层次结构。无论选择哪家提供商，您都需要了解其安全术语和最佳实践。

### **所有 Kubernetes 服务的弱点**

*   所有供应商都依赖上游 Kubernetes 的开发。Kubernetes 的发展速度越来越快。每个服务提供商必须跟上发展的步伐，特别是因为 Kubernetes 只是修补了最近的三个周期。如果你还在 1.15 版本，不要指望任何补丁支持。
*   对于每项服务，您都无法配置控制平面。这限制了操作员打开/关闭 Kubernetes API 功能的能力。例如，如果有您的 Kubernetes 版本支持的 alpha 特性或配置标志——它不能在托管服务提供商上启用。
*   对所有提供商来说，在集群内外自动扩展服务器都是一项挑战。每个服务都利用一个叫做[集群自动缩放器](https://github.com/kubernetes/autoscaler)的工具。虽然集群自动伸缩功能做得很好，但它的功能确实有限。了解这些限制并能够在您选择的云提供商上解释这些限制非常重要。例如，集群自动缩放不支持分区。如果节点池跨越多个可用性区域，这可能会导致节点不平衡。由于这一限制，您可能希望为每个可用性分区运行单个节点池或自动扩展组。
*   最后，虽然所有三个提供商都已被认证为 CNCF Kubernetes 一致性，但没有一个是直接从源代码运行的-它们是预打包的，并引入了额外的功能。这并不是一个真正的弱点，但是在比较托管服务和 Kubernetes 代码库时，您可能会遇到一些不一致的地方。

## **AK、EKS、GKE 的优势和劣势**

按字母顺序，这里是一个快速总结 AK，EKS 和 GKE。这不是一个详尽的列表，可以作为一些优势或劣势进行讨论，您可能会将其视为您的个人应用程序的优势。

### **AK 强项**

*   如果你是. NET 或者微软的店家，AKS 对 Windows 有一流的支持。
*   配置虚拟网络和子网很简单。
*   使用 az cli 提供强大的命令行支持。
*   集成日志和监控解决方案。
*   Azure Active Directory 集成用于集群身份验证。

### **AKS 弱点**

*   与 GKE 和 EKS 相比，AKS 相对较新。因此，许多功能仍处于测试阶段。
*   在 Fairwinds，我们支持将基础设施作为代码，大量使用 Terraform。Azure Terraform provider 并不完全支持所有的 Azure APIs，所以有一些问题。az 命令行工具可以用来补充 Terraform。
*   您对可以运行的底层操作系统的选择是有限的。唯一的选择就是 Linux (Ubuntu)和 Windows Server。虚拟机不直接支持定制，也无法提供云初始化或用户数据脚本。
*   部署群集时，您必须运行默认节点池，它必须始终存在，并且一旦部署，您就不能更改服务器类型。
*   对多节点池的支持是一项预览功能。
*   与 GKE 自动更新相比，节点更新不是自动的。
*   与 GKE 自动恢复相比，节点不会从 kubelet 故障中自动恢复。

### **EKS 的强项**

*   AWS 非常成熟，像 Terraform 这样的工具集成得很好。亚马逊已经发布并维护了一套非常健壮的 EKS Terraform 模块，具有许多特性。如果你只需要和 EKS 交互，有一个官方的命令行工具， [eksctl](https://eksctl.io/) 。
*   EKS 节点更加可定制。您可以使用自己的机器映像(ami)。这允许您定制您的操作系统，并根据您的具体需求配置服务器。您仍然可以选择使用预设的 AMI，但有时由于安全合规性规定，这些 AMI 不可行。
*   AWS 是使用最广泛的，并提供许多额外的云服务。大多数 Kubernetes 工具(DNS 管理、证书管理等。)完全支持 AWS 集成。AWS 上的 Kubernetes 被广泛记录，并提供了一个庞大的用户社区。

**EKS 的弱点**

*   虽然创建 EKS 集群很简单，但添加和自定义节点池可能会很复杂。
*   与 GKE 自动更新相比，节点更新不是自动的。
*   与 GKE 自动恢复相比，节点不会从 kubelet 故障中自动恢复。
*   基于实例类型和子网大小的 Pod 密度和 CNI 限制。

### **GKE 的强项**

*   GKE 让部署 Kubernetes 集群变得非常容易。命令行工具和 web 控制台都非常友好。
*   更新群集版本和节点池是一个简单的单击过程。也可以将版本设置为在可能的情况下自动更新。
*   节点池可以配置为自我修复，防止在底层 kubelet 出现问题时进行手动干预。
*   GKE·切里挑出 bug，CVE 修复到他们发布的 Kubernetes 版本中。这样做的缺点是，如果用户运行的是 GKE 版本的 1.15.9，并且他们想查看 Kubernetes 代码，他们不能完全确定代码没有被修改。

### **GKE 的弱点**

*   您不能自定义您的服务器配置。你必须使用他们提供的两种服务器类型之一:Container OS 或 Ubuntu。您不能选择版本或内核版本。如果你想在底层硬件上进行更深层次的定制，你不能用 GKE 来实现。
*   GKE 运行的托管集群插件(kube-dns、ip-masq-agent 等)对于最终用户来说并不是可配置的。它们不能被修改以使用节点选择器或容错。对这些插件所做的任何更改都将被还原。
*   虽然不是一个巨大的弱点，GKE 有区域集群的概念。默认情况下，群集的控制平面(主)和节点都在您创建群集时指定的单个计算区域中运行。创建集群后，这一点无法更改。如果您需要一个生产就绪的 GKE 集群，请确保创建一个区域集群。

## **Fairwinds + EKS、GKE 或 AKS**

利用托管的 Kubernetes 服务并不等同于有效地使用 Kubernetes。Fairwinds 帮助使用 AKS、EKS 或 GKE 的公司正确配置集群，并有效利用该服务。

> 使用 Fairwinds Insights，在一个平台中免费获得 Kubernetes 安全性、成本分配和规避、合规性和护栏。

了解更多关于 Fairwinds 对 AKS、EKS 或 GKE 的贡献。

[![Free Download: Kubernetes Best Practices Whitepaper](img/b53e4ee22b6ef19bc06a035649ea1dc6.png)](https://cta-redirect.hubspot.com/cta/redirect/2184645/4f92c7e1-1646-4985-9a0a-b1091903dddb)