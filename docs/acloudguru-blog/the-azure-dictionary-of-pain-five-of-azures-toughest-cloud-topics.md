# Azure 痛苦字典:Azure 最棘手的五个云话题

> 原文：<https://acloudguru.com/blog/engineering/the-azure-dictionary-of-pain-five-of-azures-toughest-cloud-topics>

立正！课程现在开始。请系好您的安全带，确保您的托盘桌直立并关闭。

[Azure 是增长最快的云平台之一](https://go.acloudguru.com/2020-state-of-cloud-learning-report)，[，尤其是当公司开始转向云计算战略](https://get.acloudguru.com/road-to-multicloud-report?cpn=7013u000000VDht)的时候。但是像 AWS(和 Google Cloud)一样，有几乎无穷无尽的个人服务伴随着它——和一整本字典来描述它们。除了知道它们实际上是如何工作的，你还必须首先知道它们的名称和用途。

在 ACG，我们希望教会世界如何使用云。这意味着首先要确保团队中的每个人都能“谈论云”——并了解在实施云工具时将面临的一些基本挑战。我们将帮助您和您的团队实现基准云流畅度。为了做到这一点，我们建立了一个云词典，收录了您将遇到的一些最具挑战性的主题。鉴于这里的难度，[我们决定将这个云词典命名为*痛苦*。](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht)

[![Cloud Dictionary](img/93ebf63b88ab7fbd48705a01952ba688.png)](https://get.acloudguru.com/cloud-dictionary-of-pain)

[**获取痛苦全云词典**](https://get.acloudguru.com/cloud-dictionary-of-pain)
*说云不一定要硬。在我们的[云指南](https://get.acloudguru.com/cloud-dictionary-of-pain)中，你会找到一些最痛苦的云概念的简明定义的完整列表。*

* * *

我们分析了我们平台上数千个测验问题的 270 万份回复，以确定一些最具挑战性的云基础架构主题。我们寻找学习者成功率低于 60%的问题，并根据这些问题中的主题，概述了十几个具有挑战性的主题，学习者有时可能难以解开——至少在一些特定的场景中。

今天，我们将讨论我们为 Azure 基础设施确定的五个最具挑战性的主题:Cosmos DB、流量管理器、Azure 函数、快照和虚拟专用网络。这个列表是我们在所有三个主要云平台上攻击的几十个术语和主题的子集:AWS、Microsoft Azure 和 Google Cloud。[你可以在痛苦的完整云词典](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht)中找到我们对亚马逊棘手话题的完整介绍。

所有这些都解决了，让我们开始吧！

[![Azure Cosmos DB Blog Header](img/de5ebaf74f953d44e49a3e18cc2cd61a.png)](https://acloudguru.com/course/azure-cosmos-db-deep-dive)

### **什么是 COSMOS DB？**

Cosmos DB 是一个试图同步全球数据而不是特定地区数据的系统。[这种全局同步对于需要高度响应、拥有大量不断变化的数据](https://acloudguru.com/blog/engineering/azure-cosmos-db-apis-use-cases-and-trade-offs)，并且始终可供用户使用的全局应用程序来说是非常重要的。脸书就是一个很好的例子——全世界的人都在使用它，并且不断地改变数据。应用程序基本上会认为 CosmosDB 在它们的区域内，而 Cosmos DB 处理跨所有区域的复制，以确保它是一个连续的全局数据库。Cosmos DB 自动对数据进行分区，以优化性能和存储容量。CosmosDB 也可以通过多个 API 访问，比如 Document DB(用于 SQL)、MongoDB(用于 NoSQL)、Graph API(用于 Gremlin)和 Tables API(用于键/值对)。

### **为什么很难？**

由于所有的复制都是跨地区进行的，所以质量肯定会有一些差异。选择一致性级别时，您是在性能和一致性之间进行选择。Cosmos DB 将这些一致性级别分为五类:

*   **STRONG** :在所有副本上提交并确认之后，在主 Cosmos DB 上提交并可见的保证写操作。强一致性是最容易预测和直观的。
*   **有界陈旧性**:最常选择的有界陈旧性，允许您计算陈旧文档可以如何使用。它决定了文档在需要更新之前可以落后多远。
*   **会话**:确保当前用户会话中的所有读/写操作一致。例如，在用户会话中，脸书将拥有特定于该用户的数据。
*   **一致前缀**:这确保了以相应写入的顺序读取更改。
*   **最终**:最宽松的一致性，立即对主节点提交和写入，同步处理副本事务，最终到达副本。

一个云专家学习者 47%的时间错过了与 NoSQL 和宇宙数据库相关的难题。

下一个！

### **AZURE DNS VS 流量经理？**

域名系统是互联网的电话簿，将一个名字(比如 acloud.guru)转换成一个 IP 地址。Azure 包含一个域名的 DNS 区域，该区域托管该域名的 IP。您将从为您提供一个域的唯一资源组构建一个 DNS 区域。您也可以创建一个专用 DNS 区域，尽管您必须通过命令行来设置。一个域的所有记录都在一个 DNS 区域中。

与此同时，Traffic manager 会找出如何智能地将某人路由到您的应用程序。Traffic Manager 确保不同地理区域的高可用性。如果您的解决方案中的某个区域离线，Traffic Manager 可以路由到在线区域。它看起来是这样的:

1.  用户加载解决方案(并进行 DNS 查找)
2.  Traffic Manager 会根据您的 Traffic Manager 服务配置响应一个 IP 地址
3.  用户然后导航到适当的解决方案。

### **为什么很难？**

Traffic Manager 和 Azure DNS 紧密合作，以确保您的用户能够访问您的应用并获得良好的体验。DNS 是包含来自域名的 IP 地址的电话簿，而 Traffic Manager 将从 IP 地址列表中选择正确的 IP 地址。在传统的云方式中，Traffic Manager 提供了大量的路由方法。这些是您将放入流量经理档案的多种类型:

*   **优先级**:确定主端点和备份端点的优先级。
*   **加权**:根据权重值分配流量，比如你想 20%去一个地区，20%去另一个地区。
*   **性能**:将流量发送到“最近”的端点，这对于设计全局的解决方案来说是极好的。
*   **地理:**根据客户端的地理位置路由流量。
*   **多值**:返回多个端点，由客户端决定使用哪个端点。
*   **子网**:基于请求者 IP 地址的路由。你必须实际拥有域名。

添加自定义域后，您必须完成自定义域的验证。你必须从管理你的域名的人那里添加一个文本记录，并上传它以确认你拥有它。您还可以配置一个 Vnet 来启用自动注册，指向一个私有的内部 DNS 区域。您可以为虚拟机使用专用 DNS 来连接命名的域，如 somethingsomething.internal。

*一个云专家学习者 49.7%的时间错过了与 DNS 相关的棘手问题。*

下一个！

[![azure](img/20e52cbdff6bb8fd41a2252ba8c67291.png)](https://acloudguru.com/course/serverless-computing-with-azure-functions)

### **什么是 AZURE 功能？**

Azure Functions 是微软 Azure 的无服务器计算产品，抽象出了对基础设施的所有依赖。[这是基于工作负载量的最灵活的扩展类型](https://acloudguru.com/blog/engineering/how-to-build-a-serverless-app-using-go-and-azure-functions)。无服务器编程模型基于触发器和绑定，专注于编写响应特定事件并返回函数需要返回的数据的代码。功能也有丰富的端到端开发经验。

最终 Azure 中有一个服务器在运行你的功能——你对此一无所知。你写了一些代码来响应一个事件，却永远看不到微软这边的服务器发生了什么。

函数提供了运行单个代码段来响应事件的能力，并且是按执行时间计费的，而不是按任何其他计费方法计费。因此，您可以在运行但不做任何事情的服务器上节省大量资金。

### **为什么很难？**

无服务器可能感觉与传统云计算有些正交。

尽管好处是巨大的(特别是从成本角度来看)，习惯于管理虚拟机来处理其应用程序的公司将不得不改变他们对其结构的思考方式。这也包括架构层面。以下是一些对理解函数至关重要的架构考虑因素:

*   **事件驱动**:根据需要执行代码以响应事件。服务器不会坐以待毙。
*   **反应式**:代码被应用于需要时发生的特定事件。它是响应性的、弹性的(如果失败，事件将被重新处理)、弹性的(随着事件的增加，它将扩大)和消息驱动的。
*   **多因素**:声明式和自动化部署(功能可以通过代码部署)，配置在环境中(不是配置文件)，并发是通过流程。

执行函数也有很多种方式:时间间隔、HTTP 请求、Blob 存储中的上传、来自 Azure 存储队列的消息、Cosmos DB 文档更改或接收新事件的事件中心。

一个云专家学习者 48%的时间错过了与无服务器操作相关的难题。

下一个！

### 什么是 AZURE 快照？

快照是被管理磁盘的时间点副本。您将为快照选取帐户类型(如在 HDD 和 SSD 之间选取),用于您希望与快照一起存储的任何被管理的磁盘。它们是您管理的磁盘的有效备份。您也可以根据另一个被管理磁盘的快照创建新的被管理磁盘。[您可以使用该快照进行故障排除，或者作为创建新虚拟机的主快照](https://acloudguru.com/blog/engineering/new-to-azure-and-experienced-with-net-try-these-5-azure-services)。

**为什么很难？**

有两种快照:完整快照和增量快照。前者就像它听起来的那样，是磁盘的完整时间点备份。但是如果你继续使用完整的快照，你将会很快耗尽你的存储空间。增量快照可能是备份，但从技术上讲，它们不是完整备份。

每个快照不一定是您的存储或磁盘的完整备份。相反，它存储来自上一个快照的增量更改，而前一个快照捕获来自前一个快照的更改。拍摄新快照时，您可以节省资金，因为您备份的是增量更改，而不是完整备份。

一个云专家学习者 50%的时间错过了与 Azure 磁盘存储和快照相关的棘手问题。

### **什么是 AZURE VPNS？**

虚拟专用网络通常被称为 Vnet，它使 Azure 虚拟机能够在内部网络和互联网上相互通信。就像虚拟机一样，它归你使用，但物理硬件被抽象出来了。您可以在每个虚拟网络中定义多个子网，从而隔离您的网络，为 SQL 数据库或虚拟机等资源分配 IP 空间

每个虚拟网络都有一个地址空间，您可以在多个子网之间分配。也许更重要的是，您可以在虚拟网络中将子网与互联网隔离开来。

Vnets 以及其中的 Azure 虚拟机的行为就像微软 Azure 云中的 Azure 虚拟机一样。您可以根据需要扩展或添加虚拟网络，并通过子网隔离其中的资源。您还可以对等 Vnets 以允许它们之间的路由，而 Azure 公共云本身提供高可用性。

有利的一面是，开始向云迁移的公司可以选择将一些资源与互联网隔离开来。虽然他们在迁移过程中可能实际上不需要 Vnet，但在尝试在内部(即您的法规遵从性团队)进行管理时，它会有所帮助。Vnets 允许您隔离需要从互联网中分离出来的信息，如受管制的数据。

### **为什么很难？**

数一数流程图上的箭头！很多事情正在进行，也有很多失败点，尤其是当你试图将数据与互联网隔离时。你最不想做的事情就是无意中增加你的表面积，让不好的事情发生。如果您正在开始云迁移，您会希望确保手头有一名网络专家，以确保一切顺利进行。

此外，Vnet 中的子网被限制在一个可用性区域内，而不是跨越多个可用性区域。因此，您必须以这样的方式配置您的系统，以确保您不会遇到一个子网需要与不同可用性区域中的另一个子网进行通信的情况。

一个云专家学习者 49.8%的时间错过了与虚拟网络和子网相关的棘手问题。

**我们希望**在看完这些例子后，你会体会到云有多危险。它有自己的自定义词典，以配合其庞大的城市产品环境。

我们可以理解云有多复杂，并希望我们能提供一些指导。话说回来，我们没有写下规则。(嗯，问题是我们写的——对此我们真的很抱歉。)

你可以在完整的疼痛字典中找到我们对 Azure 棘手话题的完整介绍。你也可以在我们的 AWS 和谷歌云疼痛字典中找到它们的对等词——以及是什么让 AWS 和 GCP 变得独特曲折。您还会发现我们完整的方法。

* * *

希望提升您的云计算职业生涯？从云专家的 Azure 学习路径开始，看看实践如何帮助你掌握现代技术技能。

[Azure 数据工程师认证路径](https://acloudguru.com/learning-paths/azure-data)

[Azure DevOps 认证路径](https://acloudguru.com/learning-paths/azure-devops)

[Azure 安全认证路径](https://acloudguru.com/learning-paths/azure-security)

[Azure 开发路径](https://acloudguru.com/learning-paths/azure-development)