# 云计算的成本

> 原文：<https://acloudguru.com/blog/engineering/the-true-cost-of-cloud-a-comparison-of-two-development-teams>

## 两个开发团队的一天

在过去的几个月里，我与许多人交谈过，他们对公共云服务的平均成本与传统内部基础架构的价格相比感到担忧。为了从讨论中提供一些见解，让我们跟踪一个企业中的两个开发团队，并比较他们如何构建类似的服务。

第一个团队将使用传统的内部基础设施部署他们的应用程序，而第二个团队将利用 AWS 上提供的一些[公共云服务。](https://acloudguru.com/blog/engineering/what-is-amazon-web-services-aws)

这两个团队被要求为一家全球企业公司开发一项新服务，该公司目前为全球数百万消费者提供服务。这项新服务需要满足以下基本要求:

1.  扩展以满足弹性需求的能力
2.  提供**弹性**以应对数据中心故障
3.  确保数据安全并受到保护
4.  为故障排除提供深度**调试**
5.  项目必须**快速交付**
6.  该服务的构建和维护成本低廉

就新服务而言，这似乎是一组相当标准的要求，本质上并不倾向于传统的内部基础架构而不是公共云。

* * *

## 1.扩展以满足客户需求

谈到可伸缩性，这种新服务需要伸缩以满足消费者的不同需求。我们不能建立一个可能会丢弃请求、耗费公司资金并导致声誉风险的服务。

**传统团队** 采用内部基础设施，这种架构方法要求计算能力的规模必须与您的峰值数据需求相匹配。对于具有可变工作负载的服务，这将在低利用率时为您留下大量额外且昂贵的计算容量。

这种方法很浪费，而且资本支出会侵蚀你的利润。此外，维护未充分利用的服务器群会带来沉重的运营成本。这是一项经常被忽视的成本，我怎么强调都不为过，为一项服务支持一个裸机服务器机架会浪费多少金钱和时间。

**云团队** 借助基于云的自动扩展解决方案，您的应用可以根据需求进行扩展。这意味着您只需为自己消耗的计算资源付费。

一个架构良好的基于云的应用程序能够实现无缝和自动的扩展。开发团队定义了自动扩展组，根据高 CPU 利用率或每秒的大量请求来加速应用程序的更多实例，您可以根据自己的意愿定制这些规则。

* * *

## 2.应对失败的弹性

当谈到弹性时，在位于相同的四面墙内的基础设施上托管服务不是一个选项。如果您的应用程序驻留在单个数据中心内——那么当(*而不是*)出现故障时，您就会被塞满。

**传统团队** 为了满足本地解决方案的基本弹性标准，该团队至少需要两台服务器来实现本地弹性，并在第二个数据中心进行复制以实现地理冗余。

开发团队将需要确定一个负载平衡解决方案，在饱和或故障时自动重定向站点之间的流量，并确保镜像站点持续与整个堆栈同步。

**云团队** 在全球 50 个地区中的每一个地区，AWS 都提供多个*可用区域*。每个区域由一个或多个容错数据中心组成，具有自动故障转移功能，可以将 AWS 服务无缝转移到区域内的其他区域。

[将您的*基础设施定义为 CloudFormation*](https://acloudguru.com/blog/engineering/you-should-always-use-dynamodb-global-tables-now) 模板中的代码，可确保您的基础设施资源在自动扩展事件期间跨区域保持一致，并且 AWS 负载平衡器服务只需最少的工作即可设置和管理流量。

* * *

## 3.保护您的数据

安全性是在一个组织内开发的任何系统的基本要求。你真的不想成为处理安全漏洞后果的不幸公司之一。

**传统团队** 传统团队将承担持续的成本，以确保运行其服务的裸机服务器是安全的。这意味着投资于一个团队，该团队试图从各种独特的数据源监控、识别和修补跨多个供应商解决方案的安全威胁。

**云团队** 利用公共云并不能免除你的安全。云团队仍然必须保持警惕，但不必担心修补底层基础设施。AWS 积极致力于打击零日漏洞——最近与 Spectre 和 Meltdown 合作。

利用 AWS 的身份管理和加密安全服务，云团队可以专注于他们的应用程序，而不是无差别的安全管理。使用 CloudTrail 对 AWS 服务的 API 调用进行全面审计，这提供了透明的监控。

* * *

## 4.监控和记录

正在部署的每个基础架构和应用服务都需要使用聚合的实时数据进行密切监控。团队应该能够访问仪表板，在超过阈值时提供警报，并能够利用日志进行事件关联以进行故障排除。

**传统团队** 对于传统基础设施，您必须跨不同的供应商和雪花解决方案建立监控和警报解决方案。设置这个需要大量的时间——努力并把它做好是非常困难的。

对于许多内部部署的应用程序，您可能会发现自己在搜索存储在服务器文件系统上的日志文件，以便了解应用程序崩溃的原因。因为团队需要 ssh 到服务器，导航到日志文件的唯一目录，然后浏览可能有数百个文件，所以会浪费很多时间。对于一个部署在 60 台服务器上的应用程序来说，我已经这样做了——我可以告诉你，这不是一个好的解决方案。

**云团队** Cloud watch 和 CloudTrail 等原生 AWS 服务让监控云应用变得轻而易举。不需要太多的设置，开发团队就可以为每个部署的服务监控各种不同的度量——这使得调试问题的过程成为一个绝对的梦想。

对于传统的基础设施，团队需要构建他们自己的解决方案，并配置他们的 REST API 或服务来将日志文件推送到聚合器。获得这种“开箱即用”是生产力的疯狂提高。

* * *

## 5.加快发展

在当今的商业环境中，加快上市时间的能力越来越重要。延迟实施造成的机会成本损失会对底线利润产生重大影响。

**传统团队** 对于大多数组织来说，购买、配置和部署新项目所需的硬件需要很长时间，而提前采购额外的容量会因预测失误而导致大量浪费。

最有可能的是，传统的开发团队将花费几个月的时间跨越无数的竖井和交付来创建服务。项目的每一步都需要对数据库、系统、安全和网络管理员提出不同的工作要求。

**云团队** 说到及时开发新功能，拥有一套庞大的生产就绪服务供您使用是开发人员的天堂。每个 AWS 服务通常都有很好的文档记录，并且可以通过您选择的语言以编程方式访问。

有了新的云架构，如无服务器，开发团队可以以最小的摩擦构建和部署可扩展的解决方案。例如，在短短几天内，我最近构建了一个 Imgur 的[无服务器克隆，它具有图像识别功能，这是一个内置的生产就绪监控/日志记录解决方案，并且具有难以置信的弹性。](https://read.acloud.guru/building-an-imgur-clone-part-2-image-rekognition-and-a-dynamodb-backend-abc9af300123)

[![With cloud services, teams can build and deploy a scalable solution with minimal friction.](img/00a200ef94e73ac226fbcce3787657d6.png)](https://acloudguru.com/blog/engineering/building-an-imgur-clone-part-2-image-rekognition-and-a-dynamodb-backend)

How to build a serverless clone of Imgur

如果我必须自己设计弹性和可伸缩性，我可以向你保证，我仍然会开发这个项目——最终产品不会像现在这样好。

使用无服务器架构，我试验并交付了该解决方案，所用的时间比大多数公司配置硬件所用的时间都要少。我只是简单地用 Lambda 函数将一系列 AWS 服务粘在一起——还有哒哒！我专注于开发解决方案，而 AWS 为我处理无差别的可伸缩性和弹性。

* * *

## **云计算的成本裁决**

谈到可扩展性，云团队是需求驱动弹性的明显赢家，因此只需为他们需要的计算能力付费。团队不再需要专门的资源来维护和修补底层物理基础架构。

云还为开发团队提供了一个弹性架构，该架构具有多个可用性区域、内置于每个服务中的安全特性、用于日志记录和监控的一致工具、按需付费服务以及用于加速交付的低成本实验。

通常情况下，云的绝对成本会低于购买、支持、维护和设计应用运行所需的内部基础架构的成本——毫不费力。

通过利用云，我们可以以所需的最少前期资本投资加快移动速度。总的来说，在开发和部署您的业务服务时，云的经济性将积极地为您服务。

总会有一些小众的例子，云的成本比传统基础设施贵得惊人，也有一些情况，你最终会忘记你已经让一些昂贵得难以置信的测试箱运行了一个周末。

[在决定推出自己的基础设施并减少对亚马逊网络服务的依赖后，Dropbox 通过建立自己的技术基础设施在两年内节省了近 7500 万美元……—www.geekwire.com](https://www.geekwire.com/2018/dropbox-saved-almost-75-million-two-years-building-tech-infrastructure/)

然而，这些案例仍然很少。更不用说 Dropbox 最初是在 AWS 上开始的——只有在它们达到临界质量后，它们才决定迁移出这个平台。即使是现在，他们也在向云中溢出，并在 AWS 和 GCP 上保留了 40%的基础架构。

将云服务与基于传统基础设施的单一“成本”指标进行比较的想法非常天真，它明显忽视了云为开发团队和您的业务提供的一些主要优势。

在极少数情况下，当云服务的绝对成本高于更传统的基础设施产品时，它仍然代表着开发人员生产力、速度和创新方面的更好价值。

* * *

## 获得更好职业所需的技能。

掌握现代技术技能，获得认证，提升您的职业生涯。无论您是新手还是经验丰富的专业人士，您都可以通过实践来学习，并在 ACG 的帮助下推进您的云计算职业生涯。

* * *

[![Cloud services represents a better value in terms of developer productivity, speed, and innovation.](img/c5619769cf07acfc18312726b71be9c8.png)](https://read.acloud.guru/customers-dont-give-a-shit-about-your-devops-pipeline-51a2342cc0f5)

Customers don’t give a shit about your data centers

*我非常想听听您自己的经验以及与云开发的真实成本相关的反馈！请在下面落个评论，在 Twitter 上在*[***@****Elliot _ F*](https://twitter.com/Elliot_F)*，或者直接在*[*LinkedIn*](https://www.linkedin.com/in/elliotforbes/)*上与我联系。*