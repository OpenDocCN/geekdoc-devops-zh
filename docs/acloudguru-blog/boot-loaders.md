# 引导加载程序

> 原文：<https://acloudguru.com/blog/engineering/boot-loaders>

当你打开电脑系统时会发生什么？在最基本的层面上，我们知道计算机的组件通电，操作系统“启动”,因此用户有一种与系统交互的方式——无论是玩游戏、运行网络服务器、设置深度应用程序还是其他方式。但是计算机怎么知道启动什么呢？如果一个处理器从系统内存中提取数据，那么它如何与一台刚刚启动的、内存中没有任何进程的计算机一起工作呢？为此，计算机使用了一个*引导加载程序*，这是一个旨在为系统做准备的少量代码，然后将其传递给更复杂的内核，内核反过来管理操作系统本身。引导加载程序位于硬盘驱动器(永久存储器)内的预定义位置；代码就是从这个位置被拉入随机存取存储器供处理器运行的。从这里开始，引导加载程序准备系统环境，然后要么将控制权交给内核，要么交给*引导扇区*。从内核，操作系统运行；从引导扇区开始，新的引导加载程序为引导过程的下一阶段准备系统，无论这是另一个引导扇区还是链中运行的最后一个过程。让引导加载程序被另一个引导进程接管一次或多次被称为*链式加载*。某些引导加载程序，尤其是 Linux 发行版使用的那些，通常能够进行*双*或*多引导*。当一台计算机有多个操作系统要引导时，会使用这种方法。这些引导启动程序通常具有简单的终端风格的界面，从中可以选择操作系统。

## 主引导记录

最初，*主引导分区*组织模式是引导到 Linux(和其他)系统的唯一选择。这是计算机分区开始处的引导区，包含用于引导到操作系统的可执行代码。主引导记录最多可以支持四个分区，引导磁盘的大小最多为 2tb *。当使用替代的 *GUID 分区表*时，这些限制被消除。

## GUID 分区表

GUID 分区表是一个 UEFI 分区组织架构，可以与 MBR 分区共存。与 MBR 不同，它不包含分区数量或大小限制。正因为如此，一些 BIOS 系统使用 GPT，而更大的技术社区倾向于远离 MBR。许多与 Linux 兼容的引导加载程序都支持 MBR 和 GPT，包括常用的引导加载程序 *GNU GRUB* 。

## GNU GRUB

Linux 用户和发行版中常见的引导加载程序是 GRUB，由 GNU 项目创建，GRUB 2 是 GRUB 的最新版本，GRUB 1 被认为是遗留版本。GRUB 1 已经不再处于开发阶段，正在被逐步淘汰。GRUB 在两步加载过程中使用链加载。步骤 1 位于 MBR 中，加载第一部分 *core.img* 并包含引导到 GRUB 所需的内容。阶段 1.5 完成图像加载。最后，第二阶段从 */boot* 菜单引导 GRUB，并在终端界面中提示用户选择操作系统。一旦被选中，GRUB 就把系统交给内核。顾名思义，GRUB 具有多重引导特性，符合自由软件基金会的多重引导规范。这允许用户从任意数量的兼容操作系统引导，并使系统之间的切换相当容易。GRUB 还为用户提供了一个类似 BASH 的接口来与子系统交互，允许用户对 GRUB 的使用和配置有更多的控制。总的来说，引导加载程序可以简单到立即将控制权传递给内核，也可以复杂到让它启动某些操作系统；例如，GRUB 作为引导加载程序特别复杂，而 gummiboot 等其他软件则侧重于无需配置和“正常工作”Linux 的引导加载程序并没有停止使用 GRUB，因为许多系统仍然使用 LILO(Linux 加载程序)或其他程序。有了多种引导加载程序可供选择，甚至有可能自己制作引导加载程序，对于那些希望从头到脚配置系统的人来说，甚至只是探索各种可能性的人来说，都有多种选择。 **请注意，这并不妨碍系统访问容量超过 2tb 的硬盘。只有引导分区不能超过 2TB。*