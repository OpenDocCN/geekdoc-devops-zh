# AWS 云壳服务:它是什么，我们为什么喜欢它

> 原文：<https://acloudguru.com/blog/engineering/what-you-need-to-know-about-the-new-aws-cloudshell-service>

因此，一种使用命令行的新方式可能不是 [re:Invent 2020](https://acloudguru.com/blog/tag/reinvent2020) 的震撼业界的声明之一，但我的天啊，这是期待已久的——而且非常受欢迎。

在 re:Invent 2020 的最后一周，亚马逊发布了新的 AWS CloudShell，这是一个基于浏览器的 Shell，使通过命令行管理 AWS 环境变得绝对轻松。你为什么要在乎？请继续阅读！

## 为什么花哨的命令行很酷？

命令行具有 AWS 管理控制台无法比拟的灵活性。需要做重复性的改变？为报告提取信息？只需要做一个快速的配置更改？CLI 通常是实现这一目标的最强大的工具。

但是我们有其他选择。Instance Connect、Cloud9 和 jump 服务器帮助我们在任何需要的地方管理我们的系统。但是所有这些都需要运行 EC2 实例，这会产生成本。如果您使用的是联合身份，那么如果没有个人 API 密匙，那就更令人头疼了。

您可以在所有管理员之间使用共享的 IAM 角色或 API 密钥。但是你也失去了将变化归因于个人的能力的完整性。(此外，你的 CISO 的耳朵刚刚开始燃烧，甚至从阅读的想法。)

AWS CloudShell 的不同之处在于，你可以在任何有浏览器的地方使用它。它是免费的，不需要安装。最精彩的部分是什么？它会根据您的 IAM 身份自动承担角色，即使是联合身份也是如此。不要拿着证件瞎折腾！你甚至有一个 1GB 的硬盘用于永久存储。

## 什么是 AWS CloudShell？有什么好处？

好吧，这其中很多东西你可以在新闻网站或 AWS 自己的博客上读到。让我们深入探讨四个有趣的技术细节。

### 1.区域服务

尽管 AWS CloudShell 是控制台的核心，但它在很大程度上是一项区域性服务。出版时，它在全球五个地区提供:

*   美国东部(俄亥俄州)
*   美国东部(北弗吉尼亚)
*   美国西部(俄勒冈州)
*   亚太地区(东京)
*   欧洲(爱尔兰)

幸运的是，您仍然可以在世界上的任何地区使用 AWS CLI，就像在本地机器上一样。因此，即使您的所有 AWS 资源都位于澳大利亚的墨尔本，您仍然可以轻松地使用美国地区的 CloudShell 来管理您的资源。

需要注意的一点是，您的持久主驱动器存储是本地的，而不是全局的，这很像您对可能由 EBS 支持的服务的期望。持久存储也不是永久的，在一个地区不使用 CloudShell 120 天后，存储就会被清除。使用这些方便的管理脚本需要注意的一些事情！

### 2.更多存储库

运行在 Amazon Linux 2 上，CloudShell 上可用的应用程序的初始范围可能有点乏味。但是就像任何其他 Amazon Linux 2 机器一样，您可以向 yum 配置添加额外的存储库。

例如，您可以使用一些非常简单的命令来添加 Enterprise Linux 的扩展包:

`sudo yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm`

`sudo yum updateinfo`

这为您的 CloudShell 提供了如此多的灵活性选项。事实上，如果你愿意，你甚至可以为 Azure 或 GCP 安装 CLI 工具！

### 3.文件之外的持久性

虽然 CloudShell 确实有一个持久化的主目录，但也就只有这个了。应用程序不会。但是等等，有解决的办法！如果主目录持续存在，为什么不在那里安装我们需要的应用程序呢？

您还可以在启动 shell 时使用主目录中的``.bashrc``文件来修改本地的`$PATH`属性，这样就可以轻松地无缝使用这些应用程序。您甚至可以更进一步，使用``.bashrc``来广泛定制您的 CloudShell！

好吧，但是如果我们需要超过 1GB 的永久存储呢？好吧，你使用 CloudShell 的时间可能超过了它的设计时间。但是如果需要，您也可以将文件存储在 S3 桶中，并在启动时将它们下载到另一个本地目录下的 CloudShell 中。现在，你会产生数据传输费用，但它确实给你一些选择。

### 4.AWS 云壳 VS 谷歌云壳 VS. Azure 云壳

你是对的。亚马逊不仅不是这场游戏的先行者，他们还相对较晚。其他云提供商已经在这个功能上击败了他们，有[谷歌云壳](https://acloudguru.com/hands-on-labs/build-a-custom-network-in-google-cloud-shell)(2015 年 10 月发布)，和 [Azure 云壳](https://azure.microsoft.com/en-au/features/cloud-shell/)(2017 年 5 月)。

事实上，这些平台的用户可能会发现访问 AWS CloudShell 非常熟悉。。。

这实际上是一件非常积极的事情，给云提供商之间带来了一些一致性的感觉。谷歌最初开发云外壳是有原因的——也是为什么微软最终会抄袭它们。这是一个非常多才多艺的功能，我怀疑这将是 re:Invent 2020 上宣布的最广泛使用的功能之一。

**有趣的事实:**这是我能想到的第一个在三大主要云提供商中同名的服务。

* * *

## 什么壳？

无论您是新手还是经验丰富的云专家，都可以通过云专家提升您的 AWS 技能。[今天就免费开始](https://acloudguru.com/pricing)。