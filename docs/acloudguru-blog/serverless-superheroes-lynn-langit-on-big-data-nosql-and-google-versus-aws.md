# 大数据、NoSQL、谷歌与 AWS 

> 原文：<https://acloudguru.com/blog/engineering/serverless-superheroes-lynn-langit-on-big-data-nosql-and-google-versus-aws>

## Lynn Langit 主演的无服务器超级英雄系列

欢迎来到“无服务器超级英雄”！ *在这个空间里，我与工具制造商、创新者和开发人员聊天，他们正在探索“无服务器”云应用的新世界。*

*对于今天的版本，我与大数据和云架构师 Lynn Langit 进行了交谈。Lynn 是 Google Cloud 开发者专家，一位* [*AWS 社区英雄*](https://aws.amazon.com/heroes/) *，前微软员工。为了清晰起见，以下采访经过了编辑和压缩。*

**了解[大数据基础知识](https://acloudguru.com/course/big-data-fundamentals)以及它的必要性和工作原理！**

[**Forrest Brazeal**](https://twitter.com/forrestbrazeal)**:我认识的大多数人只专注一朵云，而你似乎什么都擅长！你在世界各地说话，并与 AWS、Azure 和谷歌云平台的客户合作。“无服务器”这个词对您和您的客户意味着什么？**

Lynn Langit :常见的定义是“最终客户不对服务器负责。”实际上，我已经进一步提升了这个定义。我一直和一位名叫[安东·德尔辛克](https://twitter.com/antondelsink)的朋友密切合作，他负责 Azure Stack。

在最近的一次旅行中，我们一起开车环游了挪威，并得出了无服务器的定义:“一种抽象出容器管理的服务。”所以我们的新行话是“无集装箱”。

你让我大吃一惊！那么容器的未来是什么样的呢？你不认为顾客会想把他们自己的集装箱带到 FaaS 站台吗？

我有一个合理的回答:我不在乎。对我来说，容器是新的虚拟机。所有这些关于容器的狂热，尤其是容器管理系统——看，必须有人来管理这些东西。我想付钱给云提供商来做这件事，这样我就不用这么做了。

实际上，我还没有为客户建立很多纯无服务器的解决方案。有些人仍然更喜欢容器而不是无服务器，他们的理由通常是可移植性和控制。如果您对这些选项没有迫切的需求，并且您可以从无服务器服务中获得价值，那么尽一切办法去做吧。

你是云端数据方面的专家，我一直认为“无服务器”的概念在数据层变得很不可靠。对我来说，“无服务器”架构的部分要点是，你只需为你使用的容量付费，但许多数据服务都是按小时(RDS)或按供应容量(DynamoDB)收费的，所以即使你的服务没有流量，你也要付费。你认为像 AWS Athena 这样的按查询付费的服务是未来吗？

我认为谷歌在这方面处于领先地位。多年来，他们一直提供开箱即用的无服务器或接近无服务器的数据解决方案。我是说，BigQuery 从 2011 年就出来了。这是一个 NoOps 基于文件的 SQL 类型的解决方案。甚至 Cloud Spanner——您设置了一个实例，但是您必须转动的唯一旋钮是为了利用率。

一旦你达到一定的数量，他们主张获得更多的节点，但仅此而已。非常有趣的是，随着谷歌试图向 BigQuery 添加企业数据仓库功能，如粒度安全和流媒体，AWS 如此迅速地构建了 Athena，并添加了与 Glue 等服务的集成。

所以我的预测是，随着谷歌扩大其数据组合——正如他们在添加 BigTable 时所做的那样——它将推动 AWS 等其他云提供商提供自动调谐，减少 RDS、RedShift 和 EMR 的旋钮。我认为你会很快看到这一点，因为谷歌真的在推动他们，我们已经看到 AWS 对他们云优势的任何竞争威胁都会做出非常迅速的反应。

没错，这可能是他们在 Aurora 上投入这么多资金作为专有 RDBMS 的原因。你提到了雅典娜，我也玩过一点。如果您没有以最佳方式使用该服务，以特定的柱状方式构建您的数据，该服务很快就会变得昂贵。这是否限制了服务的有用性，还是会改变人们访问无服务器数据的方式？

嗯，Athena 最适合某种类型的数据。实际上，是对日志文件的特殊查询。如果你想要高音量，你必须有某种压缩。

但是就像 Docker 和 Lambda 对于应用程序开发人员来说很难理解一样——这就是为什么我们有像 [ServerlessConf](http://serverlessconf.io/) 这样的事件——我认为对于数据专业人员来说，让他们理解“无服务器”或服务器精简版实现更难。因为这是数据库管理员管理集群的全部历史。所以新的范式很可怕，我认为 DBA 倾向于固执己见，拒绝接受。

我实际上认为这已经损害了 BigQuery 的采用，这就是为什么它自 2011 年以来一直存在，直到 2016 年亚马逊才感到有必要推出 Athena。你我都知道他们本可以更快地创造它，但是市场不在那里。

我想很多人(包括一些固执的数据库管理员)倾向于将“无服务器”与“NoSQL”联系在一起。事实上，我认识一些人，他们认为关系数据库正在半途而废，比如需要事务一致性的金融应用程序。你认为这是一个公平的假设吗？为什么或为什么不？

过去几年的 NoSQL 趋势真的让我很感兴趣。毕竟，当我在微软工作时，我写过关于 SQL Server 的书。我用 OLTP 和 OLAP 做了很多传统的数据仓库。当我在 2011 年离开微软独立时，有很多关于 Hadoop 和 NoSQL 的宣传。我经常发现的是，它并没有实现。

我的大部分咨询业务都围绕着云中的数据。人们说“你能帮助我们从 NoSQL 数据库 X 中获得商业价值吗？”对于许多中小型企业来说，我不能。他们没有员工，没有意愿，没有必要去改变。

今天，如果一个客户说他们想要实施他们自己的 NoSQL 堆栈，我真的要向他们挑战。我的意思是，有时他们有很强的卡珊德拉天赋或什么的，但这是一个非常罕见的例外。我认为 NoSQL 被过分宣传了，没有什么商业价值。这给我敲响了警钟，我已经恢复了许多失败的 NoSQL 实现，将它们转换成 RDS。

**为了澄清，当你谈到 NoSQL 发出危险信号时，你是指人们管理自己的部署，而不是依赖云提供商的托管服务？**

部分地。老实说，我认为很多独立的 NoSQL 产品将会消失。要么他们会被亚马逊、微软或谷歌收购，要么他们将无法竞争。空间会非常小。我认为 Redis 会生存下来，因为他们的实现有一些真正独特的方面。卡珊德拉，不确定。

我是说，我经历了一段痴迷于 NoSQL 的时期。我做了演示——“SQL 开发人员的 NoSQL”——我真的认为这是未来。但是我得出的结论是，就像容器一样，NoSQL 实现也是一种干扰。跳过容器—转到函数。跳过 Cassandra——使用 DynamoDB 或托管关系服务。

因此，听起来你并没有放弃无服务器系统的关系数据库。

一点也不。如果客户确实有 NoSQL 的使用案例，我会推荐云提供商的 NoSQL。但我记得有一次我是 AWS 物联网解决方案的架构师，其中甚至参考架构都使用了 DynamoDB。

但是他们遇到了各种各样的问题，有一天我决定换到 Aurora。吓坏了所有人——他们说，“你在干什么？”我说，“我们在做什么？我们正在运送一种产品。”我们做到了。

**假设我想要构建一个应用程序，该应用程序需要管理实时用户状态和交易数据，并在后端提供数据仓库和大数据处理。我不想自己管理任何数据库服务器。如果你可以神奇地挥动魔杖，将各种云提供商的最佳服务整合在一起，你会如何设计数据层？**

让我们从对象存储开始。虽然 AWS 对 S3 生命周期管理流程做了很大的改进，但我喜欢谷歌的一点是，他们为谷歌云存储提供了统一的 API。AWS Glacier 的概念包括在内，因此您可以将近线、冷线、多区域和单区域存储打包在一起，并且它的呈现非常简单。我不喜欢的是它缺少了 S3 的一些特性——日志、版本、指标。因此，这有点像是在谷歌云存储的数据湖和 S3 之间的一场较量。

下一件事:流媒体摄取。这是我现在正在做大量工作的一个领域。现存的系统似乎都运行在卡夫卡身上。我个人喜欢 kine sis——快速、容易、简单——谷歌云发布/订阅也不错。但是卡夫卡和《云管道》在特征上是有区别的。我希望云供应商能有更多卡夫卡的特色——我正在寻找今年的 re:Invent！

对于 ETL，一些有趣的事情正在发生。我还不太喜欢 AWS 胶水。实际上，我喜欢由 Matillion 公司生产的 ETL 产品。你可以在 AWS 市场上找到他们的 AMI。这有点像浏览器中的 SQL Server SSIS，所以您有转换的可视化表示，您的老派 DBA 会说“哦，这看起来像是我的 ETL 工具！”

简而言之，如果你是 ETL 或 ELT，我更喜欢工具而不是 API。亚马逊真的在那里大放异彩。我不太喜欢他们的原生数据管道，但他们因为像 Matillion 这样的供应商而闪耀。另一方面，Google 要求你用他们的 API 编写所有代码，通常是用 Java。

这是一个很大的负面消息:谷歌是一个以开发者为中心的云。你先编码，然后工具再来，如果有的话。尽管他们的云非常强大，非常可扩展，但这并不是范例。而 AWS 是 DevOps 云，我认为这是他们成功的驱动因素之一，尤其是在数据方面，因为网络管理员和数据库管理员有更多的参考资料。

在关系层，我真的很喜欢 Aurora 和其他 RDS 实现。我对 Spanner 感兴趣，但这又是一个谷歌拿走他们自己的产品并发布它们的例子，而不理解世界上其他人并不在谷歌的范围内工作。

比如 Spanner 不支持外键，然后没有模式导入和转换工具。谁会采用现有的企业应用程序并更改关系模式呢？只是没有发生。谷歌甚至没有解决这个问题的事实让我很难过，因为事实是 Spanner 是一项非常漂亮的技术。

尽管谷歌在数据领域提供了更多，但这种缺乏完整产品的情况使我倾向于关注亚马逊。虽然我确实在关注谷歌在做什么，因为谷歌真正在做的是迫使亚马逊做出更好的产品。对客户有利，对谷歌不利。

最后，在大数据处理领域，这是 EMR 和 Cloud Dataproc 之间的真正较量。谷歌的虚拟机已经预热，速度非常快，几秒钟就能启动。我做了很多原型制作，所以这对我很好。如果你在处理突发工作负载，你可以使用谷歌版的 Spot preemptable。我希望 AWS 能更新 EMR，让它更现代一点——我也在 re:Invent 寻找它。老实说，现在我倾向于只使用[数据块](https://databricks.com/)。

**您认为无服务器还可以通过哪些方式转变大数据，反之亦然？**

ETL 仍然是数据世界中的大问题。我希望看到更多包含机器学习和统计的 ETL 工具。"看起来此数据需要 x。" "此架构是 A，此架构是 b。看起来您需要 ABC 的转换。"将常规计算，尤其是机器学习应用于 ETL 问题将是不可思议的。看看胶水流出后会发生什么会很有趣。

另一件事是机器学习的民主化。我总是在困难的时候坦白——这是我品牌的一部分。六个多月来，我一直致力于理解如何构建 TensorFlow 和 MXNet 模型，以提供实际的商业价值。到目前为止，我还不能做到这一点。和我交谈过的大多数人，如果他们是诚实的，也不能做到这一点。大多数人可以完成 Hello World 级别的示例，但是在示例和实际构建业务模型之间缺少一个转换层。

我真的对这个领域很着迷，因为在机器学习领域有很棒的无服务器服务，Rekognition API，Polly 和 Lex，而且还会有更多。但是，我们如何才能让 API 和工具足够成熟，让一个懂统计的业务人员能够制作一个模型呢？我认为这里有很多 API、工具和可视化工作要做。

**你认为我们在云领域如何帮助新的学习者更容易使用无服务器？**

学习无服务器的一个方法是构建一个物联网用例。我真的很喜欢用 Alexa 来构建——我和孩子们、学校老师，甚至脾气暴躁的开发人员都做过。我也喜欢简单的啤酒服务。把人们放在一个有趣的、低成本的环境中，他们会说“哦，我真的能做到！”我用回声点是因为它们能解除人们的武装。

我们不能忽视无服务器的一个方面:这项技术带来了巨大的变化。很吓人；这是破坏性的。不承认这一点只会阻碍机会。

期待下一个版本的无服务器超级英雄。