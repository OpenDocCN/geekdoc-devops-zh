# 谷歌云最棘手的五个话题——痛苦的云词典

> 原文：<https://acloudguru.com/blog/engineering/the-cloud-dictionary-of-pain-five-of-google-clouds-toughest-topics>

你好！欢迎来到云 101。请坐好，检查一下你的安全带是否系好了。

谷歌云与 Azure 和 AWS 并列，是云计算的顶级平台之一。这是理所当然的——谷歌一开始就建立了许多现代互联网！它甚至在其基础设施中融入了自己的定制技术，如张量处理单元(或 TPU)。因此，虽然云之间可能存在差异，如 AWS 和 Azure，但 GCP 有许多独特的东西，可能会使它成为您工作的一个伟大选择。

但是，就像所有的云一样，有很多事情在进行，有很多服务可供选择。这些单独的服务都有特定的术语。有些很直观，有些可能有点混乱。但是除了知道它们是如何工作的，你首先必须知道它们叫什么。

在 ACG，我们希望教会世界如何使用云。这意味着首先要确保团队中的每个人都能“谈论云”——并了解在实施云工具时将面临的一些基本挑战。我们将帮助您和您的团队实现基准云流畅度。为了做到这一点，我们建立了一个云词典，收录了您将遇到的一些最具挑战性的主题。鉴于这里的困难，我们决定将它命名为疼痛的[云字典*。*](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht)

* * *

**[获取痛苦的云词典](https://get.acloudguru.com/cloud-dictionary-of-pain)**

说云不一定很难。我们分析了数以百万计的回复，找出了最容易让人犯错的概念。抓住这个云指南，获取一些最令人头疼的云术语的简明定义。

* * *

我们分析了我们平台上数千个测验问题的 270 万份回复，以确定一些最具挑战性的云基础架构主题。我们寻找学习者成功率低于 60%的问题，并根据这些问题中的主题，概述了十几个具有挑战性的主题，学习者有时可能难以解开——至少在一些特定的场景中。

今天，我们将讨论云身份和访问管理、Google Cloud Run 和云功能、实例组、快照以及 VPC 网络和子网。这个列表是我们在所有三个主要云平台上攻击的几十个术语和主题的子集:AWS、Microsoft Azure 和 Google Cloud。你可以在痛苦的完整云词典中找到我们对[谷歌云棘手话题的完整演练。](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht)

所有这些都解决了，让我们开始吧！

什么是 IAM？

[![WFH Security](img/330ebea2da731262c053584b3c3c8bff.png)](https://acloudguru.com/course/google-cloud-identity-and-access-management-iam-deep-dive)

### 身份和访问管理(IAM)是您云服务的第一道防线。[基本上每个运行云操作的人都会把安全放在第一位](https://acloudguru.com/course/google-cloud-network-management-gcp-network-engineer-track-part-2)——你也应该把它放在第一位。Google 通过 Cloud IAM 和 Cloud Identity 管理权限和身份以及访问管理。

Cloud IAM 是针对用户和服务的统一资源访问管理系统。身份可以有多种形式，比如谷歌账户、非托管账户、服务账户以及这些项目的集合——比如谷歌群组和 G-Suite 域名。

IAM 有三个关键要素。

**策略**:一组规则，控制谁可以使用特定的资源完成一项或多项任务。我们可以决定谁可以在哪些资源上做什么。

*   **角色**:分配给身份或成员的权限集合。

*   **资源**:编造，嗯，你的资源。它可以是您的项目、文件夹、云服务或这些服务的一部分，如实例或存储桶。

*   谷歌将云身份称为一个漂亮的字母汤首字母缩写词，被称为“身份即服务”(或 IDaaS)。云身份始于带有独立管理门户的 G-Suite，但现在与 Google Cloud 集成。它的一个主要好处是它可以安全地允许组织外的人访问组织内的特定资源。它还支持单点登录(SSO)。

为什么我很硬？

### 大量的抽象！云身份为一个或多个谷歌云项目创建了谷歌所谓的“文件夹”。您可能为您的开发团队和现场团队准备了一个文件夹。您可以将策略应用到您的文件夹，其中这些文件夹中项目内的所有资源都从这些策略中继承权限。最重要的是，在管理安全性方面，IAM 可能很快成为您的一个失败点。

您的 IAM 策略的范围代表了可能会发生坏事的很大一部分。您可能错误地配置了授予第三方的资源权限，或者将策略设置得过于宽泛。或者你可能会完全丢失密码。设置具体、可靠的 IAM 策略是保护您的云操作免受违规和不良行为者影响的最佳方式之一。

*一名云专家学员有 50.5%的时间错过了与身份和访问管理相关的棘手问题。*

想学习或提升你的 IAM 技能吗？ACG 提供云课程和动手实验室，帮助你在谷歌云平台上深入探索身份和访问管理。

* * *

**谷歌云功能 VS 云运行**

* * *

[![Google Cloud Run brings containers and serverless together](img/21fe0a87822cd00806ed4727696b8e73.png)](https://acloudguru.com/course/google-cloud-run-deep-dive)

### App Engine 并不是谷歌唯一的无服务器产品。谷歌还有另外三个:云功能，云运行，和用于 Anthos 的云运行。云运行对事件驱动的代码进行操作。除了 App Engine，还得有什么东西来触发它们。你可以将云功能视为各种服务之间的粘合剂，无论它们是在谷歌云上还是在第三方上。它可以自动扩展，而且成本极低——谷歌会向你收取最接近 100 毫秒的执行时间费用。

你可以使用 Cloud Run 来运行容器化的应用，比如 Google Kubernetes 引擎中的那些应用。云运行还可以按需扩展，适合持续集成/持续交付。与 App Engine 不同，use 可以使用任何语言、库或二进制文件，甚至是完全自定义的东西。还有针对 Anthos 的 Cloud Run，它支持混合的多云应用程序。Anthos 的云运行在 Google Kubernetes 引擎上。您可以使用自定义域、集成日志记录和监控服务。

**为什么很难？**

### Google Cloud 有很多无服务器服务！而且每一种都最适合不同的场景(包括我们之前回顾过的 App Engine)。让我们快速回顾一下:

**APP ENGINE** : HTTP 应用，比如现代 web 应用，托管前端、后端，或者两者都托管。

*   **云函数**:事件驱动代码，像第三方 app 和 API 集成，比如 Twilio 和 Stripe。它还可以与物联网产品配合使用，进行实时处理、数据收集和处理。并且它集成了 Google Cloud 中的大量服务，使其能够很好地进行实时处理。

*   **云运行**:基于容器的运营，包括成熟的技术栈。除了常规的强大网站之外，它对公司内部的应用程序也很有用。例如，您还可以使用它来创建由云调度程序任务每月创建的发票。

*   **针对 ANTHOS 的云运行**:适用于企业级 CI/CD 管道，因此您可以持续构建新内容。它适合集成内部服务，在最接近客户的地方(或“在边缘”)执行您的应用程序。

*   您的操作可能在一个、多个或一个都没有的情况下效果最佳。因此，在选择是否采用无服务器模式时，你必须确定最佳方案。

一个云专家学习者 48%的时间错过了与无服务器操作相关的难题。

**想学习或提升您的云跑步技能吗？查看云专家的许多课程和动手实验，包括 Google 完全管理的无服务器平台【Cloud Run 的课程和实验。**

* * *

什么是 GOOLE 实例组？

* * *

[![gcp courses](img/bb6d1597a3a2c87f06fe4af5aac0d621.png)](https://acloudguru.com/course/deploying-resources-to-gcp-with-terraform)

### 一旦你开始建立几十个，或者几百个谷歌计算引擎实例，事情可能会变得有点失控。您可以通过将实例分组来规避这里的复杂性——您可以尝试一次对一堆实例进行更改。Google 提供了两种类型的实例化组。

**UNMANAGED GROUPS** :具有不同配置的实例集合，您可以使用这些实例对现有配置应用负载平衡。

*   **管理组**:可以作为一个单元管理的相同实例的集合。如果您需要一次对它们全部进行更改，那么将它作为一个实例组来运行会更有意义。如果存在健康问题，托管实例组将自动重新创建该实例。

*   **为什么很难？**

### 两者各有利弊。如果您想要管理组的好处，您必须确保所有的实例都是相同的。您可能会遇到许多运行多个相同实例的场景！当您想要处理实例的自动伸缩和健康检查时，这使它变得友好和方便。

但是您可能会经常遇到使用非托管实例组的情况。它们不是统一的，所以你不会得到管理组的一些特性。如果运行非托管实例组，则不会获得自动伸缩或更新支持。但是您仍然可以启用一些批处理过程，所以您仍然需要对它们进行分组。

一个云专家学习者在 46.5%的时间里错过了与实例组相关的棘手问题。

快照

![](img/844459d998b89fe1cb52ba4e3662be77.png)

## **什么是谷歌快照？**

### 一种主要的备份方法，在这种方法中，计算引擎拍摄实例或连接的磁盘的快照，从而创建该磁盘的备份。您可以在任何灾难恢复情况下拍摄该快照，并创建新的实例或磁盘。您可以在实例运行时创建一个 [Google 快照](https://acloudguru.com/hands-on-labs/working-with-snapshots-on-google-compute-engine)。您可以在完全不同的区域中创建恢复的快照或实例，并且可以从引导磁盘或连接的磁盘创建快照。

**为什么很难？**

### 快照作为增量备份运行，可以为您节省大量资金。快照不会创建磁盘的新备份。相反，它是一个增量备份:第二个快照复制第一个快照的更改，第三个快照复制第二个快照的更改，依此类推。你通常想尽可能减少活动。

您可以在实例运行时创建快照，但您需要确保磁盘是一致的，并且在快照过程中不会发生太多变化。您可能想要暂停写入数据的操作或完全卸载磁盘。您还可能希望在没有数据更改日志或应用程序没有日志时安排快照。

一个云专家学习者有 50%的时间错过了与快照相关的棘手问题。

什么是谷歌 VPC 网络？

[![gcp](img/4fb47631ea336a117ffe63acc2ae466d.png)](https://acloudguru.com/course/google-cloud-network-management-gcp-network-engineer-track-part-2)

### GCP VPC(据说速度快五倍)是一个虚拟化网络，为 GCP 资源提供 ipv4 连接，如基础设施即服务和谷歌 Kubernetes 引擎。它是所有其他网络功能的核心基础组件。VPC 创建虚拟化的全球网络实例，以消耗所有 GCP 位置的资源。这是一个在 Google Cloud 上实现的软件定义的私有网络——这意味着没有路由器、交换机、服务器，也不会被纠缠在一起的电缆绊倒。

这允许您快速定制和扩展您的服务，并且该网络内资源之间的所有通信都不会暴露给公共互联网。[VPC 依靠谷歌全球网络进行连接](https://acloudguru.com/blog/engineering/extend-your-network-to-google-cloud-using-cloud-vpn)，该网络被划分为 GCP 地区——或位于不同地理位置的数据中心。

谷歌还在 VPC 提供高级和标准网络层。GCP 还要求在特定区域(称为子网)分配 IP 范围。区域之间也可以通过允许这些网络之间通信的路由相互通话。谷歌云根据可用性区域分配所有这些基础设施。一个 Google 项目可以包含一个或多个 VPC 网络，在每个区域内创建配置。

在 VPC 中，您可以通过在一个区域内创建子网来消耗所有区域的资源。子网使用 Google 全球网络，在一个区域内构建子网。我们使用 VPC 将子网分配给一个、多个或所有区域。每个 IP 范围为我们在这些数据中心的基础设施提供 IP 连接。与其他云提供商不同，子网可以跨越一个区域内的多个可用性区域。

**为什么很难？**

### 虽然 VPC 存在于项目中，但是项目分隔了用户——而 VPC 分隔了系统。您可以使用共享的 VPC，它允许您将多个项目连接到一个 VPC 网络，使它们可以相互通信。

假设您在同一个项目中有多个 GCE 实例，但是跨越了许多 VPC。如果没有 VPC 网络对等，一个 VPC 中的资源无法与另一个 VPC 中的资源通信。但是，一个 VPC 内的资源可以通过多个区域内的专用网络进行通信。网络也有两层:高级和标准。

以下是一些不同之处:

**PREMIUM-TIER DATA** :通过谷歌的网络，用户的流量在最近的位置进入谷歌的网络，在全球边缘退出。这有时被称为“冷土豆”流量。

*   **标准层流量:**在您部署 GCP 资源的地区，通过对等网络、ISP 网络或中转网络通过谷歌的网络。这有时被称为“烫手山芋”流量。

*   *一名云专家学习者 42.2%的时间错过了与 GCP VPCs 相关的棘手问题。*

**我们希望**在看完这些例子后，你会体会到云有多危险。它有自己的自定义词典，以配合其庞大的城市产品环境。

我们可以理解云有多复杂，并希望我们能提供一些指导。话说回来，我们没有写下规则。(嗯，问题是我们写的——对此我们真的很抱歉。)

你可以在痛苦的完整云词典中找到我们对谷歌棘手话题[的完整浏览。你也可以在我们的 AWS 和 Azure 痛苦字典中找到它们的对等词——以及是什么让 AWS 和 Azure 变得独特曲折。您还会发现我们完整的方法。](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht)

You can find our full walkthrough to Google’s thorny topics [in the full Cloud Dictionary of Pain](https://get.acloudguru.com/cloud-dictionary-of-pain?cpn=7013u000000VDht). You can also find their equivalents—and what makes AWS and Azure uniquely tortuous—in our AWS and Azure Dictionary of Pain. You will also find our full methodology.