# 云迁移基础知识:数据、安全性、成本和培训

> 原文：<https://acloudguru.com/blog/business/the-fundamentals-of-cloud-migration>

**在您开始云迁移之旅时？专注于建立五个基础——培训、连接、安全、监控和成本管理——可以帮助您克服减缓和破坏变革的障碍。**

在我多年的 IT 咨询和服务工作中，以及最近在 AWS 的工作中，我看到了一个阻碍变革的共同惯性——FUD。恐惧，不确定，怀疑。

FUD 是人类的谬误；一个无法在这样的论文中解决的问题。但我会提供一些可能有助于减少惰性的知识，这样你就可以花更少的精力去证明为什么不能改变，而花更多的精力去建设——从而改变。

在这个博客的上下文中，改变指的是迁移到云。为什么我会交替使用“迁移到云”和“改变”这两个词？因为，就像一个强制函数，迁移到云会给你的组织带来一些属性的改变。必须的。

如果我听起来固执己见，那么我就是。这种观点源于看到太多的组织抵制这种变化，并且悲惨地未能获得云的好处。

还有，不要太纠结于“迁移”这个词。这不一定意味着完全依赖您钟爱的内部 It 基础架构。您可以放弃多少依赖取决于您迁移到云的动机是什么。

对于读者来说，在进入改变的步骤之前，有一个澄清:**没有“容易”的按钮来迁移到云；任何云。您将生产工作负载迁移到云并不是因为这很容易做到，而是因为这是正确的做法**。

### 动机

如果你刚从漫长的低温睡眠中醒来，我来告诉你:在云上经营企业已经超越了“概念验证”阶段。每一个可以想象的垂直领域都有数以千计的组织在云上运营业务。

对于一些人来说，这可能仍然不足以成为迁移到云的理由。对于其他人来说，他们真的不知道如何在云上运营，或者如何组织自己以从这种变化中获得最佳收益。无论你的情况如何，**我建议进行尽职调查，以确定你在云上的商业动机是什么。做这个练习不应该花费你很多钱。**

这种尽职调查，如果做得正确，将形成强大的基本面，将向前支付。在许多情况下，这些动机应该直接来自你的组织目标或商业战略。

我不认为有一个绝对的框架或问卷来帮助确定你的动机。然而，有一条你需要遵守的规则——**不要确定一项技术是否符合你的动机**。你的动机应该是技术不可知论者，只关注你希望你的企业实现什么。不是如何。

问这样的问题:“我们是否希望在更短的时间内接触到更多的客户”，“我们是否希望更快地为我们的服务或产品添加功能”，“我们是否希望降低运营成本”，“我们是否希望提高运营的弹性”，等等。根据业务单位或地理位置，或者您的组织可能会被内部分割，您很可能会根据每个分割的重要性得到不同的响应。

在你领导的最高层，这些答案将需要叠加，以产生与组织的业务目标一致的最终动机排名。如果您还没有猜到，那么与您的业务和 it 领导保持一致是至关重要的。在这个阶段，我怎么强调团结全村的重要性都不为过。它可以帮助你避免一系列的问题，比如“大停滞”，“零钱袋”，最重要的是，沮丧的灵魂。

![](img/0029c82ffa20d3d87234d0eabf3a99d6.png)

如果你在尽职调查中没有偏见，但仍然没有发现任何动机，那么退出()。求你了。不要让自己陷入“嘿，让我们去云吧，因为其他人都是云”的困境。

## 试运行您的云迁移基础

*你会发现下面的技术细节是在 AWS 上索引的，我所熟悉的技术。其他云提供商可能也有自己的同等服务。*

需要明确的是，这并不是云是否能为您的企业服务的试点。如果你过了激励阶段，它会的。我称之为试点，部分原因是我不知道更好的措辞，部分原因是我建议不要进行全面的项目，除非你已经建立了某些基础:培训、连接、安全、监控和成本管理。不管你的动机如何，这些基本原则都是有效的。

![](img/1a33e445b9c8fac8ceb01b323f3d8341.png)

### 云流畅度培训

**训练:**还记得 FUD 吗？许多组织面临 FUD 逆风，因为他们没有花时间培训员工和领导者。可以说，这个基本原则是最重要的，也是经常被忽视的。我写了另一篇关于如何[为每个人建立云流畅度的文章](https://acloudguru.com/blog/business/how-to-build-a-cloud-fluency-program-for-everyone)。事实是，云计算改变了你的构建方式。这是因为像 AWS 这样的云提供商在建立弹性、冗余、弹性、安全性和全球影响力方面投入了如此多的资本，以至于这些已经成为桌面上的赌注。因此，基于 AWS 构建的客户期望这些原语是默认的，并且不再束缚创新。

如果你认为云只是托管在其他地方的服务器，那么你需要在这个基础上努力。ACG、Linux 学院和您的云提供商(例如， [AWS 培训](https://www.aws.training/))将提供培训课程和认证。有意识地建立一个培训计划，购买培训时间，给通过认证考试的员工报销费用——不要吝啬。

### 云数据迁移

**连接:**你需要连接到云端。您将在内部 IT 基础架构和云之间使用的连接类型会随着时间的推移而变化。与云的连接通常取决于以下因素:1)您将在云上运行的工作负载(即应用程序和数据)的类型，2)您需要的最小数据传输率/吞吐量(也取决于工作负载或使用情形)，3)用户或客户的地理分布，4)现有的网络协议、网络设备及其部署，以及 5)数据传输位置的容差(即通过互联网还是仅通过云提供商的管道)。

培训您的网络工程团队连接到云是您应该尽早进行的投资。你*会有*的员工会得出结论，拥抱云=他们的出路。尽早培训他们有助于消除他们的恐惧，让他们认识到云是一种机遇，而不是威胁。

此外，可编程网络的概念、网络控制平面和数据平面的分离在云上得到了进一步发展。请记住，网络是基础结构，如果处理得当，它可以协调您的内部 IT 与云资源的存在。投资建设和运营网络的人员非常重要。

### 云迁移安全性

安全:如果你在经营一家企业，你需要认真对待安全问题。当您查看云安全基础知识时，可以通过**操作、预防、检测**和**响应**的镜头轻松查看。云的好处是您不需要担心云的安全性，即物理安全性、基础架构安全性、主机操作系统和虚拟化。AWS 分享了他们所谓的[共享责任模型](https://aws.amazon.com/compliance/shared-responsibility-model/)，在该模型中，客户负责“云中”的安全。客户在云中的安全责任根据他们选择使用的 AWS 服务而有所不同。

*云给了我们大量的创新和功能，但是在实施过程中经常被遗忘的一件事是[云安全基础培训](https://acloudguru.com/course/cloud-security-fundamentals)。参加我们的课程，该课程旨在向您介绍许多云概念，以及如何通过使用可用的工具来保护这些概念。*

此外，云提供商都有一个访问管理工具。比如客户用来设置权限的 [AWS 身份和访问管理(IAM)](https://aws.amazon.com/iam/features/?nc=sn&loc=2) 服务。通常，您已经有了一个本地身份存储(如 Microsoft Active Directory ),您希望通过身份联合扩展该存储以供云使用。所有云提供商都已经建立了连接(或“信任”)您的内部身份存储到您的云资源的设计模式。这些将形成操作和预防的基本要素。

请注意，帐户的概念在云世界中非常普遍。在 AWS 中，帐户是一个信封，一切都在其中发生。AWS 开发了一套最佳实践(推荐)护栏，供客户在出售账户时使用。这些最佳实践被打包在一个名为 [AWS 控制塔](https://aws.amazon.com/controltower/features/)的服务中。控制塔让你出售帐户，同时符合这些护栏，因为你选择。

这是一个好主意，审查这些护栏，并建立您的帐户销售工作流程的权利，从一开始就去。从最低权限开始，随着增长按需添加。这些护栏构成了预防和检测的基础。这时，也回顾一下 [AWS 组织](https://aws.amazon.com/organizations/features/)。顾名思义，该服务允许您组织多个组织单位，在组织单位级别应用策略，将帐户作为成员附加到 Amazon GuardDuty 以进行持续监控，并创建关注点分离(开发关注点、测试关注点、安全/洁净室关注点等)。)

您还需要能够响应安全事件。安全不是你在飞行时建造的飞机。您需要使用 runbooks、IAM 和 [AWS Security Hub](https://aws.amazon.com/security-hub/features/) 预先构建在安全环境中执行取证的能力。

最后一件事，**无论你在这个基本支柱内做什么，请自动化。当谈到安全时，人类可能有最好的意图，但人类没有机制。自动化有机制。自动化可以支持规模化。自动化可以信任但要验证**。当您编码时，安全性(以及扩展的遵从性)是最好的。安全设计(SbD)是您的好朋友。AWS 对 SbD 有一个[定义的姿态](https://aws.amazon.com/compliance/security-by-design/)。遵循 SbD，1)您定义“安全”对您来说是什么样子，2)您使用 Infra-as-code(如 Cloudformation 或 Terraform)来编纂这些标准，3)您通过仅允许使用精选服务(通过使用类似 [AWS 服务目录](https://aws.amazon.com/servicecatalog/features/)的东西)来部署这些代码，从而强化您的基础设施、帐户和系统，以及 4)持续监控您部署的环境相对于您的安全基准的偏差(如使用 [AWS 配置](https://acloudguru.com/hands-on-labs/auditing-resource-compliance-with-aws-config))。

祝你手动操作好运。

### 云监控

**监控:**监控会影响你抢先解决问题的速度(奇特的行话:MTTR——平均解决时间)。在您过渡到 DevOps(简单地说，在构建者和支持者之间的公平所有权)之前，您可能会有一个单独的 NOC 和 SOC 团队。传统上，这些团队坐在开发团队之外烟雾缭绕的密室中，只有在半夜出现问题或者地板上有披萨时，才会相互“交谈”。如果你不改变这种方法，你会阻碍创新，过一段时间就会停止扩展。但最终那是你的特权。然而，如果您使用我前面提到的变更的强制功能开始向 DevOps 过渡，那么监控应该和开发一样有趣。

监控覆盖了一些云区域。监控与您可能在云中使用的许多服务集成在一起(对于 Amazon CloudWatch，[它集成了近 99 个服务](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/aws-services-cloudwatch-metrics.html))。在开发基础设施的过程中，你应该考虑基础设施、安全和[成本管理](https://acloudguru.com/course/cost-control-on-gcp)监控。首次设置基础设施监控时，您可以选择默认的云提供商指标。在撰写本文时，AWS 内有大约 296 个默认的 CloudWatch 指标，涵盖弹性负载平衡器、EC2、弹性块存储、S3 和更多服务。在云迁移的早期，这些指标应该足以让您起步。我在上面提到了安全监控。至于 CloudWatch 中的成本管理监控，您可以按服务查看估计费用，但仅此还不够。接下来我将详述成本监控。

请注意，使用 CloudWatch，您将能够实现跨帐户、跨区域的监控，这使您能够创建单一监控平台，而无需切换帐户(*AWS 中的区域是他们在世界各地群集数据中心的物理位置。区域有助于创建蜂窝基础设施，并具有内置冗余来克服故障。地域是一个自己的话题，也许是为了后面的*。CloudWatch 还让您能够使用规则基于警报自动响应事件。这种能力可以显著降低您在生产环境中的操作复杂性。

### 云迁移成本管理

**成本管理:** [监控和控制云资源的成本必须是您迁移到云时要做的前两三件事](https://acloudguru.com/blog/engineering/the-true-cost-of-cloud-a-comparison-of-two-development-teams)。因此，通过使采购对每个人都平等，构建云环境变得很容易——点击在线协议。本节不涉及您可能与云提供商签订的企业协议以及您可能从该协议中获得的好处，但要知道每个提供商都有一个企业协议。

我将把重点放在你需要做的成本管理上，不管你达成了什么样的协议。成本管理可以从成本控制、成本分析和报告的角度来看。如果你在 AWS 上，注册使用 AWS 组织。这是一项免费服务，不仅能为您提供上述多账户安全和治理的诸多好处，还能让您注册合并计费。

从成本控制的角度来看，使用 [AWS 预算](https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/budgets-managing-costs.html)。预算允许您按帐户(或大约 28 项服务)设置成本预算，以便在每月计费周期内费用达到设定的阈值时通知您。您还可以根据设置的使用类型来设置使用预算——在 EC2、S3 和 DynamoDB 中大约有 24 种。创建成本或用量预算时，您可以设置活动(称为预算活动)，以便在超出预算阈值时采取自动措施。尽管此时您可以采取的措施有限，但它允许您[将服务控制策略(scp)附加到特定的 ou 或帐户](https://acloudguru.com/blog/engineering/ssh-and-scp-howto-tips-tricks)，例如，通过拒绝将新对象放入 S3 存储桶的权限，这是一种阻止成本流失的强大方法。

使用 AWS 成本浏览器(CE)从成本分析角度分析成本和使用情况。CE 可以让您了解预订情况(例如基于 EC2、RDS、Redshift、Elasticsearch 等计算资源)和合理调整建议。它还使您能够查看已购买预订的使用情况，以及您的购买预订覆盖了您的实际合格使用量。建议是前瞻性的，而利用率和覆盖率是事后的。AWS 中的成本分配标签(CAT)是我推荐使用的一个附加特性，实际上通过使用 infra-as-code 实现了自动化。cat 只是一个键值对，由您定义，被视为 AWS 资源的元数据。这些标签通过发出的使用情况进行传播，并最终出现在您的成本和使用情况分析(成本浏览器、预算、成本和使用情况报告)中，以便您能够以易于理解的方式查看和分析成本和使用情况。如果你喜欢的话，CATs 也大大降低了退款的复杂性。您还应该关注使用反应性标记治理，来标记那些不知何故错过了初始主动标记的资源。AWS 配置、标签编辑器和[资源标签 API](https://docs.aws.amazon.com/resourcegroupstagging/latest/APIReference/Welcome.html) 可用于反应式标签。

最后，AWS 成本和使用情况报告(CUR)让您能够以最全面的形式查看使用情况和数据。帮我一个忙，请不要试图在月底使用 CUR csv 请与 Amazon Athena 集成，以便能够查询数据。

还有其他资源可以帮助您进行间接成本管理，如 [AWS 可信顾问](https://aws.amazon.com/premiumsupport/technology/trusted-advisor/best-practice-checklist/)，它可以提供关于成本优化机会的报告。还有各种其他方法来阻止 AWS 资源的浪费并防止您过度配置，但这些方法主要与特定工作负载相关，可能不是基本的试点特定项目:预订和节省计划是获得特定类型服务的按需费率更大折扣的好方法。EC2 Spot 实例经常被忽略，但是如果您能够容忍错误，那么 Spot 实例可以为您节省高达 90%的按需费率。如果你相信科学中的艺术性，那么看看 AWS 成本异常检测，它通过你创建的情境化监视器使用 ML 检测异常，并警告你不要受到标签电击。S3 分析并可以使用生命周期策略将不常用的对象移动到较冷的存储中，从而降低内容的拥有成本。

#### **结论**

如果迁移到云看起来工作量太大，那么如果你做得对，确实如此。此外，在您的迁移之路上，您将到达里程碑，这些里程碑将为您的学习带来独特的挑战和机遇。这篇博客关注第一个里程碑——开始。随着您达到进一步的里程碑，将需要做出新的技术和业务决策。