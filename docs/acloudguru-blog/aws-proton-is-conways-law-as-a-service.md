# AWS 质子的奇怪案例:康威的法律即服务？

> 原文：<https://acloudguru.com/blog/engineering/aws-proton-is-conways-law-as-a-service>

这是好事吗？总之…不一样了

AWS Proton 上周在预览版中大张旗鼓地推出，引起了更大的混乱。

“容器和无服务器部署的自动化管理，”[AWS marketing](https://aws.amazon.com/proton/)说。这是一款专门用于部署无服务器应用的工具，比如 [Stackery](https://stackery.io) 或 Amplify？没有。我认为他们宣传 Proton 作为“容器和无服务器”解决方案的原因是，所提供的两个示例模板包分别用于 Lambda CRUD 应用程序和负载平衡的 Fargate 服务。尽管构建自己的模板似乎令人*沮丧，*对于质子可以帮助你部署的应用种类，没有技术上的限制*。*

*Proton 本身是“无服务器的”,而 CloudFormation 是无服务器的:它是一项托管服务。那么质子是一种新的改进的云形成吗？不，它使用的[云模板都标有 Jinja](https://github.com/aws-samples/aws-proton-sample-templates) ，但它的操作水平比这更高。*

*我花了一段时间点击，但质子不只是另一个半生不熟的 AWS 开发工具。它正在做一些我认为 AWS 以前从未尝试过的事情。*

*Proton 的创新之处在于，它在技术设计中构建了关于您的组织的明确假设。*

*质子是康威的法律即服务。*

* * *

**有兴趣升级或开始您的 DevOps 之旅吗？云专家的 [AWS DevOps 学习路径](https://acloudguru.com/learning-paths/aws-devops)提供适合初学者和高级专家的定制课程！**

* * *

## *宝腾假设一个平台团队*

*这些年来，我已经谈了很多关于中央云团队的现象(以及越来越多的病理):处于云优先组织中心的 Terraform 书呆子，他们为其他所有人，尤其是产品开发人员，创建工具和标准。在您的公司中，这个团队可能被称为“平台团队”、“基础架构团队”，或者只是“云团队”。这在大型组织中是非常一致的模式，即使它是[最终次优](https://acloudguru.com/blog/engineering/why-central-cloud-teams-fail-and-how-to-save-yours)。*

*事实上，“一个平台团队支持多个产品开发团队”的模式如此普遍，以至于 AWS，在真正的客户困扰模式下，现在已经从 it 逆向推理到设计 Proton。Proton 是平台团队打包环境和基础设施服务的一种规定方式，然后将它们扔给开发团队使用。Proton 在基础设施的自动化和应用程序代码的开发之间划出了一条线，就像普通企业一样。*

*这意味着，如果你没有一个中央平台团队和多个开发团队——比方说，如果你是一个 10 人的初创公司——*Proton 不适合你，*至少现在不适合，即使你有许多容器和无服务器应用要部署*。*这不是因为许多 AWS 服务不适合你——因为它们以你无法承受的成本解决了你没有的技术问题——而是因为 Proton 解决应用部署问题的方式与你的组织结构*不兼容。**

*我实在想不出另一个这样构建的 AWS 服务。甚至像 CodePipeline 这样的服务也采用了 AWS 自己的组织理念——我在想它不愿意支持基于分支的工作流——这样做是隐含的，并带有变通办法。质子是为企业型组织。句号。*

*这不是批评！AWS 绝对应该发布考虑到特定客户工作流的服务。见鬼，这些年来，我已经[亲自实现了](https://aws.amazon.com/quickstart/architecture/serverless-cicd-for-enterprise/)至少三个 AWS Proton 的定制版本，在中央云团队工作的许多其他人也是如此。困难的部分总是中央团队应该做什么和开发团队应该做什么之间的职责分离，以及如何在分离线上获得支持，无论你最终在哪里绘制它。我甚至在[这篇 2019 年的文章](https://www.trek10.com/blog/pragmatic-enterprise-cicd)中写了一个 janky Service Catalog-y 解决方案，回想起来像是在呼救。*

*Proton 是*说明性的*，因为它为你提供了一个协调应用交付的预烤模式，但是*描述性的*，因为这个模式并不是作为一个任意的“最佳实践”而构想出来的——它只是 AWS 看到的客户已经在做的事情的一个典范。这样，它让我想起了我们经常看到的由 AWS 解决方案架构师和合作伙伴开源的参考架构，而不是典型的顶级服务。*

## *但是质子是一个好主意吗？*

*Proton 已经在 preview 中发布，还没有完全成熟，所以我不会在这里提供具体的技术挑剔，但我想解决一个我已经从中央云团队听到很多的批评:“Proton 没有简化创建部署基础架构的过程，几乎没有帮助！”*

*去年，我指出了我的[“实用的 CI/CD 设计”](https://www.trek10.com/blog/pragmatic-enterprise-cicd)的合理性，尽管它涉及复杂的模板，但这种复杂性主要分布在你想要的地方:平台团队的肩上。(他们的工作是 YAML！他们能处理好的！)质子做了同样的计算，并在相同的地方画了分离线。他们将原始的、有些劳动密集型的控制交给平台团队，以便向应用程序开发团队呈现一个简化的部署工作流，将所有讨厌的基础架构抽象掉。(也许这是质子被称为“无服务器”的第二个原因开发团队没有服务器自动化？)*

*我担心质子实际上可能过于简单，而不是太复杂。因为在企业层面上，几乎不可能创建足够通用的部署模板来为多样化的应用程序团队开箱即用。当然，您将拥有一组“快乐之路”团队，您的模板非常好地支持这些团队。但是也有边缘情况，团队需要你不支持的服务或者你不能适应的工作流。如何防止他们陷入阴影 IT …或者更糟，将每个模板膨胀成一堆不可用的一百万个参数？*

*这些团队可能*应该*建立一些他们自己的基础设施，他们应该有更少的集中指令和更多的分散执行。这就是我今年早些时候在博客[中呼吁的 org - > CI/CD 表达的“伞”模式，读起来就像是质子设计会议](https://acloudguru.com/blog/engineering/cd-pipeline)中失去的几分钟。这是我看到越来越多具有前瞻性思维的组织采用的模式——那些与中央云团队一起运行足够长时间以意识到其局限性的组织。*

*[中央云团队是瓶颈](https://acloudguru.com/blog/engineering/why-central-cloud-teams-fail-and-how-to-save-yours)，即使 80%的组织还没有成熟到能够解决这个问题。这就引出了最令人好奇的问题:足够复杂到*需要*质子的团队最终会变得过于复杂到*无法使用*质子吗？*

*这还有待观察，但我确实希望随着 Proton 的发展，它将引导其客户走向可持续的最佳实践，而不是将过去的组织错误产品化。顾客的痴迷是伟大的，但正如安迪·雅西在上周的主题演讲中所说——有时你必须给他们所需要的，而不是他们所要求的。*