# 用多个 AWS 帐户启动您的组织的 5 个技巧

> 原文：<https://acloudguru.com/blog/engineering/5-tips-for-starting-your-organization-with-multiple-aws-accounts>

他们说人越多越好，AWS 上的账户也是如此。虽然大多数开始使用 AWS 的公司都是从单个帐户开始的，但当工作负载和基础架构变得更加复杂时， [AWS 建议创建多个帐户作为一种最佳实践形式](https://aws.amazon.com/organizations/getting-started/best-practices/)。AWS 中的多帐户环境正在成为在云中拥有任务关键型资源的组织的标准，多帐户管理是一项经常被忽视的技能，但需求却越来越大。

在这篇博客中，我探索了多账户环境背后的原因。我将提供一些技巧来帮助您，即系统管理员，避免在建立您的组织时常见的陷阱。

* * *

## 那么，当你只能有一个账户时，为什么要有多个账户呢？

您可能会惊讶地听到，完全有可能从一个 AWS 帐户运行一套完全安全、成熟和复杂的 AWS 资源。是的，是真的！IAM 策略是无限可定制的，并且可以在一个疯狂的粒度级别上控制访问。标签可以被强制执行，并且单帐户服务限制可以(通常)被增加。

但是，随着我们的 AWS 环境在一个帐户中变得越来越复杂——随着我们将生产资源、开发资源、监控资源和安全资源混合在一起——维护最低权限访问所需的工作和人为错误的成本将呈指数级增长。一个错误配置的 IAM 策略或一组受损的凭据，坏人就可以访问您的整个 AWS 环境。打个比方，想想与多细胞植物和动物相比，维持单细胞生物体所需的进化飞跃——后者需要更复杂和协调的过程和工具来保持一切功能。

## 
AWS 上的多账户环境有什么好处？

这就是多账户环境发挥作用的地方。利用多个帐户可以大大降低保护任务关键型资源安全的复杂性。通过充当访问资源的粗过滤器，帐户使得维护“最低特权”访问标准变得更加容易。如果一组访问密钥被泄露，或者一些类似的安全事件，它们也可以减小爆炸半径。还有其他潜在的好处，如更简单的资源集合计费可见性，以及避免 Lambda 和亚马逊 VPC 等服务的单一账户资源限制。

![](img/33cb1ff7424f7c27691d6c93dbac8544.png)

*An example organization where accounts are contained in Organizational Units (OUs) defined in AWS Organizations*.

## 面向未来的多帐户环境的 5 个技巧

多账户环境的好处显而易见。由于 AWS 组织和 AWS 控制塔等服务，建立一个也相对容易。不幸的是，这意味着也非常容易设置您的多帐户环境，导致您和您的组织痛苦。这里有五个技巧可以帮助你建立一个面向未来的多账户环境。

* * *

### 技巧 1:提前计划电子邮件地址

每个 AWS 帐户必须有一个唯一的电子邮件地址，以作为该帐户的根用户。我经常看到个人电子邮件地址被用作包含关键任务资源的组织帐户的根用户。坏主意！那些管理员转移到新的机会，对根用户的访问随着时间而消失；需要在 AWS 的支持下进行繁琐的来回调整。对于您计划在组织中拥有的每个帐户，考虑作为根用户的适当电子邮件地址，以及谁应该有权访问该根电子邮件帐户(或 listserv，或别名)。

对于您的管理帐户 root 用户电子邮件，您可以选择类似“aws-admin@example.com”的内容。根据您的电子邮件服务提供商，您可以为其他帐户使用临时别名。例如，如果你的组织使用 Gmail，你可以使用类似“AWS-admin**+audit**@ example . com”的东西。这个别名将所有确认电子邮件发送到“aws-admin@example.com ”,但在 aws 眼中仍然充当帐户供应的唯一电子邮件。仔细考虑您组织的需求，不要忽视有意选择和控制对您的根用户电子邮件地址的访问的重要性！

### 技巧 2:创建一个新的 AWS 帐户作为您的管理帐户

使用您的主 AWS 帐户作为您组织的管理帐户似乎很直观。但是，应尽可能减少对您的管理帐户的访问以及管理帐户内的活动。避免管理帐户中的任何类型的工作负载被认为是最佳做法。

最简单的方法是创建一个全新的帐户作为管理帐户。从管理帐户创建您的组织后，您可以邀请您的现有帐户作为成员帐户。

### 技巧 3:使用 AWS SSO

管理多个帐户的最大挑战之一是，默认情况下，对您的帐户的访问是分散的。如果你习惯于让人们通过 IAM 用户访问你的账户，那么管理多个账户的用户可能会令人生畏。幸运的是，AWS 为多帐户身份联合和访问管理提供了一个简单的解决方案，所有这些都可以从管理帐户进行管理。

AWS SSO 利用您现有的身份提供商(如 Azure AD 或 Okta)来帮助您将用户或组映射到您每个帐户中的 IAM 权限集。如果您没有第三方身份提供者，它也可以充当自己的用户目录。使用 AWS SSO 并删除所有(是的，*所有*)你的 IAM 用户！

秘诀 4:组织广泛，而不是深入

### 当您着手组织您的 AWS 客户时，您的任务是将您的客户分组到组织单位(ou)中。经验法则是根据客户的**安全和运营需求**来组织客户。

一般来说，安全护栏应用于 OU，由该 OU 下的账户继承。如果两组帐户具有相似但不完全相同的安全需求，那么创建嵌套 ou 可能很有诱惑力。“子”OU 可以从“父”OU 继承所有护栏，然后可以在子 OU 上添加额外的护栏。这是不可取的，在大多数情况下，更好的解决方案是创建一个单独的“同级”OU。因为这些帐户集有不同的安全或操作需求，所以很难说它们未来的护栏是否会一直遵循当前的父子继承模式。为了避免复杂的依赖性，最好将这些 ou 保持为兄弟关系。

![](img/2ef37247b56f78b88e60c15c903815f5.png)

Organize your accounts based on security and operational needs – Organizational Units (OUs) are your friends!

技巧 5:不要超越自己！

* * *

![Audit and Secure Your AWS Account](img/e39115bb9b3398272400ee3f4b083913.png)

*Want to stave off data leakage and exposed credentials? Read our [article](https://acloudguru.com/blog/engineering/how-to-audit-and-secure-an-aws-account) on how to audit and secure an AWS account.*

* * *

### 如果你像我一样，很容易对构建 AWS 环境的许多可能性感到兴奋。有时候，你可能会觉得在开始前进之前，你必须知道所有的事情。但是，就像任何技术解决方案一样，帐户结构可能会被过度设计，以至于阻碍您的组织快速前进。确保您了解基本原理，不要在遵守 AWS 安全性、卓越运营和成本控制的最佳实践方面有所懈怠，但也不要让完美成为好的敌人。

在 AWS 中创建和组织账户时，尽量不要做超出你目前所能受益的事情。在这一行工作中，你总会学到新的更好的做事方法。你今天的观点几乎永远没有你明天的观点好！

荣誉奖:使用 AWS 控制塔

### 在大多数情况下，我建议从一开始就使用 [AWS 控制塔](https://aws.amazon.com/controltower/)来管理您的多帐户 AWS 环境。Control Tower 包含了太多内容，无法在这篇简短的博客文章中描述，但我鼓励您探索这项服务，并考虑将其用于您的帐户管理。
T3【自动气象站控制塔】自动配置自动气象站组织和自动气象站单点登录。最重要的是，它为您提供了一系列强大的自动化工具，帮助您遵循多账户管理的最佳实践。

结论

## 正如您所看到的，管理多个帐户涉及到 AWS 中许多服务的知识，这使得新的 AWS 系统管理员很难启动多帐户环境。我希望这些提示已经为你提供了一些背景知识和信心，让你能够应对多账户挑战！有关在 AWS 中组织帐户的工具和最佳实践的更多信息，或者如果您想深入了解 AWS 控制塔中涉及的服务，请查看我的课程[如何在 AWS 中组织您的帐户](https://learn.acloud.guru/course/how-to-organize-your-accounts-in-aws/overview)。

**改变职业，改变企业**

* * *

## 学得更快。动作快点。创新更快。云专家是你成功的关键。借助 AWS、Microsoft Azure、Google Cloud 等领域的课程和实际动手实验室，立即实现转型。

Learn faster. Move faster. Innovate faster. A Cloud Guru is the key to your success. Transform now with courses and real hands-on labs in AWS, Microsoft Azure, Google Cloud, and beyond.