# 受控故障的混沌工程

> 原文：<https://acloudguru.com/blog/engineering/how-to-improve-your-systems-by-injecting-controlled-failure-with-chaos-engineering>

混沌工程是关于将*受控中断*引入分布式系统，仔细研究行为，识别薄弱区域，并通过自动化提高弹性。

通过自动消防演习使您的系统防火。

随着[微服务架构](https://acloudguru.com/blog/engineering/using-your-first-microservice-with-aws-lambda)的发展，分布式系统变得越来越复杂，并且随着开发速度的增加，变得更加不可预测。

分布式系统可能有不同的服务，这些服务在隔离状态下运行良好，但是与其他系统组件的交互可能会产生不可预测的行为—通常只在生产环境中暴露和观察到。

> “任何事情都会失败。我们会失去整个数据中心！这些事情会发生。”
> 
> [Werner Vogels](https://medium.com/u/8859b1d1dade?source=post_page-----fafc5969f41e--------------------------------)

那么，我们如何在这些弱点扩散到我们的生产系统并影响客户体验之前识别它们呢？

### 受控中断

通过精心设计引入受控中断的实验，我们可以主动识别和解决弱点，并摆脱功能失调和被动的事件响应模式。

中断可以简单到终止一个 Linux 服务器上的进程，或者导致为生产中的客户服务的实时流量段出错。

将受控中断引入复杂分布式系统的混沌工程示例实验包括:

*   停止、重启和终止[个虚拟机](https://acloudguru.com/blog/engineering/cloud-comparison-aws-ec2-vs-azure-virtual-machines-vs-google-compute-engine)
*   删除网络服务、路由器和负载平衡器
*   模拟整个区域的故障
*   在服务之间引入延迟、丢失消息主题、随机错误和崩溃的 docker 容器
*   模仿第三方 API 的不可用性或造成额外的延迟
*   模拟 I/O、CPU 和内存峰值的操作系统问题

虽然混沌工程技术仍在被较小的组织学习和采用，但这些方法已经在亚马逊和网飞这样的大型组织中制度化了。

### 失败即服务

为了支持受控中断，FaaS(Failure as a Service)架构是在伯克利大学的一项研究中提出的。

目标类似于消防演习。也就是说，在经历意外的故障场景之前，[云服务](https://acloudguru.com/blog/engineering/scalability-cloud-computing)可以不时地执行故障演习，以找出其恢复不起作用的真实部署场景。

### 该架构基于三个重要特征:

1.  故障演练基于大规模的中断注入
2.  针对在线生产环境进行故障演练
3.  故障演练作为一项易于使用的服务可供组织使用

### 该架构包括以下组件:

*   FaaS 控制器是一种容错服务，它向虚拟机中运行的代理发送防火练习命令。
*   FaaS 代理运行在与目标服务相同的虚拟机上，并接收调用受控中断的钻取命令。
*   监控服务收集有关目标服务的数据，这些数据用于故障演练场景和规范。

该体系结构为设计用于在大规模分布式系统中引入常见故障模式的系统提供了基本模型。

通过利用混沌工程的原理来应对大规模的在线故障，你的组织和系统可以发展成一种更有弹性的——防火的——文化。

*您对混沌工程有什么经验，或者您的组织在采用这些技术时面临什么挑战？在推特* *上留言或 [*联系我！*](https://twitter.com/vagees)*

* * *

## 获得更好职业所需的技能。

掌握现代技术技能，获得认证，提升您的职业生涯。无论您是新手还是经验丰富的专业人士，您都可以通过实践来学习，并在 ACG 的帮助下推进您的云计算职业生涯。

* * *