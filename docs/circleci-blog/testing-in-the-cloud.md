# 云中测试如何为开发团队带来价值

> 原文：<https://circleci.com/blog/testing-in-the-cloud/>

测试是软件开发过程中不可或缺的一部分，也是开发团队更好地理解应用程序如何运行的关键方法之一。测试还可以防止对代码库进行影响代码其他部分的更改，使您能够测量软件的质量，并在用户与软件交互之前消除任何错误。

大多数开发团队使用[单元和集成测试](https://circleci.com/blog/unit-testing-vs-integration-testing/)来评估他们的软件。这种测试通常发生在开发人员和测试人员的本地机器上。虽然本地测试有助于将开发人员的注意力集中在软件组件的行为上，但是在云中测试可以使整个开发团队更加有效，并帮助您的组织更快地交付更好的软件。

云测试使用[持续集成](https://circleci.com/continuous-integration/)平台来自动测试代码库每次变更时软件的完整性。这些平台产生即时结果，并提供给整个组织，快速发现问题，改善团队协作。云测试还提供了对[大范围计算资源](https://circleci.com/product/features/resource-classes/)的访问，允许您在没有任何硬件限制的情况下运行测试。

本文讨论了为什么您的团队应该在云中进行测试。它探讨了云测试的好处，以及从测试数据中获得的洞察力如何能够显著地改进整个软件开发过程。

## 在云中测试相对于本地测试的优势

开发团队从任何软件测试中受益，无论是在云中还是在本地机器上。但是云提供的一些好处超过了本地测试提供的好处。您的一些基于云的新能力:

*   减少发现的错误数量，并最大限度地降低其严重性
*   可视化和量化测试优势
*   加强决策
*   提供实时见解
*   加速反馈

### 减少错误的数量和严重性

云中的测试确保测试总是在每次提交后运行，以保证没有人将错误带入产品。

基于云的持续集成平台可以在每次提交每个源代码控制分支和合并请求后触发一个测试套件。这给了代码评审者信心，在接受合并请求之前，所有的测试都已经通过了。

持续集成的一个基本原则是开发人员应该在一天中频繁地进行小的提交。通过对每个变更进行粒度提交和运行测试，您可以更好地了解代码的状态，并在测试失败时更快地采取行动。这使您对开发过程有了更多的控制，使您的团队更加敏捷和灵敏，并提高了代码的整体质量。

### 可视化和量化测试优势

云中的测试使得测试的影响更容易可视化和量化。

离线执行，测试看起来像是消耗开发人员和测试人员时间的隐性成本，没有可测量的投资回报。相比之下，持续云测试使得经常运行测试变得容易，跟踪测试防止 bug 扩展到生产的频率，以及跟踪随着时间的推移您为了响应新特性和 bug 报告而添加了多少测试。

### 加强决策

在云中测试有助于您做出更好的决策。如果您必须关注并在某个特定区域执行更多的测试来响应 bug 报告，那么您可能希望在将来更仔细地研究那个区域和特性。这有助于团队解决与容量相关的问题，并保持对新出现的错误或挑战的响应。

### 提供实时见解

借助云测试，您可以在线访问计算资源，并在实时环境中监控测试。这提供了增强的移动性，帮助团队响应任何与容量相关的问题，并收集关于软件性能和服务可用性的信息。

### 加速反馈

云测试的另一个好处是，它比本地测试更快地产生数据，在本地测试中，资源限制通常意味着您必须一次运行一个测试。

通过持续云测试，您可以[并行](https://circleci.com/blog/config-best-practices-concurrency-parallelism/)或同时运行多个测试。这意味着您可以更快地从测试中收到可操作的信号，从而提高生产率和效率。您可以轻松捕获测试输出，并使用 CircleCI 的 [Insights dashboard](https://circleci.com/blog/monitor-and-optimize-your-ci-cd-pipeline-with-insights-from-circleci/) 等可视化工具来改进开发过程。

## 如何从测试数据中获取有价值的见解

对团队来说，在云中进行测试的最大好处之一是能够从测试数据中快速获得洞察力。获得这些洞察的最佳方式是跟踪有意义的指标和行业基准，例如在 [2022 年软件交付状态报告](https://circleci.com/resources/2022-state-of-software-delivery/)中引用的那些指标和基准。一旦您捕获了这些数据，通过将测试结果上传到一个所有团队成员都可以访问的中心位置来与团队的其他成员共享这些数据也是同样重要的。

### 跟踪有意义的指标

您可以使用四个常用指标来衡量您的团队相对于行业基准的绩效:

*   吞吐量
*   接通率
*   持续时间
*   平均恢复时间(MTTR)

下面，我们将看看这些度量标准中的每一个度量标准是什么，以及如何改进您的开发过程来优化每一个度量标准。

#### 吞吐量

吞吐量是每天运行工作流的平均次数。开发人员对共享存储库中代码库的更新会激活工作流。

如果开发团队的目标是增加吞吐量，更频繁地进行较小的提交可以减少错误的威胁，并使快速减少错误变得更容易。您应该根据需要经常进行这种测量。

#### 接通率

对于产品的主要分支，你的成功率应该总是很高(90%或以上)。该比率是一段时间内通过运行的次数除以运行总数。

衡量当前工作流成功率的能力对于建立发展目标至关重要。例如，功能分支，即开发人员试验客户问题的新解决方案的地方，可能比主分支的成功率低得多，主分支应该总是反映产品的最新稳定版本。如果主分支上的成功率不够高，您应该通过增加测试来解决问题，以确保在提交到主分支之前捕获到 bug。

#### 持续时间

持续时间是工作流运行所需的时间长度。十分钟的持续时间是标准工作流长度的一个很好的目标。在此期间，您可以更快地行动，并从通过 CI 渠道生成的信息中获益。

为了改善您的工作流持续时间，您可以利用 CI/CD 提供者提供的节省时间的特性，例如[依赖缓存](https://circleci.com/blog/config-best-practices-dependency-caching/)、 [Docker 层缓存](https://circleci.com/blog/config-best-practices-docker-layer-caching/)，以及并行运行您的测试。

#### 平均恢复时间

平均恢复时间(MTTR)是测试失败后获得通过的构建信号所需的平均时间。MTTR 是要跟踪的最重要的度量，因为它度量了当您的开发团队遇到失败时，他们能够多快地恢复。快速响应错误的能力是保持竞争力和向最终用户交付价值的关键部分。

理想情况下，你的平均恢复时间应该少于 60 分钟。MTTR 与您的工作流持续时间直接相关(毕竟，您修复 bug 的速度不可能快于您测试 bug 的速度)，因此，如果您的团队正在努力及时解决 bug，请尝试通过提高基于云的测试工作流的运行速度来“更快地失败”。进行更小的、更多的增量提交也可以使测试运行得更快，代码中的缺陷更容易解决。

### 将您的测试结果上传到云端

将所有的测试结果和度量上传到 CI/CD 平台，可以让您的团队——以及整个组织——更好地理解产品在每个阶段的状态。

许多持续集成平台支持将您的测试结果存储一段时间，允许您与利益相关者共享您的结果，并分析您的测试数据中的趋势。使用 CircleCI，您可以使用`store_test_results`步骤从您的测试运行中上传数据，然后可以在 web 应用程序的 Tests 选项卡中查看这些数据长达 30 天。对于测试结果的长期存储，您还可以使用`store_artifacts`步骤将测试结果存储为一个可共享的[工件](https://circleci.com/blog/piecing-together-build-and-test-results-with-artifacts/)。

有关存储持续集成测试结果的好处的更多信息，请参见以下视频:

[https://www.youtube.com/embed/3sC_EzK0V-U](https://www.youtube.com/embed/3sC_EzK0V-U)

视频

上传您的测试结果不仅为您提供了一个所有团队成员分析和检查测试数据的集中位置，而且还使您能够更容易地通过数据可视化工具来访问这些数据。一些平台提供了内置的仪表板来分析您的测试运行。例如，CircleCI 的 Insights 仪表板提供了工作流持续时间和成功率等重要指标的详细数据，并且可以[自动识别不稳定的测试](https://circleci.com/blog/introducing-test-insights-with-flaky-test-detection/)以帮助提高测试套件的可靠性。许多平台还提供了与 Datadog、Honeycomb、Katalon、PractiTest 等工具的集成，这些工具可以提供高度可定制的报告，说明您的团队相对于重要基准的表现。

## 如何应用测试洞察力来改进您团队的开发过程

使用这些测试见解来改进您的开发过程。请记住，数据只有转化为实际的见解才有价值。

例如，好的测试可以识别高价值的用户旅程或模拟错误来测试系统的响应。通过从测试中获得的洞察力，您可以记录那些高价值的旅程，开发处理模拟错误的流程，并走在用户需求的前面。

为了应用从测试中获得的见解，您的团队应该养成一种习惯，审查测试数据，总结见解，提出建议，并与能够从中受益的团队分享结果。这看起来如何取决于你的团队结构。您可能会有一个专门的测试人员来做这件事，或者在较小的团队中，这个责任可能会在团队成员之间逐个 sprint 地轮换。

## 结论

在云中测试是有价值的——不仅仅是为了应用程序的成功，也是为了整个开发工作流程。如果您已经在使用基于云的 CI，那么您所使用的平台将已经内置了测试运行程序，这意味着只需很少的成本就可以开始使用并获得收益。

从测试中获取输出并做出有效改变的关键是获得详细的见解。 [Insights 仪表板](https://circleci.com/blog/monitor-and-optimize-your-ci-cd-pipeline-with-insights-from-circleci/)让 CircleCI 成为开始云测试的好地方。借助 Insights，CircleCI 可帮助您监控和优化工作流程，使您能够对开发和测试流程做出明智的决策。

要进一步了解如何使用 CircleCI 来获得对您的开发工作流程的有价值、可操作的见解，[立即开始使用免费计划](https://circleci.com/signup/)。