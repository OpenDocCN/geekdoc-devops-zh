# 我从开发 GitLab 支持功能| CircleCI 中学到了什么

> 原文：<https://circleci.com/blog/developing-support-for-gitlab-teams/>

今年早些时候，CircleCI 添加了 GitLab 作为我们支持的第三个版本控制系统，除了 GitHub 和 Bitbucket。在 CircleCI，我们在用户所在地与他们见面是至关重要的，我们的许多用户都在 GitLab 上。我们很高兴让我们的用户能够通过 GitLab 平台进行构建、测试和部署。

作为 onboarding 体验团队的软件工程师，我想告诉你开发这种体验是什么样的——我们遇到的挑战，我们如何克服它们，以及我们学到了什么，我们将继续前进。

## 静默发射期

我的团队选择悄悄地发布 GitLab 可用性，这样我们可以在向所有用户发布体验之前收集早期反馈并做出改进。我们一致认为，发布前所需的最低功能，即使是静默的，也意味着用户必须能够从根本没有 CircleCI 帐户，成功地创建一个连接到 GitLab 存储库的新项目。体验必须包含用户在没有人工干预的情况下完成旅程所需的一切。

通过悄悄地让 CircleCI 用户发现这一新功能，我们能够抓住那些已经对尝试 GitLab 体验感兴趣的用户。我们的理论是，这些用户将被激励去经历整个体验，即使它有点颠簸，我们将能够从他们那里获得有价值的信息。

因为用户是自己发现体验的，而我们没有与他们直接互动，所以我们必须确保我们的监控和分析安全到位，以便我们可以看到我们系统的哪些部分降低了用户的速度或妨碍了他们取得成功。

## 获得对新特性的访问:个人访问令牌与 OAuth

我们为用户设置项目提供了两个选项:“个人访问令牌”或通过无密码访问应用程序 OAuth。我们很快发现，试图使用个人访问令牌的用户通常不了解如何创建令牌，他们需要什么权限，或者它们的用途。一旦我们注意到访问令牌用户有问题，我们就添加更多的文本和文档链接，并尝试将它们直接链接到 GitLab 令牌页面。

最终，我们发现个人访问令牌对我们的用户来说太麻烦了，所以我们决定为了 OAuth 而完全抛弃它们。现在，我们看到更多的 GitLab 用户成功地完成了注册过程。

在此阶段，持续交付至关重要。每当我们注意到用户难以理解某件事时，我们会立即着手解决。一旦我们发布了一个补丁并合并了它，它在 20 分钟内就对所有用户开放了。这让我的团队感觉作为开发人员被授权了，因为我们能够尽可能经常地交付价值，并且我们看到了体验的实时改善。

## 普遍可用性:从反馈中学习

全面上市的目的是收集更有力的反馈。随着 GitLab 支持流量的增加，我们能够更好地识别趋势并观察用户遇到困难或体验不佳的常见领域。

我们很大程度上依赖于我们内置的分析和监控功能来告知用户体验的进展情况。如果有任何我们可以快速发布以改善体验的东西，我们会优先考虑这些修复，并致力于尽快交付它们。任何常见的问题领域或用户陷入困境的地方都被分组在一起，我们将在以后集思广益，提出更大的倡议来改善这些领域。

在此期间，我们再次看到许多用户在注册过程中陷入困境。我们的 GitLab 支持的工作方式是，一个 GitLab 帐户只能链接到一个 CircleCI 帐户。我们发现，当用户测试体验时，他们有时会在连接真实帐户之前使用临时 GitLab 帐户。

然后，当他们试图使用他们真正的 GitLab 帐户时，他们的许可会被拒绝。我们没有很好地与用户沟通这个问题——我们实际上根本没有显示错误消息，所以看起来好像什么都没发生，这让用户感到非常沮丧。

一旦我们意识到这一点，我们就能够快速交付一个变更来明确区分这个错误情况，并为用户提供一个实际的错误状态，让他们更清楚地了解这个问题。

实施这些变更后，我们将每天观察影响。总的来说，我们发现在我们发布改进后，更多的用户成功地获得了体验，这真的令人欣慰。

## 快速传递价值

通过这次经历，我的团队了解到分析对这样的项目是多么重要，他们应该像我们对项目设计的其他部分一样重视。我们对体验所做的许多早期改变都是围绕着添加跟踪功能。如果我们能够在一开始就更加努力地规划我们的分析能力，我们下次就不必追赶了。

我们还了解到静默启动是一个有用的工具。当我们在发展时，我们倾向于非常专注于我们的特定体验，很难超越这一点。通过提前悄悄启动，我们有更多的时间体验现场，并且我们能够收集关于我们所构建内容的真实反馈。有空间退后一步审视整个体验，让我们有机会在更多客户发现它们之前找到并解决它们。

参与这个项目最令人满意的事情之一是，我的团队对体验有很大的控制权。我们能够快速有效地向用户交付价值。我们的测试实践和控制意味着我们可以满怀信心地发布我们的变更。我们能够每天将多个变更发布到产品中，这有助于我们更多地了解我们自己的系统，并让我们感觉到从始至终都在控制这个项目。