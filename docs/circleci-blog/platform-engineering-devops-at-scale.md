# 开发运维没有死:平台工程如何实现大规模开发运维

> 原文：<https://circleci.com/blog/platform-engineering-devops-at-scale/>

DevOps 已经成为软件开发中事实上的方法论。有了它，软件工程师可以将操作掌握在自己手中，使用诸如[基础设施作为代码](https://circleci.com/blog/an-intro-to-infrastructure-as-code/) (IaC)之类的技术来自动化基础设施部署。

然而，随着 DevOps 的流行，现代应用程序开发的复杂性也在增加。开发人员必须学习新工具并维护基础设施，同时在功能开发的同时对 ops 任务进行编码和优先级排序。这些需求的压力不仅会导致生产力和效率的降低，还会表现为压力、倦怠和工作满意度的降低。

[平台工程](https://circleci.com/blog/what-is-platform-engineering/)是成熟的 DevOps 实践的逻辑延伸，旨在与现有的 DevOps 概念一起工作，同时减轻相关的认知负荷。大前提是把自助服务带到 DevOps。平台工程师将常见 DevOps 流程的复杂性抽象到一个内部开发人员平台(IDP)中，该平台提供了一套用于构建和部署应用的标准工具。

本文将回顾大规模开发运维面临的挑战，以及为什么开发运维从业者希望通过平台工程来解决这些核心问题。

## 利用平台工程增强 DevOps

平台工程旨在增强 DevOps，而不是取代它。平台工程消除了开发人员学习、开发和维护基础设施工具和流程的需要。一些常见的例子包括使用 Helm 管理 Kubernetes 集群或编写 Terraform 代码来自动部署基础设施。相反，这些过程被抽象成一个 IDP，这样开发人员可以专注于构建软件。

### DevOps 的认知负荷

尽管 DevOps 旨在使软件开发更加高效，但 DevOps 工程师经常面临许多增加他们认知工作量的高要求任务。让我们看几个常见的例子。

首先，DevOps 工程师经常需要为新的软件项目设计新的流程，比如[持续集成和持续交付(CI/CD)](https://circleci.com/blog/what-is-a-ci-cd-pipeline/) 流程。DevOps 工程师可能还需要加快开发环境的基础设施，同时确保与生产环境的兼容性。这包括管理 Docker 文件、舵图和 Terraform 代码，这些都需要随着项目的进展进行定期维护和支持。CI/CD 管道也需要构建，尽管工程师可以从以前的项目中获取一些部件，但新项目的新测试或构建要求增加了额外的复杂性。

必须扩大或缩小现有流程，以满足当前需求。这些流程包括[扩展基础设施](https://circleci.com/blog/autoscale-self-hosted-runners-aws/)以满足新的处理或存储要求，以及修改为一个小型工程师团队设计的现有工作流，该团队已经壮大。

DevOps 从业者也管理软件工程生命周期的许多方面的所有权。这包括在内部代码库和基础设施之上管理第三方工具和产品。其他开发人员也需要代码评审和会议来讨论潜在的解决方案选项，这需要专门的 DevOps 知识。

最后，DevOps 工程师必须确保系统记录正确，并且可以收集和分析[指标](https://circleci.com/blog/adding-metrics-for-docker-container-performance/)。掌握不同软件应用程序的性能对于确保它们顺利运行至关重要。它还有助于工程师了解需要扩展的潜在领域。

除了满足服务级别协议(SLA)和其他内部业务目标之外，所有这些都给 DevOps 从业者带来了巨大的认知压力。每个任务和流程都会产生额外的开销，DevOps 实践者必须处理这些开销，通常会将资源从他们的创新和优化的主要目标上移走。

随着认知负荷的增加，相关的复杂性和压力也会增加，从而导致倦怠、错误和熵增加。这大大降低了团队的生产力，并最终扼杀了创新。

那么，平台工程如何降低负载，使工程师实现他们的首要目标呢？

### 平台工程师是做什么的？

平台工程师开发解决日常开发任务的 IDP，减少或完全消除开销。这使得 DevOps 能够更快地专注于提供真正商业价值的任务。

IDPs 的主要目标是为所有团队提供一个标准的、可重用的方法。设置存储库、分配正确的团队成员、启动环境以及配置[部署管道](https://circleci.com/blog/preparing-for-continuous-deployment/)已经内置于 IDP 工具和服务中。这些可以分为四个关键的管理领域:基础设施、部署、配置和用户访问控制。

无论是使用现成的 IDP 还是开发自己的 IDP，大多数 IDP 都为开发人员提供了用户界面(有些只有命令行界面)。通常，API 层请求不同的服务执行自动操作。这个操作可以是创建 git 存储库，使用 terraform 脚本启动数据库，或者任何其他常见的 DevOps 任务。然后，开发人员使用 IDP 自动初始化新项目的核心部分。

抽象出执行这些操作的底层细节可以防止开发人员在他们的方法上产生分歧。基础架构以标准方式配置和部署，使维护变得更加简单。

IDP 还通过自助工具促进开发人员自治。这可以防止因从头设计和构建基础设施而导致部署项目资源的时间过长。现在，开发人员可以使用 IDP 来完成他们的工作。IDP 还消除了为建立新环境而在待办事项中创建标签并等待它们被优先化和完成的需要。相反，开发人员可以通过 IDP 界面执行这些操作。

最后，境内流离失所者可以从一开始就做到安全和合规。这意味着平台工程师将安全性和合规性特性融入 IDP 服务，以便基础设施在部署时遵循安全性最佳实践。他们还可以确保 Git 管道被配置为在构建和发布之前自动[扫描漏洞](https://circleci.com/blog/security-with-snyk-in-the-circleci-workflow/)的代码。因此，减少了开发人员的负担和数据泄露的风险。

### 将平台工程融入 DevOps

现在，我们将检查一个假设的用例，平台工程方法如何改进 DevOps 团队的工作流程。

想象一下，一家企业设计的 web 应用程序都遵循相似的架构模式。有一个数据库，一个 API，和一个基于网络的前端。有一些预建的 Docker 映像和 CI/CD 模板。然而，一切都是手动完成的。DevOps 工程师必须[为每个项目创建 Docker 文件](https://circleci.com/blog/how-to-build-a-docker-image-on-circleci-2-0/)，[实现 Terraform 脚本](https://circleci.com/blog/learn-iac-part1/)，[构建 Git 管道](https://circleci.com/blog/setting-up-continuous-integration-with-github/)。然后，他们将与开发人员合作，确保环境满足他们的需求，并将[监控和警报](https://circleci.com/blog/observability-vs-monitoring/)添加到生产基础设施中。这些任务与响应现有基础架构的 SLA 和执行定期维护一起发生。

这给 DevOps 工程师带来了巨大的压力。主要的问题是所有的任务都指向 DevOps 团队，不管它们有多复杂。因此，工作栈最终会增加开发人员开发项目的时间。

平台工程师可以通过将其构建到 IDP 中来自动化几乎所有这些工作。例如，开发人员可以从 IDP 请求一个存储库，然后由 IDP 创建它，而不是手动设置 Git 存储库。然后，IDP 将分配正确的用户组，并自动集成正确的 CI/CD 模板。

同样的模式也适用于创建开发环境和部署核心基础设施。IDP 充当开发人员请求服务和应用配置的自助服务平台，知道安全最佳实践和监控是默认内置的。IDPs 还可以在项目跟踪软件和文档模板中自动建立项目。

如您所见，平台工程师不会取代 DevOps 流程。他们通过将一组标准化模式构建到一个自助式内部开发平台中来增强它们。这消除了项目初始化的负担，因此团队可以立即开始提供业务价值，而不是花费项目的前几周来设置和解决初期问题。

此外，由于开发人员将更加自主，平台工程师可以专注于解决更大的架构挑战，并将其反馈给 IDP。通过这种方式，他们可以改善现有的服务，并加强未来的新系统。

## 结论

DevOps 越来越受欢迎，因为它为开发人员提供了管理应用程序端到端生命周期的自由。然而，这种强大的力量伴随着巨大的责任。随着时间的推移，它增加了大规模管理和操作这些流程所需的认知负荷。

因此，平台工程是每个拥有 DevOps 团队的组织都应该考虑的事情。将核心运营流程整合到一个 IDP 中极大地减少了 DevOps 从业者所需的固有认知负荷。将常见的 DevOps 流程转变为一组自助式 API 还可以缩短项目交付时间，因此开发人员可以迅速提供真正的业务价值。

如果您准备好开始利用平台工程扩展您的 DevOps 实践，请从注册一个[免费 CircleCI 帐户](https://circleci.com/signup/)开始，了解同类最佳的持续集成如何帮助您自动化关键流程，以获得更快、更一致的交付结果。