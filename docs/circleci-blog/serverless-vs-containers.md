# 无服务器与容器:哪个最适合你的应用？圆环

> 原文：<https://circleci.com/blog/serverless-vs-containers/>

为了保持领先，许多组织都在考虑如何发展他们的技术流程，以加速他们的 IT 基础设施开发。快速、稳健地部署到最新平台是实现这一变革所需的较短交付周期的关键。

托管这些部署的两种最广泛使用的技术是无服务器功能和容器。它们是什么，有何不同，如何决定哪一个最适合您的应用？在这个比较中，我们将看看无服务器计算和容器之间的一些重要区别，并概述一些您可以用来决定在您的下一个项目中使用哪个的标准。

## 什么是无服务器？

无服务器技术有点用词不当。使用无服务器计算，工作负载实际上运行在一个服务器上，该服务器在幕后托管功能。但是，服务器不是由开发人员管理的。说是开发者的 todo 列表无服务器可能更准确。

无服务器功能通常是小型、轻量级的编程功能，只有一个目的。这个单一的目的可以是任何事情，从从数据库中获取客户的详细信息到显示通知。

大多数云提供商提供无服务器功能，他们可能称之为功能即服务(FaaS)。领先的产品是 [AWS Lambda](https://aws.amazon.com/lambda/) 、 [Azure Functions](https://azure.microsoft.com/en-us/services/functions/) 和 [Google Cloud Functions](https://cloud.google.com/functions) ，每一个都在相关的生态系统中有许多集成。它们是提供 API 端点或[微服务](https://circleci.com/blog/soa-vs-microservices/)的理想选择。

## 什么是容器？

理解集装箱的经典比喻是想象一艘集装箱船在大片水域上运输货物。

容器是一种独立的、轻量级的虚拟化技术。它们类似于虚拟机(VM)，只是它们只虚拟化客户操作系统(OS)和应用程序，而不是整个计算机。容器比 VM 设置起来更快更容易。回到我们的船的比喻，船本身代表主机操作系统和硬件，而货物容器是客户操作系统和应用程序。

一旦有人构建了一个容器，他们就可以使用像亚马逊的弹性容器服务(ECS)或 [Docker](https://circleci.com/docker/) 这样的服务来部署和运行它。然而，DevOps 团队最常将容器部署到 [Kubernetes 集群](https://circleci.com/integrations/kubernetes/)。

容器是将现有的单一应用程序转变为云原生应用程序的最佳方式之一。为了尽可能高效，容器还应该将应用程序分成更小的部分。

## 无服务器与容器:相似与不同

无服务器应用程序和容器化应用程序有几个相似之处。也有一些重要的区别。

### 无服务器和容器有什么相似之处？

在大多数情况下，无论是无服务器功能还是容器都不需要开发人员担心服务器或托管其应用程序的基础设施。主机硬件和操作系统与客户应用程序和操作系统分开。DevOps 团队不需要考虑无服务器功能或容器使用什么硬件。

这两种托管选项都是可扩展的，只需提供更好的硬件，如更强大的 CPU、更多内存或更快的联网能力。

这种情况的例外是在使用具有内部基础设施的容器时。在这种情况下，硬件配置是一个手动过程，通常由专门的基础架构团队来处理。

还可以根据流量等需求进行扩展。开源编排系统 Kubernetes 可以在几秒钟内横向扩展容器。类似地，许多 FaaS 产品可以基于重要指标(如路由到应用程序的请求数量)自动扩展。

无服务器功能和容器都兼容顶级[持续集成](https://circleci.com/continuous-integration/)平台，包括 CircleCI。对于每个成功完成的构建，自动化工具可以为您的基础设施提供商部署新版本的容器映像或无服务器功能。

### 无服务器和容器有什么不同？

尽管这两种技术有相似之处，但基于一些固有的差异，每种技术都有独特的用途。

无服务器和容器都是有弹性的，所以它们可以在需要的时候伸缩。然而，使用容器的 DevOps 团队需要像 Kubernetes 这样的容器编排软件来根据给定的标准自动伸缩。与此同时，许多 FaaS 平台提供开箱即用的服务。

无服务器功能通常是小型的、独立的功能块，具有单一的职责。它们通常是短暂的，只运行几分钟，或者如果面向客户，只运行几秒钟。同时，容器最适合更广泛、长时间运行的应用程序或具有多重职责的应用程序。

对于以下情况，容器是很好的选择:

*   远离传统的内部基础架构
*   使现有的单一应用程序成为云原生的
*   开发一个一次运行数小时的应用程序

一个显著的区别是，您的提供商将只对您的无服务器功能运行的时间收费。相比之下，您增加了容器实例，并保持其中至少一些实例全天候运行，这通常会导致更高的成本。如果您的应用程序很小，更适合无服务器应用程序，那么浪费的资源会很快产生不必要的成本，并导致更大的环境影响。

然而，这里有一些容器的无服务器产品的例子。AWS Fargate 是一个用于托管和运行容器的平台，您只需为容器完成运行的时间付费。

另一个区别是，供应商锁定更关注无服务器功能。由于与相关服务集成所需的代码，您很容易被捆绑到一个特定的生态系统中。

相反，容器让你保持供应商中立。这种中立性的一个副作用是容器支持任何语言，而无服务器应用程序仅限于少数几种语言。支持的语言列表因提供商而异。

## 如何为您的应用程序在无服务器和容器之间进行选择

当您决定无服务器还是容器最适合您的应用程序时，最好考虑上面列出的所有因素。然而，您的应用程序架构的大小和结构应该是影响您决策的主要因素。并且确保在你的决定中包括价格等其他因素。

您可以部署一个小型应用程序，或者一个我们可以轻松拆分为多个更小的微服务的无服务器应用程序。另一方面，更大、更复杂的应用程序可能更适合作为容器化的应用程序。紧密耦合的服务集，不容易分解成小的微服务，是容器的有力候选。

由于无服务器产品的局限性，对于某些应用程序来说，容器可能是更好的选择。例如，用不受支持的语言编写的应用程序，或者运行时间长的应用程序，比如机器学习应用程序。

但是你也不一定非要选择其中之一。**无服务器和容器并不互斥**。你可以在需要的地方使用容器，在有意义的地方结合无服务器，享受两个世界的好处。正如我们前面提到的，甚至有用于托管容器的无服务器产品，旨在弥合这两种选择之间的差距。

## 结论

无服务器和容器都是创建可伸缩的云原生应用程序的好选择，这将允许您更快地进行创新。要了解有关如何开始的更多信息，请查看这些教程:

无论您选择使用无服务器还是容器，您都可以使用 CircleCI 的持续集成平台来自动化您的构建、测试和部署。一旦你决定了如何使用无服务器和容器，了解更多关于如何使用 [CI/CD 管道](https://circleci.com/blog/what-is-a-ci-cd-pipeline/)来优化和简化你的开发过程。