# DevOps -持续集成| CircleCI

> 原文：<https://circleci.com/blog/10-ways-you-re-doing-devops-wrong/>

**来自出版商的说明:**您已经找到了我们的一些旧内容，这些内容可能已经过时和/或不正确。尝试在[我们的文档](https://circleci.com/docs/)或[博客](https://circleci.com/blog/)中搜索最新信息。

* * *

DevOps 这个术语最近得到了很多关注，这是有原因的:采用 DevOps 实践有助于团队更有效地工作，交付更好的代码，并让客户更开心。但是随着这个术语越来越受欢迎，我们也看到了一些试图“做开发工作”的团队容易陷入的陷阱。

(该列表基于我们在 11 月举办的网络研讨会[“devo PS:你做错了”](https://www.youtube.com/watch?v=hdxj5O-a58E)，我们的首席技术官 Rob Zuber 和 Waffle.io 的创始人 Andrew Homeyer 出席了会议。)

*1。你有一个“DevOps”团队*

DevOps 的概念是为了抵消开发和运营团队之间经常存在的“围墙心态”，作为一种想象这些团队更加紧密地合作并看到他们拥抱彼此的一些实践的方式。因此，如果做得好，开发运维是整个工程组织采用的一种文化转变——而不是一个团队“做开发运维”DevOps 的真正挑战是让您的开发人员像运营商一样思考，反之亦然。

*2。你已经不再试图缩短发布周期*

如果 DevOps 的意思是出货快且经常，那么多快才算够快？真的要看情况。迁移到 DevOps 意味着逐渐接近完全连续的部署模式。如果你在一家企业，每六个月出货一次，八周可能感觉真的很快。但是，如果你是一家初创公司，八周是一个迹象，表明你可能会一次交付大量的工作。不要衡量你多久释放一次，而是开始衡量每次释放有多痛苦。当一件事情完成后，你能部署它吗？如果答案是否定的，那么你能做些什么来消除这些障碍呢？你能把代码分成小块吗？添加特性标志或切换怎么样？最终，部署代码应该是一个非事件。虽然八周可能是大型组织的目标，但我们往往会看到一系列的阈值:一旦团队每周部署一次，就更容易转移到夜间部署。在那之后，我们开始看到部署迅速增加到每天 20 到 30 次。这是事情真正开始变得连续的时候。

*3。您将开发团队视为成本中心*

人员配备是昂贵的，开发人员可能是公司雇佣的最昂贵的员工之一。许多组织认为这种开销是可以控制的，但这不是正确的思考方式。公司不应该只考虑成本，而应该专注于最大化开发者的生产力。做到这一点的最好方法是确保开发人员做他们感兴趣的工作。事情是这样的:工程师加入你的组织，因为他们想解决有趣的问题，即:你的业务的问题。所以你能做的最好的事情就是消除一切阻碍他们解决问题的因素。最大的罪犯？无效的工具。当开发人员在快速的周期中交付并看到他们的工作对客户的影响时，他们对自己的代码有了更多的所有权，并且更有动力尽可能地做出最好的工作。通过向他们提供无摩擦的工具和反馈丰富的工作环境，您可以最大化开发人员投资的回报。

*4。通过自己构建一切，你在做无差别的繁重工作*

无差别的繁重工作指的是任何占用你时间但不是你业务核心的艰苦工作。举个极端的例子，你不会建立一个新的电子邮件程序，因为你想给你的同事发电子邮件；你可以注册 Gmail。同样，你不会收获自己的咖啡豆，因为你需要咖啡因来工作。当你处于构建还是购买的争论中时，问问你自己，“在内部做这项工作会给我们的客户带来直接的价值吗？这是我们不能外包的业务秘密吗？”如果其中一个或两个问题的答案都是否定的，那么考虑引入一个工具。其他人已经把你无差别的重活变成了他们的生意。所以站在那些已经完成工作的人的肩膀上，专注于你业务的核心。

*5。您没有任何测试*

DevOps 背后的业务需求是团队可以更快地一起工作。加快交付节奏的一个方法是通过自动化测试减少部署新代码时的偏执因素。将验证的负担从手工测试转移到自动化测试是一项时间投资，但是它可以让您以指数级的速度部署代码。自动化测试向您保证您检查的正是您上次检查的内容，并且让您感到安全，即使其他人已经对代码库进行了更改。

*6。您有太多的测试*

测试越多越好吗？也许吧。在 Andrew [Homeyer，Wafflie.io]之前的团队中，一套 Selenium webdriver 测试花了 8 个小时。该套件包括几个非确定性测试，这些测试有时会因为随机原因而失败。这样的测试能提高你自信部署的能力吗？大概不会。一个比“你有多少测试”更好的问题将会是“在你与 master 合并后，离开你的电脑你感觉舒服吗？”拥有一套专注于您的核心业务价值的快速、可靠的测试将让您有信心无所畏惧地进行部署。

7 .*。一切都很紧急。你总是被打断。*

持续是伟大的。非紧急问题的持续解决？不太好。人们越来越依赖实时聊天，随之而来的是一种隐含的期望，即你会对收到的每条信息做出回应。如果你有需要处理的操作问题，最好能联系到团队中的每个人。但是决定如何最好地投资你的时间也很重要，然后相应地安排你的一天。毕竟，持续模型的目标是将开发人员从持续的冲突中解放出来。

*8。你花时间合并*

如果合并总是花费大量的时间和大量的协作，那么你就做错了开发工作。过去，融合在一起需要做大量的工作:事物不断分化，软件中存在熵，而你想要控制它。因此，你越容易看到你的代码如何与他人的代码交互，你就能越快地对出错做出反应。当你以更小的增量做每一件事时，管理和从任何问题中恢复会更容易。许多开发人员在合并时都有过在一个松散的渠道中“众志成城”的经历。懈怠对于紧急情况非常有用。如果你的紧急情况是“合并”，松弛不应该是答案。采取不同的方法:例如，持续集成或基于主干的开发。找到最小化与他人代码合并的增量的方法。

*9。部署吓到你了*

部署应该不成问题。当您采用连续交付实践时，您如何使部署代码更安全？通过实现测试，是的，但是也通过思考当某些事情出错时会发生什么。团队应该花时间练习快速回滚。你能在 30 秒内修复吗？太棒了。通过练习这些解决方案，你将知道当紧急情况发生时如何迅速采取行动。

10。您的开发人员不关心生产中发生的事情

DevOps 是关于缩小差距的——不仅是开发者和运营之间的差距，也是你的团队和客户之间的差距。你如何让开发人员更关心生产中发生的事情？消除代码和客户所见之间的任何责任转移。换句话说，让开发人员自己做 QA。这是缩短反馈循环产生全面更好代码的另一种方式。当开发人员是代码到达客户手中的最后一站时，他们直接看到了失败的影响，并且这些失败是个人的。为了完全确信他们的代码能够工作，他们希望在部署之前不只是粗略地浏览一下代码。编写更好的测试成为一种对他们的工作表示自豪的方式，并确保它如预期的那样工作。让开发者更接近最终用户，让他们直接看到他们所创造的价值，这是有感染力的。开发人员最初进入这个行业的原因是早上创建东西，下午看到产品的兴奋感，所以为这个循环的扩散扫清道路是保持开发人员快乐和高效的关键。

不管你练习 DevOps 方法论有多长时间，总有改进的空间，并且有很好的理由这样做。集成更多的 DevOps 实践有益于整个组织，而不仅仅是工程团队。是的，DevOps 是为了让开发人员能够更快地行动，看到他们工作的结果，并在必要时做出快速的改进或修复。但是，通过授权开发人员更充分地拥有他们的工作，您不仅创建了一个快乐的工程团队，而且创建了一个可以专注于创建更快乐的客户的工程团队，这对整个组织来说是一个胜利。