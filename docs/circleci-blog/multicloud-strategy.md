# 多云策略适合您的组织吗？圆环

> 原文：<https://circleci.com/blog/multicloud-strategy/>

在过去的几年里，许多开发团队已经用云托管的基础设施取代了传统的数据中心。云的采用持续增长，团队正在更新应用程序以利用基于云的服务。但是对于许多组织来说，采用单一的云提供商来托管他们所有的应用程序和数据会使他们的业务面临风险。为了降低这些风险，一些组织正在以一种特别设计的方式在多个云提供商之间分配资源。

本文探讨了采用多云策略的一些驱动因素、好处和缺点。在跨云提供商工作时，您还将获得一些关于构建环境的最佳方式的建议。

## 什么是多云策略？

多云战略不仅仅是将工作负载放在多个云提供商处。正确的多云策略意味着要具体设计和部署资源，包括规划跨多个提供商部署服务时采取的方法。这种策略可能需要使用纯粹基于消费者的提供商(如 AWS、Azure 和 GCP)，在同一提供商内使用不同的云，或者包括混合的私有云提供商。重要的是使用多个云提供商时的意图和要求。

多云服务的常见架构包括:

*   跨提供商和负载平衡器部署容器化的应用程序或服务，以实现“永不停机”的环境。
*   按业务功能分组的服务，分布在云提供商之间，每个服务都有冗余的冷启动组件。
*   面向每个云提供商的同类最佳或技术一致的应用程序或服务组件。

这些架构需要一些战略思维来确保模式被一致地实现，并且与业务目标一致。多云战略还必须与受影响的应用和服务的架构和设计保持一致。

## 多云策略的优势

组织采用多云策略的原因有很多。大多数组织迁移到多云环境，以降低单一云环境的风险。其他团队可以选择多云策略，以便利用不同提供商的优势和技术堆栈。根据这些驱动因素，采用多云策略有三大优势:

*   弹性
*   灵活性
*   服从

### 弹性

许多组织为世界各地要求应用程序和系统全天候运行的客户提供服务。拥有弹性环境对于防止服务中断(包括云供应商环境中断)至关重要。即使是最大的云提供商也有中断的时候，比如谷歌、T2、Azure 和 T4 的 AWS。

确保关键服务不会随云一起关闭是多云方法的一个重要优势。有时，甚至在不同的云提供商上提供冷备份服务也可以补救这种情况，以便组织可以实施长期修复。例如，让 web 应用程序节点分布在多个供应商的云上，可以在某个供应商出现故障时保持您的服务正常运行——尽管资源减少了。即使将服务部署到处于空闲状态的辅助云中，但您可以在需要时打开它，这也提供了一种简单、快速的修复方法，直到问题得到解决。

### 灵活性

当第一次将工作负载迁移到云环境中时，大多数组织会选择最符合他们大多数标准的单一提供商。但是，随着这些工作负载的增加，对该单一供应商服务的依赖也在增加。供应商经常改变他们的策略、服务、协议和定价模式。局限于单一供应商可能意味着不一致、成本增加、错过更好的产品或被迫更新应用和服务。在云环境中移动和创建工作负载很容易，但是如果移动是无计划的，则移动工作负载会很困难且成本很高。

采用多云策略来设计应用和服务可以最大限度地减少供应商锁定。使用相同的技术堆栈和特性，如[容器化](https://circleci.com/blog/benefits-of-containerization/)，可以轻松有效地跨云环境设计和部署相同的服务。它还使组织能够选择最专业的云服务，从而提供显著的优势。

尽管如此，在使用多云策略时，确保所选选项的灵活性是至关重要的。例如，Azure Functions 是一个事件驱动的、[无服务器](https://circleci.com/blog/serverless-vs-containers/)计算平台，您的团队可以使用它来构建和部署服务，而无需调整规模来满足需求。您的团队还可以将这些功能部署到容器中，并在 Azure 之外托管它们，从而在需要时提供更改服务的选项。

### 服从

与避免供应商锁定一样，许多组织对 [IT 系统合规性](https://circleci.com/blog/automate-software-delivery-compliance/)有特定的要求。这些合规性要求可以涵盖数据隐私或主权问题，包括灾难恢复和缓解规范。

通过采用多云策略并结合评估服务和数据的合规性要求，您的组织可以为关键组件建立特定的环境或架构。个人身份或财务信息等敏感数据集可能需要存储在强化的私有云环境中。数据安全性要求允许公共云环境中托管的应用程序以特定方式查询数据。

## 多云的缺点

虽然采用多云策略有一些重要的好处，但您应该意识到两个潜在的缺点:增加成本和环境复杂性。这些缺点可以通过本文前面描述的优点来克服和抵消，但是对于没有做好准备的组织来说，它们也可能成为问题。

### 复杂性

考虑到可用服务的广度，采用单一云提供商可能会增加员工的学习曲线。采用第二个云提供商可能会使 IT 人员必须学习的服务、其他多云系统和流程的数量翻倍。对于资源有限的组织来说，确保人们了解多云环境是一项挑战。这些类型的环境通常需要专门的平台工程或跨职能 IT 运营团队来保护、管理和优化多个部署目标和具有各种集成的技术堆栈。

### 费用

采用多云策略的第二个潜在障碍是总体成本。即使当前的资源基本上在提供商之间分割，环境之间的额外流量和管理层也会增加一些成本。不了解提供商之间的成本差异，尤其是在采用技术时，也会导致不必要的支出。

在计算转向多云的价格时，请确保将雇佣或培训员工的成本计算在内，以涵盖这两种环境。此外，一定要考虑未使用资源的成本，当环境的复杂性阻碍了所有资源的可见性时，可能会出现这种情况。采用多云可以节省一些成本，但这通常不是采用多云策略的主要原因。

## 你应该采用多云策略吗？

什么时候是考虑采用多云策略的合适时机？这个问题很难回答。由于采用多云策略会增加复杂性和成本，因此应该有一个重要的业务驱动因素可以解决。如果没有这种合理的、当前的业务需求，组织可以承担大量的复杂性和成本，而没有显著的优势。

这些业务驱动因素的例子包括:

*   与不符合行业或法律要求相关的重大风险或成本
*   需要工具、服务和技术的更大灵活性，以提高开发速度
*   希望减少跨多个供应商的集装箱化服务套件的停机时间

这些例子仍然需要显著的提升和坚实的技术资源，以确保您的团队能够有效地采用这种策略。

## 如何在 CI/CD 工作流中管理多个云部署

采用多云策略需要在多个不同的环境中一致地部署应用和服务。以下是设置 CI/CD 工作流以从多云环境中获得最佳效果的一些提示:

*   开发一个所有团队都尽可能遵循的标准化管道部署策略。
*   确保部署尽可能模块化，以便在团队将组件部署到不同供应商时可以互换组件。
*   采用提供多云支持的基础设施即代码模板，如 [Terraform](https://circleci.com/blog/an-intro-to-infrastructure-as-code/) 和 [Ansible](https://www.ansible.com/integrations/cloud) ，以确保基础设施的最小重新配置。
*   使用发布管理工具来确保正确的构建到达合适的环境。

## 摘要

采用多个云供应商有几个好处，但可能相当具有挑战性且成本高昂。如果没有明确定义的策略，这种复杂性和成本会很快失控。有意采用多云并客观评估组织的技术成熟度是确保成功的关键。

CircleCI 支持构建 CI/CD 管道，将应用程序和服务部署到多个云。[立即注册免费账户](https://circleci.com/signup/)并[了解更多关于如何为多云环境准备管道的](https://circleci.com/docs/2.0/about-circleci/)。