# 软件交付创业创始人指南

> 原文：<https://circleci.com/blog/startup-founders-guide-to-software-delivery/>

2 人团队的软件交付与 200 人团队的软件交付有很大不同。在创业公司的成长过程中，流程和工具的选择会自然发展——但要么过早优化，要么在没有明确方向的情况下让它们发展，可能会耗费你的时间和以后的敏捷性。这就是为什么我想和你谈谈如何有目的地改进你的交付过程。

软件交付的最佳方法依赖于您的软件架构，正如我们从康威定律中所知，这反过来又与您的组织结构相关。在整篇文章中，我将根据您在关键转折点上做出的决策，深入探讨这些因素是如何帮助您实现快速增长还是在扩展过程中设置障碍的。

完全披露:我是一家 CI/CD 公司的首席技术官，因此我将在本指南中鼓励您使用 CI 和 CD。在我将列出的许多其他策略中，我将解释为什么开始使用 CI/CD 永远不会太早，尽管它可能影响的领域将随着您的创业公司的成长过程而变化和发展。

### 你为什么要听我的？

作为一名 20 年的软件行业老手、四次创业的创始人和三次首席技术官，我知道时间是创业公司最宝贵的资源之一。过早地做出错误的选择，你会失去试图解决本可以避免的问题的宝贵时间。我已经看到了正确的选择如何能够带来巨大的回报，以及在哪里要对过度架构保持高度警惕以应对每一种可能发生的情况。在过去的 7 年里，我一直领导着 CircleCI 的工程团队，从成千上万使用我们的平台来简化和加快软件交付的组织中，我毫无疑问地看到了什么是有效的，什么是无效的:对于每个阶段的公司，以及每个行业。

## 创建阶段:1-10 名工程师

这是我最喜欢的公司发展阶段。你很兴奋。你有主意了。你最不想做的就是工具。在某一点上，您正在手工将您的第 20 个变更部署到您的初始环境中。你可能会想“这不可能是做这件事的正确方法。”你是对的。尽管从技术上讲，您可以这样操作，但现在是将 CI 和 CD 放在适当位置的时候了。在一个公司的早期阶段，你甚至可能没有进入正确的行业，但是快速的交付和对你的发布的信心将有助于你到达那里。

这个探索阶段要求简单。在这种规模下，协调成本很低，所以要充分利用这一点:一个团队，一个完整的代码库，一个基本的(自动化)部署。

你不想停下来问你的联合创始人:“嘿，提醒我一下 Capistrano 命令？”或者“我刚才是不是在你推的上面推了一把？”

你不希望你的笔记本电脑成为“构建笔记本电脑”,当有人想开发代码时，他们必须来找你。

只需点击一个按钮，您就可以拥有 CI/CD。别给自己添堵了。CircleCI 有一个[免费计划](https://circleci.com/signup/)。使用它。

仅仅这一步，即使你现在不“需要”(我会试着让你相信你需要)，这一步也会让你在以后的道路上遥遥领先。当事情变得真实时，您遇到了一个让您措手不及的安全问题，或者您确实有客户并且正在解决大规模问题，您可以发布一个补丁。

这比“罗伯在吃午饭，我们不能部署”好多了

### 做什么

*   **现在就实施 CI/CD。**您的应用变化很大，您想尽快了解。不要浪费时间试图记住如何安全部署。当您的系统开始变得更加复杂时(我将在后面解释为什么您应该尽可能推迟复杂性)，您将拥有处理复杂系统的实践和工具。

*   保持简单。CI 和 CD 很容易到位。获取谷歌分析并设置 CircleCI。在这个阶段，这可能就是你所需要的。但是没有它们是一个巨大的问题。没有这些基本工具，你就给了你的竞争对手巨大的优势。建立一家公司，关键在于执行力；获得可靠执行所需的工具，将其余的事情搁置。

*   创建占位符实现。这基本上意味着推迟复杂性，但尽早启动支持工程组织复杂部分的流程。可追溯性是一个很好的例子，它是一个相对容易在一个整体中建立的过程，但是一旦你的应用程序已经扩展到包括服务时，就很难把它放进去了。何必呢？拥有可追溯性推动了某些行为和决策。因为甚至有一个简单的实现，你会在你构建的所有东西中考虑可追溯性。尽早实施这些实践实际上会改变您的编码方式。你将会在你的代码库中减少异步交付，或者你将会以一种你以后更容易理解的方式来设计它们。

*   **思考，不行动。**知道你未来的限制是什么或可能是什么并不意味着你必须去适应它们。建筑贵，思想不贵。在做出决策之前，仔细考虑一下您的扩展路线图，这样您就可以有意识地权衡您要推迟到未来做什么。

*   从一开始就优先考虑可操作性。创业公司的第一个开发者应该已经承担起思考软件运营的责任。这在第一行代码中应该很明显。例如，选择可以将输出重定向到中央系统的日志库的工作可以忽略不计。当您这样做时，构建您的日志记录，并在构建时删除或构建您用来调试的日志点。

红利投资者提示

**Keep the architecture and tooling as simple as possible.**

复杂性是杀手:它扼杀速度、文化和产品速度。一个好的构建工具可以帮助团队自动化过程，实践良好的卫生习惯，等等。虽然像 CircleCI 这样的工具确实可以扩展，但现阶段的初创公司应该专注于使用他们知道的最好的工具，这些工具可以轻松地集成到开发人员的工作流程中，让生活变得更轻松。发货和招聘速度是早期成功的最佳预测，所以使用 CircleCI 有助于这一点，因为它是开发工具中使用最广泛的 CI/CD 平台之一，人们理解它并喜欢使用它。这有助于加快运输速度。

*Shomik Ghosh, Principal, Boldstart VC* **Automate core building blocks as much as possible.**

滚动你自己的 CI/CD 工具对于你的创业公司的目标是无差别的，这是将建立在上面的业务逻辑。对于这样的事情，尽可能多地使用自动化流程。以后的扩展将意味着需要有一个真实的来源来帮助团队间的协调。CircleCI 也能帮上忙。然后，当你成为一家后期公司时，你需要一些能够轻松集成所有不同工具的东西，并消除新开发人员入职时的摩擦，因此任何有助于这一点的产品都是有用的(再次 CircleCI)。

*Shomik Ghosh, Principal, Boldstart VC* **Have comprehensive and thoughtful test coverage from day one.** **Pay down tech debt from day one.** *Andy Vitus, Partner, Scale Venture Partners*

### 不要做什么

*   **抄大玩家。**你解决不了与网飞、谷歌或脸书相同的问题。他们所关注的进步甚至不太可能转化到你的环境中，更不用说作为直接的拷贝了。尽可能保持简单和灵活。希望有一天你会到达那里，但是今天不是那一天。

红利投资者提示

**Don't let gross margin deteriorate and plan to ‘fix it later’.** **Don't add unnecessary complexity.** *Andy Vitus, Partner, Scale Venture Partners*

## 非常早期的阶段:10-20 名工程师|寻找适合市场的产品

在您公司的这个阶段，您可能没有专门负责开发效率或工具的人。你可能会，但这并不常见。更有可能的是，每个人都在为这项事业做贡献。并且您的团队将从延迟创建专门的开发体验或工具团队中受益。

为什么？因为在这个阶段，你将通过推迟专门团队的工作，将这种心态融入你的文化中。让每个人都负起责任，比依赖一个人要走得更远。然后，人们正在创建可以跨团队共享的工具、过程和代码。

在 10-20 个工程师中，你有一些实践，你保持你的软件简单。你会发现产品符合市场。那是基准。一旦到了那里，就可以投资了。

在产品符合市场需求之前，你构建的所有东西都很有可能被抛弃——我们的目标是尽可能简单地构建，这样你就可以轻松地改变或抛弃这些东西。一旦你适应了，你就可以开始投资了。

这是一个尴尬的阶段，你试图管理你独立工作的能力，而不在你的操作环境中制造不必要的复杂性。你应该分成小组吗？对于一个团队来说，人太多了，但是你的优先级仍然在变化。但是做同样的事情确实感觉很麻烦。

> 在 10-20 个工程师的时候，你会被诱惑去建立服务，但是现在还为时过早。您将增加不必要的部署复杂性，这是您以后要付出的代价。

相反，用组件和库创建边界和稳定性。无论您最终使用的是库还是您的 monolith(即模块化 monolith)之间定义明确的边界，您仍然可以将它们整合在一起并以 monolith 的方式部署，这将为您提供更多独立操作的空间，同时保持您的部署简单。

将您的代码库分解成服务将增加一个全新的决策层:您应该使用哪种服务间通信？您应该如何进行服务发现？还是重试？你的第一次服务会带来巨大的成本和复杂性。

所以推迟吧。

您将想要改变您的持续集成(CI)过程而不改变您的持续交付(CD ),或者换句话说:改变您的构建模型而不改变您的部署模型。

### 做什么

*   保持部署简单。让您的构建和部署尽可能简单。抵制创建服务或过度复杂化任何可以推迟的事情的冲动。

*   **保持效率和生产力**随着你的成长超过两块披萨的数量。寻找更灵活的方法来创建独立的工作流，而不需要具体的团队定义。

红利投资者提示

**Expose engineering to customers' feedback.**

你需要一个工程团队来理解为什么客户需要一个给定的特性，以及它能解决什么问题。大型产品管理团队有时间和地点来管理信息，围绕核心原则关注团队，并保持产品组合的一致性，但不是现在(GTM 早期)。随着产品与市场契合度的提高，您可以通过优化客户和工程之间的直接沟通渠道并保持紧密的反馈循环来充分利用您的小团队。

*Eric Anderson, Principal, Scale Venture Partners*

### 不要做什么

*   **微服务。**构建可以使用组件或库的服务会产生部署开销，这种规模的团队不应该处理。推迟。

## 早期:20-50 名工程师

在你成长的这个阶段，你可能已经有了产品团队。你开始寻找分解产品的方法，这样团队可以独立运作。当您到达这个阶段时，您将看到跨工具共享组件和实践的投资回报。能够跨团队共享模式不仅节省了前期实现时间，还将减少下游的维护负担。(这就是为什么我们建立 CircleCI [orbs](https://circleci.com/orbs/) 的原因——因为在公司的这个阶段，跨团队共享配置是一个巨大的增值)

现在，你可能正在考虑解散你的团队以适应不同工程师的语言偏好。您可能想知道让每个开发人员用他们认为最好的语言工作有什么坏处。

不要这样做。

是的，看起来你今天会走得很快，但是明天你肯定会慢下来。工程师很容易将速度的定义与编写的代码量联系起来。我们可能会觉得我们走得很快(“我知道铁锈！我写了很多代码！”)但是如果你或你的工程师正在编写样板文件，那么这是你应该使用库的一个标志。

在这一点上，交付价值必须是最重要的，而不是代码行。

20-50 工程师阶段是你开始崩溃的时候。投资于对抗团队分裂的能力。devops 中有一个词叫做“铺路”这意味着，当然，你可以步行上山砍树，或者你可以开车上高速公路。您提供的工具(即 CI/CD 工具)应该使您的工程师能够容易地选择好的路径。如果你组织中的人没有，你可能没有设定正确的目标。

> 我试图使用 Rust，因为我看到了一个很酷的 YouTube 视频，这对我来说应该是痛苦的。

你如何铺一条路？构建共享组件。

如果是语言堆栈，就在一个整体中工作。在 CircleCI，我们有一个已经测试过的预罐装 Docker 容器。如果您需要在 CVEs 上保持最新，我们将这一点内置到 Clojure 管道中。我们有后端共享部分，人们可以用它在 Clojure 中构建服务。每个人在项目开始时做的所有事情，我们都有，你可以把你正在做的东西投入生产。如果有安全更新，你可以免费获得。但是:如果你想开发围棋，你的团队需要从头开始。

你签约的目的是为你的客户提供价值。不管你用什么语言写了多少代码，这仍然是底线。让你的团队轻松实现它。

### 做什么

*   **标准。**和短绒。编码标准没什么意思。讨论编写代码的方法(从讨论缩进到括号)是人们可以转动轮子的又一件事情，但没有增加价值。选择一个标准，执行它。继续传递价值。

*   自动化你的文化。将您对软件的所有描述放入 CI/CD 中。你关于如何做事的决定现在已经嵌入，并自动执行。这就是为什么你想一开始就使用 CI/CD——它给了你一个放置规则的地方。

*   在需要的地方创建占位符。举个例子，有免费的漏洞扫描器；就用它们吧。构建编码标准和实践的文化。将它们全部添加到您的 CI/CD 中。以后，当你升级你正在使用的服务时，你就有了一个可以插入这些付费服务的地方。这一阶段很容易做到，但以后很难添加。

### 不要做什么

*   完全重写。你可能在反思，作为一个团队，你现在比你第一次编写代码库时知道了多少，并且很想从头开始，用你所有来之不易的知识重写你的代码库。忍住冲动。事情会变得混乱，但是继续努力。作为一家企业，你正在大步前进。控制混乱，边走边清理，但是不要因为大量的重写而停止你的进程。

*   **假设共享上下文。**最多 20 人左右，你还没有分成团队，所以你可以假设人们有上下文(那是一个黑客——不是一个策略)。再大一点，你就不能假设每个人都有相同的背景。投资共享环境。用工具来加强这一点，例如，如果您没有正确地注释，就会使 CI 中的构建失败。确保人们理解为什么要强制执行。它将使你免于编写没有人会阅读的无限文档。使用测试作为共享上下文的例子，测试是预期行为的表达。但是很多时候你阅读旧的测试，不明白为什么他们会那样。如果您破坏了一个测试，但是没有文档或错误消息，您如何知道它是否可信呢？

## 中期:50-150 名工程师

现在你长大了。

你不能再抗拒了:你可能会得到一些服务。

你的软件已经变得足够复杂，为了提高交付速度，你的管道数量也增加了。您可能想要分离工作单元。在你彻底分裂之前，集中精力找出你的交付管道和方法中的模式，这样你就不会制造混乱。

当您进入服务领域时，继续尽可能地管理压裂。挑一件事，把它做好。弄清楚单个服务的构建和部署管道是什么样子，而不是同时为十个服务构建和部署管道。一致性是游戏的名字。这里不是百花齐放的地方。相反:制定一个标准，然后复制。

像对待任何软件设计一样对待您的管道设计。构建一次，试用，再次构建，做一些复制粘贴。找出哪里出故障了。使用规则三:在第三种情况下，你可以建立一个抽象。在此之前，试图建立一个“完美的”抽象是浪费时间，因为你还不了解它。无论如何，你都会燃烧周期并出错。第一次尝试构建完美的抽象所花费的时间是浪费时间。

另一件事:加强结构和一致性的随机社会互动在这个规模开始失效。因此，人们只关注他们团队的效率，因为他们不知道其他团队在做什么。

你可能会拥有一个专门的开发经验和工具团队。与此同时，让一个团队提出一个解决方案，然后将它分发给所有其他团队，这可能是弥合差距的一种有效方法。这种方法也避免了建立一种交付是其他人的问题的文化的风险——分担这些责任使整个团队参与到结果中。

### 做什么

*   **投资于跨交付渠道的一致性。**这里的诀窍是找到分配真正所有权的平衡，同时不让团队的其他成员认为这是其他人的责任。保持一种文化，在这种文化中，每个人都相信有效的软件交付是他们工作的一部分，然后给一些人所有权，使之成为现实。否则，每个人都在自己的团队中解决自己的问题，重复工作，失去了共同的经验教训。

### 不要做什么

*   让团队自由支配。不要被让每个人独立运作所带来的错误的速度感所迷惑——几十个团队创造数百种当地效率的代价是长期的复杂性。

## 成长阶段:150-500 名工程师

在这个阶段，你创造的所有占位符和你在过程中实施的文化开始真正得到回报。

你正以惊人的速度成长，所以任何基于你之前的决定而轻易获得的东西都将是一个巨大的优势。起初，你有一个暗示，你想做一些事情，并为它留下了空间。然后你用一个免费工具取代了那个空间，然后是一个付费工具，然后是一个人，然后是整个团队，这一切都是因为你深思熟虑地给那个团队留了一个可以插电的地方。在这一点上，你可能有一个团队(SRE，开发者体验，发布工程，等等。)负责为您的工程组织的其余部分考虑工具，这是一个真正的转换点。

对此不要过于教条。

找到一致性带来最大价值的地方，以及它将创造更多开销而不是价值的地方。平衡强制一致性和让人们把事情做好。将您的共享工具专家放在您的团队最常使用的项目上，而不是放在某人做某件事两次的每个实例上。在某些时候，开销会超过一致性的价值。知道在哪里让这种情况发生是一个真正的挑战——永远要知道你的权衡。

### 做什么

*   投资于系统和流程，而不是个人关系。你已经过了仅仅通过观察一切就能理解正在发生的事情的阶段。现在是系统在让事物运转，而不是人。

    当你正在完成从个人关系到系统的转变时，弄清楚你的操作工具将如何工作。在短期内，你会得到更好的反馈。不可否认，为设置这个工具构建业务案例可能很难，但是这也是早期做起来非常便宜并且越做越贵的事情之一。从小处着手。每天做一点。继续走。

    清晰的团队边界是必不可少的，这样你就可以部署你的服务，而不管系统中其他地方发生了什么，也不管你在和谁打交道。这就是自主的真正价值所在:你可以专注于完成工作，而不需要与特定的人打交道来铺平道路。

红利投资者提示

**Make time to address and work down technical debt.**

技术债务是你无法避免的。如果你不解决这些问题，它们迟早会复合并成为一个更大的问题。技术债务通常以几种不同的方式出现。4-5 年后编写的任何软件中的架构和技术债务。鉴于云原生技术的快速变化率，使用传统技术的软件在架构上也会有缺点，这使得它难以扩展和伸缩。

随着时间的推移，软件积累了代码债务。开发人员并不总是用定义良好的接口和 API 来编写干净的代码。软件也积累了测试和文档债务。很少有开发人员充分地记录他们的代码或编写具有足够覆盖率的测试。

鉴于你无法避免技术债务，最好的方法是积极主动地解决它。大多数优秀的软件团队每 4-5 年就会领先预算 6 个月，这时他们会停止添加任何新功能，只专注于解决技术债务。

*Jai Das, President & Managing Director, Sapphire Ventures*

### 不要做什么

*   **奖励英雄。**你再也找不到专家让他们修理东西了。在这一点上，如果你没有工具来管理某些东西，你就有麻烦了。这看起来像是好的文档、清晰的工具和处理问题的清晰过程。不要再修补船了；您需要健壮的基础设施和操作工具。不要让你的团队依赖个人关系来完成工作。

*   尝试解决所有问题。现在你有 150 多名工程师在一个系统上工作。自从你有 10 个工程师以来，你的代码的某些部分将保持不变。别人每天都会主动被感动。先担心那些。你更有可能打破遗留的(也就是传说中的)代码，而不是改进它。如果人们每天都在处理它，那么先解决它

## 关闭思路——随着成长不断创新

由 500+工程师，恭喜你:你不再是一个创业公司。你做得太棒了。你已经成为一个了不起的软件交付组织，所以现在不要放弃。要知道每一个比你大的软件组织都试图像你一样运作，所以不要陷入他们缓慢的遗留过程的世界；继续做模特。

随着您的不断成长，具体的实现将会发生变化，但是不要忘记让您实现这一目标的方法。不要放弃你的 CI/CD 文化。是的，你需要更多的系统和过程，但是你会用你一直应用于任何新工具或过程的同样的眼光来采用它们:实现速度。

随着规模的不断扩大，像审计员这样的新的利益相关者会对你这个组织提出要求。理解他们需要的结果，但是不要认为你必须按照他们的建议去做。他们并不处于软件开发的前沿。作为一家成功的初创公司，你已经取得了这么多的增长。构建工具，使之成为一个令人敬畏的软件团队成为可能。不要因为担心以你的体型操作而掉下火车。

感谢阅读。如果你能够实现我在这里分享的一些想法，你将成为世界上最高性能的软件交付组织之一——这是非常值得骄傲的事情。

好奇度量如何让你的团队专注于价值交付？在我们对 CircleCI 上超过 44，000 个组织和 160，000 个项目的超过 5，500 万个数据点的分析中，我们发现了我们平台上最高绩效团队共享的 4 个关键基准。[立即下载 2020 年软件交付状态](https://circleci.com/resources/2020-state-of-software-delivery/)了解更多信息。