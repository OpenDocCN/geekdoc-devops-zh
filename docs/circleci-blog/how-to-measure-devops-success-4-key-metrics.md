# 如何衡量 DevOps 的成功

> 原文：<https://circleci.com/blog/how-to-measure-devops-success-4-key-metrics/>

## 用最新的软件交付数据衡量开发运维的成功

为了衡量 DevOps 的成功，您需要行业基准来量化关键的软件交付成功度量。**今年，我们基于来自我们平台上 44，000 多家组织的 5，500 万个数据点，为实践 CI/CD 的团队设定了[首个基准](https://circleci.com/resources/2020-state-of-software-delivery/)。从数量上看，高绩效的工程团队是什么样的？**

作为世界上最大的独立 CI 提供商，我们有一个独特的机会来定量调查软件交付的情况:在数万个团队中，逐个提交。有了真实的交付数据，我们可以看到团队是如何在实践中构建和部署软件的。

你的团队的交付能力是一种竞争优势。你应该瞄准哪些数字来保持领先？

*下载 [2020 年软件交付状态:工程团队的数据支持基准](https://circleci.com/resources/2020-state-of-software-delivery/)了解最成功的团队如何更好更快地构建。*

## 衡量您团队的 4 个关键基准

我们关于工程团队绩效的综合数据为高绩效软件团队确定了以下四个基准:

*   **吞吐量**:大部分时间或所有时间，工作流运行的数量不如处于部署就绪状态重要
*   **持续时间**:团队希望工作流持续时间在五到十分钟的范围内
*   **平均恢复时间**:团队应该致力于通过在一小时内修复或恢复，从任何失败的运行中恢复
*   **成功率**:90%以上的成功率应该是你默认应用分支的标准

衡量这些成功指标的目的是什么？让我们更深入地了解这些指标的含义，以及为什么它们对您的团队如此重要。

## 关键指标:持续时间

持续时间定义为工作流运行所需的时间长度。这是列表中最重要的指标，因为创建快速反馈周期(包括吞吐量和平均恢复时间)取决于持续时间。换句话说，你不能推动一个修复，即使是一个非常需要的修复，比你的工作流运行的时间还要快。持续时间也代表了开发人员获得有意义信号的速度(“我的工作流运行是通过还是失败？”).较短的持续时间需要优化的工作流程。

并非所有工作流都产生相同的结束状态。例如，一些工作流只运行特定的测试，这取决于应用程序代码库发生变化的部分。因此，持续时间不是部署到生产环境需要多长时间的明确度量。它只是衡量工作流结束需要多长时间。

CI 的终极目标是**快速反馈**。失败的构建信号需要尽快传递给开发人员；你不能修复你没有意识到的东西。但是意识并不是唯一的考虑因素。开发人员也需要来自他们失败构建的信息。获取正确的信息来自于为你的软件编写严格的测试。

这里需要强调的是，速度本身并不是目标。一个没有测试的工作流可以快速运行并返回绿色，这是一个对任何人都没有帮助的信号。团队需要能够尽可能快地对失败采取行动，并从失败中获得尽可能多的信息。没有质量测试套件，持续时间短的工作流不会为反馈周期贡献有价值的信息。**目标是丰富的信息和短时间的结合。**

## 关键指标:平均恢复时间

平均恢复时间被定义为失败和下一次成功之间的平均时间。这是列表中第二重要的指标:当你的团队收到一个失败的信号后，他们快速解决问题的能力是非常宝贵的。因为平均恢复时间随着更全面的测试覆盖而提高，所以这个指标可以代表应用程序测试的好坏。

失败的构建、有价值的信号、快速修复、通过构建:持续集成使得这些快速反馈循环成为可能。快速信号使团队能够尝试新事物，并对任何影响立即做出反应。同样，可靠的测试覆盖减少了对将破损代码引入生产代码库的担心，允许您挑战您的工程团队，使他们对他们开发的解决方案具有创造性和灵活性。

## 关键指标:吞吐量

吞吐量被定义为每天运行工作流的平均次数。当开发人员对共享存储库中的代码库进行更新时，会触发工作流。推送至您的版本控制系统(VCS)会触发包含您的工作流的 CI 渠道。

工作流运行的数量表明有多少离散的工作单元通过您的应用程序开发管道。吞吐量的一个组成部分反映了您提交的大小:您是推动许多小的更改还是较少的大的更改？合适的规模将取决于您的团队，但目标是让工作单元足够小，以便您可以快速轻松地调试，但又足够大，以便您可以部署有意义的更改。

我们建议监控吞吐率，而不是设定明确的目标。了解事情发生的频率很重要，吞吐量是提交频率的直接度量。吞吐量的波动可能发生在像 onboarding 这样的情况下，在这种情况下，两个开发人员可能一起完成相同的任务，结果导致提交更少。为您的组织建立基线度量可以为这种类型的影响做好准备，允许您通过这些可预测的事件来预测工程生产率。当您遇到不可预见的情况时，您的基线也能够帮助您确定未完成的工作量。

当一个经过良好测试的应用程序处于可以随时部署的状态时，这是因为每一个新的变化都经过了持续的验证。如果没有一个完全自动化的软件交付管道，一个团队会经常在不合适的时间(例如，星期五晚上)部署紧急事件和消防演习。

有了完全自动化的软件交付管道，更新交付给最终用户的频率(和时间)由您决定:即时热修复；开发时的功能升级；根据您的业务需求对日历进行大规模更改。目标不是每天特定的部署数量，而是通过你的管道持续验证你的代码库。

## 关键指标:成功率

成功率被定义为通过运行的次数除以一段时间内运行的总次数。依赖于主题分支开发(相对于默认分支开发)的 Git-flow 模型使团队能够保持他们的默认分支绿色。

需要注意的一件重要事情是，根据工作流是在默认分支还是主题分支上运行，我们期望看到高可变性的成功。在许多 git-flow 模型中，主题分支是大部分工作完成的地方，因此也是大部分信号生成通过和失败实验的地方。

通过对主题分支的特性开发进行范围界定，我们可以区分有意的实验(失败的构建是有价值的和预期的)和稳定性问题(失败的构建是不受欢迎的)。**默认分支的成功率比主题分支的成功率**更有意义。

## 为您的团队设定 DevOps 成功基准

虽然没有每个团队都应该向往的通用标准，但我们的数据和我们在平台上观察到的软件交付模式表明，对于团队来说，有合理的[工程度量](https://circleci.com/blog/engineering-metrics/)来设定目标。最终，你测量基线并逐步改进这些指标的能力比追求“理想”数字更有价值。

### 了解有关如何通过我们的 2020 年数据报告衡量开发运维成功的更多信息

下载 [2020 年软件交付状态:面向工程团队的数据支持基准](https://circleci.com/resources/2020-state-of-software-delivery/)了解您和您的团队如何在未来扩大您的软件交付。在这里下载[的报道](https://circleci.com/resources/2020-state-of-software-delivery/)。