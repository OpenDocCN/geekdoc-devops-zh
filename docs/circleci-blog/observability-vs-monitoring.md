# 软件开发中的可观察性与监控

> 原文：<https://circleci.com/blog/observability-vs-monitoring/>

为了监控分布式应用程序的行为并跟踪服务故障和停机时间的来源，开发人员通常使用传统的监控技术和工具。然而，这种方法可能无法衡量现代云原生架构的整体健康状况，这种架构可能跨越多个托管环境，并包含数百个微服务。今天，团队可以利用可观察性和监控来发现他们的应用程序架构中的问题，并确保他们的软件按预期执行。

但是理解应用程序健康和性能的这两种方法之间到底有什么区别呢？本文探讨了可观察性和监控的区别，以及如何将它们添加到您的开发工作流中。它还解释了可观察性和监控如何适应软件开发过程，以及它们如何帮助提高您的工程团队的生产力。

*要听 CircleCI 首席技术官 Rob Zuber 与 Lightstep 首席执行官 Ben Sigelman 谈论可观察性如何与自信地交付变革联系起来，请查看[自信提交播客](https://circleci.com/podcast/confident-commit/)的第 10 集。*

## 什么是可观测性？

可观测性的概念起源于工程领域，用于描述通过研究系统的外部输出来理解系统内部状态的能力。最近，开发人员采用了可观察性的概念来描述从一系列组件中捕获和综合数据的能力，以得出关于应用程序状态的有根据的结论。

换句话说，**可观察性**是一个应用程序的质量，它允许团队监督和推理整个系统的健康状况。在设计[分布式系统](https://circleci.com/blog/distributed-systems/)时，促进可观察性是至关重要的，因为它不仅提供了故障发生在哪里的可操作的见解，还提供了故障发生的原因和方式。

可观察性包括软件组件本身和它们之间传输的数据。它通过提供软件系统如何作为一个整体执行的可见性，而不仅仅是作为单独的服务或功能，来帮助建立对云原生应用的信心。为了实现这种整体视角，它依赖于三种类型的遥测数据:日志(事件记录)、度量(随时间测量的性能数据)和跟踪(关于整个系统中数据流的信息)。

可观察性使得跨网络边界收集、存储和分析大量信息成为可能，为开发人员提供了一个环境中正在发生的事情的完整画面——即使涉及多种技术。

## 什么是监控？

**监控**是可观察性的一个子集，包括跟踪重要事件和指标，以便异常、错误和停机时间可以立即被注意到。度量监控包括识别成功的特定标准，并测量与这些目标相关的应用程序的性能。典型的例子是队列深度，但是指标可能包括内存使用、每秒请求数、活动连接、流量或错误。指标有利于报告系统的总体运行状况、触发警报，并提供对应用程序性能的深入了解。

通过监控运行系统的事件和指标，开发人员可以检测到这些系统何时开始偏离正常行为。监控使开发人员能够在问题还很小的时候就迅速发现问题。它还帮助团队理解他们的系统是如何工作的，以及他们的局限性是什么。最后，监控让每个依赖服务或工具的人相信他们的服务水平协议得到了满足。

能够访问监控数据是非常强大的。例如，如果某个微服务的行为不符合预期，了解其底层指标有助于快速诊断问题。然而，为了正确地解决问题的根本原因，这可能源于受影响的服务之外，团队通常需要求助于可观察性工具。

## 可观察性和监控在软件开发中的作用

可观察性和监控在维护基于云的应用程序的弹性方面都起着重要的作用。监控鼓励团队思考哪些度量标准或性能指标对他们的用户是重要的，并使系统就位以确保应用程序满足这些目标。最简单地说，这可能涉及到将有关系统状态的数据输出到存储介质，如标准输出或数据库。在最复杂的情况下，监控可以整合专门用于确保系统保持正常运行或优化延迟或吞吐量等指标的整个框架。

虽然监控有助于开发人员描述系统应该如何运行，并识别何时偏离预期，但可观测性允许他们检测无法通过已建立的度量标准来度量的风险，并且在没有附加上下文的情况下无法理解这些风险——通常称为未知的未知。

可观察性包含有针对性的性能测量，监控提供了更丰富的遥测数据，可以揭示更大的模式和事件之间的关系。这有助于团队快速有效地找到性能下降的根本原因，从而加快分布式系统和多云环境的故障排除、调试和调优。

## 如何将可观察性和监控添加到开发工作流中

在运行基于容器的微服务部署或负载平衡器时，捕获遥测数据对于企业获得所需的可见性至关重要。开发人员可以使用来自日志、指标和跟踪的几个数据点来增加对生产环境的可观察性和监控。

许多云提供商提供内置的应用和基础设施监控工具。例如，[亚马逊 CloudWatch](https://aws.amazon.com/cloudwatch/) 、[谷歌云监控](https://cloud.google.com/monitoring)、 [Azure Monitor](https://azure.microsoft.com/en-us/services/monitor/#overview) 为 AWS、GCP、Azure 上托管的应用和服务提供应用和基础设施监控。

还有许多第三方工具可以帮助您在应用程序中增加可观察性。集中式日志管理解决方案，如 [Graylog](https://www.graylog.org/about) 和 [ELK stack](https://www.elastic.co/what-is/elk-stack) (Elasticsearch、Logstash 和 Kibana)可以帮助团队组织日志文件，并可视化跨多云部署的重要趋势。像 [Prometheus](https://prometheus.io/) 、 [Nagios](https://www.nagios.com/) 和 [Zabbix](https://www.zabbix.com/) 这样的度量捕获工具可以聚合和分析随时间收集的应用程序健康数据。包括 Jaeger[和 Zipkin](https://www.jaegertracing.io/) 在内的分布式跟踪工具允许团队跨越服务边界跟踪用户请求。

一些平台，包括 [Datadog](https://www.datadoghq.com/observability-platform/) 、[蜂巢](https://www.honeycomb.io/)、[相扑逻辑](https://www.sumologic.com/solutions/application-monitoring/#services-auto-discovery)、 [Lightstep](https://lightstep.com/observability) 、 [New Relic](https://newrelic.com/platform) 和 [Splunk](https://www.splunk.com/en_us/observability.html) 结合了度量、日志和痕迹，提供一体化的可观测性解决方案。

选择适合您组织需求的可观察性和监控平台至关重要。监控软件系统因公司而异。

如果您的公司、系统和资源允许，实现完全的可观察性是最好的。但是监控是至关重要的——尤其是当某个指标第一次失去控制时。这种情况对于投资新技术的公司来说非常具有挑战性，比如容器、微服务和 Kubernetes。

## 结论

监控不能代替可观察性。它是可观测性工具包中的一个重要工具。当您的公司完全了解监控的工作原理、如何使用收集的数据制作警报，以及何时针对流程行为和应用程序行为发出警报时，您的开发团队就能很好地交付新功能、观察应用程序的运行状况和性能，并快速自信地修复中断。

为了将这种自信扩展到开发过程的所有阶段，可以考虑采用持续集成和持续交付(CI/CD)解决方案。自动化您的构建、测试、部署和发布流程，并在错误和漏洞进入生产之前快速诊断和解决它们。借助 CircleCI，您可以[集成第三方监控工具](https://circleci.com/blog/create-customizable-experiences-with-circleci-webhooks/)以在开发流程的最早期阶段增加可观察性，并获得对团队绩效的可操作性洞察。首先，[今天就注册一个免费的 CircleCI 账户](https://circleci.com/signup/)。