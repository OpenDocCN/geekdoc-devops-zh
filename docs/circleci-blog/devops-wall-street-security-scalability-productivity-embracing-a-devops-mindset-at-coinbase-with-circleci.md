# DevOps 华尔街:安全性、可伸缩性、生产力:在比特币基地与 CircleCI - CircleCI 拥抱 DevOps 思维模式

> 原文：<https://circleci.com/blog/devops-wall-street-security-scalability-productivity-embracing-a-devops-mindset-at-coinbase-with-circleci/>

**来自出版商的说明:**您已经找到了我们的一些旧内容，这些内容可能已经过时和/或不正确。尝试在[我们的文档](https://circleci.com/docs/)或[博客](https://circleci.com/blog/)中搜索最新信息。

* * *

几周前，我们参加了 DevOps Wall St，这是一个在曼哈顿举行的为期一天的活动，演讲者来自 FINRA、GitHub、Waffle.io、Modus Create 等。来自比特币基地的 Rob Witoff 在一个名为“安全性、可伸缩性、生产力:在比特币基地与 CircleCI 拥抱 DevOps 心态”的演讲中分享了他的想法在这个演讲中，Rob 讨论了将成功与部署数量相关联，杀死雪花服务器，自动化 UX 的良好行为，以及当生产中出现问题时是谁的错(提示:不是部署工程师的错)。

以下是罗布演讲中的一些亮点:

*   (02:00) Rob 分享了比特币基地的统计数据:100 项服务，30 多个国家，600 多万用户，每个工程师每周 4.5 次部署
*   (04:50) Rob 讲述了他在以前的公司中不得不经历的工程变更请求(ECR)流程，以及为什么官僚式的软件开发不能增强能力，尤其是当速度是您生存的核心时。
*   (06:35)“如果你能让你的公司快速发展，不断创新，推出新功能，你就能帮助你的公司生存下去。开发工作做得不好也可能是公司倒闭的一个原因。如果一家公司因为安全问题拖了你的后腿，或者有太多的人与人之间的互动，而不能足够快地行动，你真的会毁掉你的公司。”

*   (08:28)在过去的 12 个月中，比特币基地启动了 149，525 台服务器，部署了 13，146 次，并创建了 45 项新服务
*   (08:45) Rob 讲述了比特币基地的快速迭代和生产力如何让他们成为市场领导者。许多竞争对手已经消失，因为他们无法快速安全地行动。比特币基地的理念之一是让开发人员有能力创新并无所畏惧地发布代码。
*   (09:30)随着比特币基地工程团队的发展，部署的开发人员数量并没有增加。三名工程师占了部署的大部分。因为部署到 Heroku 是如此容易，他们不想让每个人都没有适当的大门进入。比特币基地建立了一个内部工具，在合并到生产之前，需要多人批准变更。随着部署数量的急剧增加，这极大地提高了工作效率。
*   (11:11)比特币基地的 3 个原则:1)每个人都可以将每个经过测试的主机部署到生产环境中，2)生产部署从您的第一天开始，3)生产环境中的故障是失败的护栏
*   (14:00)比特币基地将每月成功的新生产部署作为 KPI。目标是 4 人/周。
*   (15:00)另一个 KPI 是从 PR 到生产的时间。该团队希望将创意和生产之间的每一步都积极地自动化，以使这一过程尽可能地快速和无痛。比特币基地使用 GitHub Enterprise 进行代码审查，通过 circle.yml 文件将安全性集成到 CircleCI 中。安全问题会自动失败。
*   (19:15)比特币基地将 CircleCI Enterprise 与带有自定义 Terraform 脚本的自动缩放组结合使用。Rob 希望计算机为人类服务，而不是相反。人类比计算机贵得多，所以这是一笔不错的投资。CI 是比特币基地运行的最大的集群，但由于使用 AWS 现货市场和按需定价，它并不是最昂贵的。
*   (21:43)大声说出 Gene Kim、凤凰计划和傀儡“DevOps 状态”报告。实施开发运维的公司发现部署频率提高了 200 倍，故障恢复速度加快了 24 倍，计划外工作和返工时间减少了 22%。
*   (24:00)Rob 开源的 [deploy velocity 工具](https://github.com/witoff/deploy-velocity)查看公司部署的频率。企业部署比特币的频率与它们转移的比特币数量之间存在粗略的相关性。这是公司快速发展、快速迭代和持续增长的标志。
*   (26:30) Rob 谈到了雪花服务器和比特币基地的“30 天舰队”时代。没有服务器寿命超过 30 天。不断地重新部署消除了对变化的恐惧，激发了恒定的速度，并且对安全性有好处。不断燃烧和搅动环境以重新部署。
*   (30:15)重新部署>重新配置。
*   (33:00)意外速度。当你在没有护栏或没有充分了解风险的情况下快速移动时会发生什么？在 circle.yml 中添加了主动检查，以便在投入生产之前测试问题。
*   (38:00)当部署失败时，这不是工程师的错。那是因为你没有足够的护栏。护栏=保护你不意外伤害公司的任何东西。希望护栏尽快得到反馈。
*   (44:00)向美国国家安全局学习:你需要比设计者更了解你的环境，比保护者更了解你的环境。“焦土”演习迫使部署自动化和修补系统。因为所有的服务都集成在 CircleCI 中，并通过 CircleCI 运行，所以每天都要扫描所有的服务，看看哪些是过时的。
*   (47:00)护栏作为 UX -当您试图在周五下午 4 点后部署时，会自动发出警告。“非常小心地部署到生产中。”小的强制功能在组织中提供了大量的杠杆作用。
*   (49:00) Infra 的使命是:提供带护栏的自助工具，使工程师能够通过低风险的部署管道快速开发、监控和优化服务。"
*   (50:00)伟大的想法是偶然发现的。总是寻找阻挡者。是什么阻碍了你上一个伟大的想法？尝试积极地自动化拦截器。大多数人永远不会抱怨。他们就是不部署好的东西。如果部署一个伟大的想法太难，大多数人不会去做，也不会告诉你。
*   (56:00)大规模安全性意味着您必须创造一种环境，让人们能够快速完成工作。使用核安全范式——真正的价值受到共识的保护。复杂的攻击会危及个人安全。我们认为管理员是单点故障，并试图将其设计出来。没有一个人可以确认生产的变化。
*   (59:00)速度来自你的基础。摧毁雪花。通过自助服务增强能力。建立你的基础。

您可以在这里观看 Vimeo [上的完整对话。](https://vimeo.com/215063008)

关于比特币基地如何使用 CircleCI 的更多信息，请点击阅读案例研究。