# 通过设置工作流| CircleCI 介绍动态配置

> 原文：<https://circleci.com/blog/introducing-dynamic-config-via-setup-workflows/>

通过设置工作流的新版本动态配置，CircleCI 客户现在可以使用作业和工作流，不仅可以执行工作，还可以确定他们想要运行的工作。

我们构建了动态配置，因为我们知道我们的用户希望在 CircleCI 构建过程中有更多的动态性。从历史上看，我们的平台是非常确定的:配置是根据给定管道的版本预先设置在一个文件中的。然而，这种确定性导致用户在他们想要的时候运行他们想要的东西的灵活性降低。

过去，客户试图通过使用预提交挂钩中的脚本在提交前生成配置，或者通过 API 触发管道运行的作业来设置管道参数，从而解决 CircleCI 配置的静态特性。虽然这些解决方案有效，但它们经常涉及不容易解决的奇怪的变通办法或边缘情况。

## 我们如何启用动态配置

意识到作业和工作流是使我们的配置更加动态的最佳方式之一，我们创建了一个特殊的工作流，称为“设置工作流”此工作流可以包含通过计算管道参数或生成 YAML 配置来“设置”管道的作业。然后，可以在设置工作流结束时将这些参数和配置传递到 CircleCI 命令/作业中，并将该配置中定义的任何工作流或作业添加到同一管道中。

该功能最令人兴奋的部分之一是，因为设置工作流是普通的 CircleCI 配置，所以您可以使用 orb 来合并常见类型的逻辑。我们目前正在为这个用例开发几个球体。例如，我们已经创建了一个[路径过滤 orb](https://circleci.com/developer/orbs/orb/circleci/path-filtering) ，它运行 git 命令来分析哪些文件在提交中发生了更改，并使用正则表达式来设置可用于过滤工作流或步骤的管道参数。[阅读我们的文档](https://circleci.com/docs/dynamic-config/?section=configuration)了解更多关于动态配置的具体功能。

## 下一步是什么

我们期待使用动态配置和 orbs 作为帮助客户解决不同用例的方法。我们正在考虑的一些想法:

*   一个 orb，允许用户组合配置，使得分解大型配置文件成为可能
*   解释构建工具输出的球体，如 Bazel 或 Lerna
*   一个能让你运行。特定分支的 circleci/config.yml(就像您的默认分支)，而不管触发管道的分支或 PR。
*   定义 SDK 的 orb，这样您就可以使用 TypeScript 编写配置

前往我们的社区论坛，[讨论](https://discuss.circleci.com/)，让我们知道您如何使用动态配置，并查看[本教程](https://circleci.com/blog/building-cicd-pipelines-using-dynamic-config/)以了解如何将动态配置整合到您的 CI/CD 管道中。