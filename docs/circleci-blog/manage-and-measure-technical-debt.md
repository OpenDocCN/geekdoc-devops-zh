# 技术债务:如何用 DevOps | CircleCI 衡量和管理它

> 原文：<https://circleci.com/blog/manage-and-measure-technical-debt/>

软件行业的每个技术团队都熟悉技术债。这是因为每个软件团队在每个软件开发周期都会产生技术债务。

这篇文章回答了一些关于技术债务的关键问题。它回顾了什么是技术债务及其原因，为什么必须解决它，以及这种债务是如何积累的。它还质疑技术债务是否总是一件坏事，探索如何度量它，并强调如何使用 DevOps 管理它。

## 什么是技术债？

当一个技术团队实现一个问题的次优解决方案时，他们是在现在支付实现最优解决方案的成本和以后支付成本之间进行权衡。在这样做的时候，这个团队正在招致技术上的“债务”

[https://www.youtube.com/embed/itAAGQclIF0](https://www.youtube.com/embed/itAAGQclIF0)

视频

项目越大，团队承担的技术债务就越多。此外，与金融债务一样，技术债务会产生“利息”。随着项目的增长，由于知识的丢失和处理债务所需的变更规模，解决问题变得更加困难和昂贵。越早处理债务越便宜。

虽然许多技术债务可以被一个有经验的技术团队发现，但是有些仍然没有被注意到。不幸的是，逃避检测的问题往往比可检测的问题修复成本更高。

拥有一个 [DevOps 过程](https://circleci.com/blog/essential-devops-principles/)可以通过早期检测、质量控制和建立解决技术缺陷的组织支持来减缓技术债务的积累。

## 技术债是什么原因造成的？

有必要检查技术债务的原因，以了解 DevOps 过程如何有所帮助。技术债务有两个主要来源:

1.  **业务需求**包括时间压力和不断变化的条件
2.  **技术领导力**诸如糟糕的技术设计或有缺陷的评审过程、工具、文档和测试套件等问题。

一些债务也可能来自业务对解决技术债务本身的支持不足。

## 为什么解决技术债务很重要？

简而言之，如果不去解决技术债务，成本会很高。成本有多种形式，例如:

*   开发功能需要更长的时间
*   产品质量受损
*   公司声誉受到打击

为了展示技术债务是如何增长的，想象一个开发团队正在开发一个没有 DevOps 的产品。可能是他们没有时间介绍 DevOps，也可能是他们没有预算。可能是他们认为这不会产生足够的影响。

当他们引入新代码时，团队中的开发人员在他们的计算机上测试它，并将其推送到 QA 环境。这是一个简单但容易出错的过程:有人可能将过时的代码或正确的代码部署到错误的服务器上，或者有人可能推送未提交的代码。当团队没有 DevOps 过程时，花费在诊断这些问题上的时间就是“兴趣”。

有时，中断是最小的，组织的其他部分几乎没有意识到。其他时候，此类错误会导致整个环境瘫痪，影响到所有相关人员。至少，有人浪费时间重新执行他们的测试，通过延长开发时间来增加公司的成本。

实际的美元价值与技术债务相关，企业需要了解技术债务是如何累积的。只有这样，他们才能支持需要解决债务的技术团队。

## 技术债是如何积累的？

一般来说，技术债务的积累是时间压力的直接结果。当为了满足交付日期而竞争时，将一些优先级较低的 bug 留到最后通常是一个容易的决定。对于许多团队来说，这组 bug 是“没有人会去处理的 bug 墓地”

同时，使用快速简单的修复来解决更高优先级的问题是很有诱惑力的。目的是在将来回过头来充分解决它们(只需检查代码中“TODOs”的数量)。实际上，他们将在很长一段时间内仍然有事情“要做”,因为一个已经处于时间紧张中的团队不太可能找到更多的时间。而且，随着时间的推移，开发人员会失去问题的背景，变得不太倾向于解决它们。

早期做出的技术决策可能不再适合软件当前的需求。但是为了节省时间，开发团队通常会寻找快速解决方案来加速交付，而不是花时间进行重构。随着时间的推移，他们发现维护这些临时解决方案的成本远远超过偿还债务的成本。然后他们可能会决定重构代码。在某些极端情况下，这可能会导致整个产品重写。

有时，团队可能会不知不觉地招致技术债务，因为他们缺乏编写更好代码的知识或技能。因此，随着代码库的增长，代码变得更难维护。

无论团队的构成还是公司，技术债都是不可避免的。定期管理和偿还债务至关重要。DevOps 可以在实现这一目标方面发挥作用。

## 技术债总是不好的吗？

虽然技术债务可能会很昂贵，但你不必马上偿还所有技术债务也是事实。就像一个企业为了发展而承担金融债务一样，承担适量的技术债务也是健康的。不要让完美成为好的敌人。

如果解决未来问题的成本低于承担债务的价值，那么承担债务是有意义的。然而，如果不管，技术债务会变得难以管理，侵蚀代码库的基础。因此，管理债务至关重要。

## 技术债务是如何衡量的？

衡量技术债务可能很复杂，需要考虑许多变量。团队的构成变了，技术变了，甚至需求也变了。使用比率最小化这些变量的影响。

### 技术负债比率

技术负债比率(TDR)是修复代码库的成本与构建代码库的成本之比。组织可以用时间或货币价值来衡量价格。从企业获得支持时，使用比率会很有帮助。这种支持可能是放宽时间表、增加预算、减少“必须具备的”特性的数量，或者为团队提供培训和工具。

您可以使用 TDR 向高管和利益相关者展示，偿还特定的技术债务比让它增长更有价值。将 TDR 保持在阈值以下可能是组织的目标。

### 用于分析代码中技术债务的自动化工具

手动评估可能不一致且主观，因此从业务角度来看不太可信。使用 SonarQube 和 Kiuwan 这样的代码扫描仪可以消除这种担忧。例如，SonarQube 扫描整个代码库，并客观地估计解决它发现的任何问题需要多长时间。

将这些工具与 DevOps 结合起来是有益的。

## 如何使用 DevOps 管理技术债务

虽然 DevOps 不能解决技术债务的所有问题，但它可以通过早期检测减缓债务的积累，从而减少 bug 的数量并改善沟通。

通过在您的 [CI/CD 管道](https://circleci.com/blog/what-is-a-ci-cd-pipeline/)中整合 [SonarQube](https://www.sonarqube.org/features/clean-as-you-code/) 和 [Kiuwan](https://www.kiuwan.com/code-analysis-qa/) 等工具，您可以持续计算技术债务并将其传达给业务部门。DevOps 可以作为技术团队和公司之间的沟通工具。它还可以作为一种教育工具，告知开发人员将来哪种代码会引入 bug。这些知识应该会提高代码质量，减少 bug 的数量。

缺乏 DevOps 标准是公司必须支付的技术债务。有了定义良好的 DevOps 标准，就有可能在每次代码检入、运行测试、然后部署时创建质量关卡。这种方法将开发人员从重复和容易出错的手动操作中解救出来，并优化了开发工作。通过保持高昂的士气和高水平的生产力，这间接地为公司节省了资金。

最后，DevOps 还支持持续交付。通过持续交付，特性在开发时就被推出。持续交付通过在更频繁的发布时更容易快速发现问题，从而最小化重构的障碍。

## 结论

技术债务是由为了节省时间而实现次优解决方案的软件团队产生的。这种债务会产生利息或不利的后果，直到团队通过实现一个优化的、可持续的解决方案来偿还它。并不总是需要马上偿还技术债务。然而，管理技术债务并确保它保持在可维护的阈值以下是至关重要的。

DevOps 通过整合 SonarQube 和 Kiuwan 等工具，可以在管理技术债务方面发挥重要作用。这些工具在早期检测到次优代码，减少了 bug 的数量，并将最新的结果传达给每个相关人员。

要了解 CircleCI 如何帮助开发团队平衡技术债务和开发速度，[探索 CircleCI](/why-circleci/#speed)