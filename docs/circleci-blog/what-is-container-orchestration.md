# 什么是容器编排？圆环

> 原文：<https://circleci.com/blog/what-is-container-orchestration/>

容器化是一种虚拟化，在这种虚拟化中，软件应用程序或服务与在任何计算环境中运行所需的所有组件打包在一起。通过使应用程序更加可移植、高效和可伸缩，容器与现代云本地开发实践紧密结合。随着应用程序架构变得越来越复杂，维护分布式系统稳定性所需的容器数量也在增加，软件团队可以通过容器编排来简化其容器基础设施的管理。

容器编排工具管理和自动化容器的整个生命周期，包括供应、部署和扩展。这使得组织能够大规模获得集装箱化的[好处，而不会产生额外的维护开销。然而，在采用新技术之前，团队应该考虑一些与采用容器编排工具相关的挑战。](https://circleci.com/blog/benefits-of-containerization/)

本文涵盖了容器编排的优点和挑战，以及一些要考虑的流行容器编排工具。

## 容器编排的好处

容器编排的好处包括:

*   高级安全性
*   成本效率
*   简化部署
*   改进的应用程序开发
*   高效的资源管理

### 高级安全性

在容器中运行应用程序及其进程可以降低传统的安全风险，因为容器中的应用程序可以独立运行。此外，容器编排工具只能在用户之间共享特定的资源，从而降低了数据泄露和其他安全漏洞的风险。

### 成本效率

容器是轻量级的，比虚拟机需要更少的资源来运行。无论环境如何，在一台主机上容纳多个容器都变得更加容易，当通过容器编排工具进行大规模部署时，可以显著节约成本。与手动部署相比，容器编排系统需要更少的时间和人力来管理，从而节省了额外的成本。

### 简化部署

有了容器编排工具，构建和发布软件的速度加快了。应用程序部署更易于管理，因为与应用程序相关的一切都存在于容器中。一些容器编排工具提供了部署控制器，进一步简化了部署过程，包括部署和回滚、pod 管理等等。

### 改进的应用程序开发

容器使得开发、测试和交付软件的整个过程更快、更有效和可重复。编排允许团队轻松推出和回滚新版本或功能，使生产测试和更复杂的部署策略更容易完成。

### 高效的资源管理

容器使得管理资源更加容易，因为它们不包括操作系统(OS)映像。这使得容器比传统应用程序更加高效和轻量级。

## 容器编排工具

有许多容器编排工具可用。本节回顾了一些最流行的。

### 库伯内特斯

在所有开源容器编排工具中，Kubernetes——也称为 K8s——可能是最著名和最受欢迎的。Kubernetes 专注于管理容器的整个生命周期，并提供一系列托管服务来帮助团队获得所有好处，而不会带来复杂性。开发人员喜欢它的灵活性、独立于供应商的特性、稳定的版本发布以及围绕它构建的开源社区。

Kubernetes 帮助管理复杂的应用程序，这些应用程序由几个必须大规模托管的独立服务组成。由于 Kubernetes API，这变得很容易，它允许与供应和管理相关的几个任务的自动化。

这一系列服务简化了容器自动化和管理流程，并简化了交付云服务的流程。

一些托管的 Kubernetes 服务包括:

*   红帽 OpenShift
*   谷歌 Kubernetes 引擎(GKE)
*   蓝色库柏服务(AK)
*   亚马逊弹性库柏服务(EKS)

OpenShift 是 Red Hat 基于 Docker 和 Kubernetes 开发的云开发平台，由开源的 Kubernetes 引擎提供支持。这个平台即服务(PaaS)使用 Kubernetes 作为容器编排引擎，使开发人员能够在任何地方运行和构建应用程序。它有助于开发、部署和管理基于云的应用程序，允许开发人员以自助方式工作。

Google Kubernetes 引擎(GKE)是一个基于 Kubernetes 的管理系统，用于管理 Google 公共云服务中的 Docker 容器和容器集群。

Azure Kubernetes Service (AKS)是 Azure 的完全托管的容器服务，简化了在 Azure 中部署 Kubernetes 集群。Azure 完全管理集群，使得无需编排技能或专业知识就可以轻松部署容器化的应用程序。

**亚马逊弹性 Kubernetes 服务** (EKS)是一项托管服务，简化了在 AWS 中运行和部署 Kubernetes。这是一个容器即服务(CaaS)，它为 AWS 用户提供了 Kubernetes 的功能，而无需管理 Kubernetes。

### 码头工人群

Docker 提供的 Docker Swarm 是一个开源的容器编排工具，也是 Docker 的原生集群引擎。它通过将 Docker 实例和主机池转换为单个虚拟主机，实现了对部署在众多机器上的多个容器的有效管理。

Docker Swarm 提供了分散的访问，使得分散的团队可以更容易地有效地工作和管理环境。要了解更多关于 Docker Swarm 的信息，以及它与其他流行的容器管理工具的比较，请阅读 [Docker Swarm vs Kubernetes:如何选择容器编排工具](https://circleci.com/blog/docker-swarm-vs-kubernetes/)。

### 梅索斯

Apache Mesos 是另一个开源集群管理服务。它在应用程序层和操作系统之间工作，使得在大型集群环境中部署和管理应用程序更加简单高效。

Mesos 是第一个开源集群管理服务，它使用动态资源共享和隔离(将程序与其他正在运行的进程隔离)来处理分布式环境中的工作负载。Mesos 为应用程序提供集群中所有机器上的可用资源，并频繁更新以包含已完成的应用程序所释放的资源。这使得应用程序可以做出最佳决策，决定在哪个机器上执行哪个任务。

### 流浪者

由 HashiCorp 于 2015 年首次发布，Nomad 最初被设计为一个通用的管弦乐队。现在，Nomad 是一个容器编排工具，它提供了灵活的集群管理以及在集群中的工作节点之间调度和部署任务。Kubernetes 集群中的工作节点执行 Kubernetes API 提供的操作。它们可以用来运行容器化的应用程序，也可以处理集群内外的应用程序之间的网络。

Nomad 在现场或云环境中的各种基础设施上部署和管理容器和非容器化应用程序。除了容器之外，Nomad 还处理任何应用程序的编排，并提供装箱功能，以实现有效的空间管理和作业调度。

### 苏斯牧场主

SUSE Rancher 是一个为方便管理、组织和管理任何基础设施上的数千个 Kubernetes 集群而构建的服务。

Rancher 允许开发人员使用 Rancher Kubernetes 引擎(RKE)或其他云 Kubernetes 服务(如 GKE 和 EKS)创建 Kubernetes 集群。使用 SUSE Rancher，开发人员可以从任何 Kubernetes 发行版导入和管理现有的 Kubernetes 集群。

## 容器编排挑战

对于以前没有什么容器经验的组织来说，设置容器编排可能会令人望而生畏。自学这些工具及其管理的内容将有助于您应对挑战，例如:

*   选择正确的工具
*   安全性
*   建立工作关系网
*   文化变迁

### 选择正确的工具

有了这么多可用的容器编排工具，可能很难理解每个工具提供了什么功能，为什么应该使用它们，以及它们是否适合您的组织的需求。

选择工具时需要注意的一些基本特性包括:

*   安全性
*   缩放比例
*   所需技能
*   效率
*   组织特定的需求

在选择工具为您的决策过程提供信息时，请记住这些。

### 安全性

容器管理和编排可能比其他基础设施更复杂。整个容器编排过程必须是安全的，因为攻击者可以利用任何错误配置、错误或其他漏洞。停机时间、金钱损失和敏感数据被利用只是容器编排中安全问题的一些副产品。

让具有安全意识的开发人员管理和维护整个过程以降低安全风险是至关重要的。通过在持续集成管道中实施[自动化漏洞扫描等安全最佳实践，您可以显著降低风险。](https://circleci.com/blog/security-with-snyk-in-the-circleci-workflow/)

### 建立工作关系网

使用微服务开发的组织需要每个服务与其他服务进行通信，以实现轻松的工作流。如果组织预期容器之间的高流量，这可能会导致一些问题。然而，一个好的负载均衡器可以轻松地解决流量问题。

### 文化变迁

容器编排是一个需要开放性和责任性的领域。如果这不是一个组织文化中已经存在的一部分，那么实现容器编排可能会很困难，不管规模有多大。为了有效地实现容器编排、通信和协作，您必须鼓励所有级别的最佳 DevOps 实践。

## 容器编排和 CI/CD

您可以将容器编排集成到持续集成和持续开发(CI/CD)管道中。将 CI/CD 与容器编排结合使用将自动完成基本任务。本节讨论其中的一些。

### 自动化容器构建

CI/CD 管道可以[自动化构建容器的整个过程](https://circleci.com/blog/how-to-build-a-docker-image-on-circleci-2-0/)，允许开发人员专注于提供新功能和响应客户需求。您还可以[自动将容器部署到 Kubernetes 集群](https://circleci.com/blog/deploy-web-apps-on-kubernetes-with-ci/)或其他容器编排工具，这样您的用户可以快速接收更新，减少等待时间。

### 安全扫描

在应用程序的开发过程以及编排过程中，可能会出现错误和安全问题。为了减少您在容器化应用程序中暴露于[供应链漏洞](https://circleci.com/blog/secure-software-supply-chain/)和其他潜在攻击媒介的风险，实现全面的自动化测试过程非常重要。

### 基础架构配置和部署

配置和部署是 DevOps 管道的重要方面。您可以[使用 CI/CD](https://circleci.com/blog/getting-started-with-kubernetes-how-to-set-up-your-first-cluster/) 自动化您的容器集群配置过程，减少代价高昂的错误配置和其他错误的机会。

## 结论

本文讨论了容器编排的好处，包括高级安全性、成本效率、简化的部署、改进的应用程序开发和高效的资源管理。它调查了几种工具，讨论了容器编排带来的一些挑战以及如何应对这些挑战，并解释了 CI/CD 管道如何通过自动化来简化容器编排。

容器化和容器编排工具将继续存在。像 Kubernetes、Docker Swarm 和 Nomad 这样的工具使得复杂的容器化应用程序的开发到部署过程变得更加简单，使组织免于昂贵的手动基础设施管理。但是，在选择编排工具之前，考虑您的组织需求和能力是很重要的。尽管容器编排有其挑战，但好处远远大于问题，这些问题可以通过适当的规划得到缓解。

当您的组织准备好通过容器编排扩展容器的使用时，您可以通过全面的 CI/CD 管道进一步自动化和保护构建、测试和部署过程。CircleCI [与 Kubernetes](https://circleci.com/integrations/kubernetes/) 和其他容器编排工具集成，使您更快、更轻松地过渡到基于容器的部署。首先，[今天就注册一个免费账户](https://circleci.com/signup/)。